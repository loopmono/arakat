<!doctype html><html><head><title>보물 상자 하나 잘못 열었다가</title><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/><script type="module" crossorigin>
var Gn=Object.defineProperty;var Jn=(n,e,t)=>e in n?Gn(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var U=(n,e,t)=>(Jn(n,typeof e!="symbol"?e+"":e,t),t),Et=(n,e,t)=>{if(!e.has(n))throw TypeError("Cannot "+t)};var pe=(n,e,t)=>(Et(n,e,"read from private field"),t?t.call(n):e.get(n)),_t=(n,e,t)=>{if(e.has(n))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(n):e.set(n,t)},Ct=(n,e,t,i)=>(Et(n,e,"write to private field"),i?i.call(n,t):e.set(n,t),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function t(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=t(r);fetch(r.href,s)}})();const Xn={"config.logger.show.parse":!1,"config.logger.show.render":!1,"config.logger.show.sound":!1,"config.logger.show.state":!1,"config.logger.show.story":!1,"config.logger.show.style":!1};function Jt(n){return n+": "}const Ne={inserts:!0};function Qn(n){Ne[n]=!1}function Kn(n){Ne[n]=!0}function Xt(n,e){Ne[n]&&(console.log(Jt(n)+e),window.dispatchEvent(new CustomEvent("log-info",{detail:{message:e,source:n}})))}function Qt(n,e){Ne[n]&&(console.warn(Jt(n)+e),window.dispatchEvent(new CustomEvent("log-warning",{detail:{message:e,source:n}})))}function F(n){return{log(e){Xt(n,e)},warn(e){Qt(n,e)}}}function Yn(){window.addEventListener("state-change",n=>{const e=/^config\.logger\.show\.(.+)$/.exec(n.detail.name);e&&e[1]&&(n.detail.value?Kn(e[1]):Qn(e[1]))})}var ei=typeof global=="object"&&global&&global.Object===Object&&global;const ti=ei;var ni=typeof self=="object"&&self&&self.Object===Object&&self,ii=ti||ni||Function("return this")();const rt=ii;var ri=rt.Symbol;const le=ri;var Kt=Object.prototype,si=Kt.hasOwnProperty,oi=Kt.toString,ge=le?le.toStringTag:void 0;function ai(n){var e=si.call(n,ge),t=n[ge];try{n[ge]=void 0;var i=!0}catch{}var r=oi.call(n);return i&&(e?n[ge]=t:delete n[ge]),r}var li=Object.prototype,ci=li.toString;function ui(n){return ci.call(n)}var di="[object Null]",fi="[object Undefined]",Tt=le?le.toStringTag:void 0;function Yt(n){return n==null?n===void 0?fi:di:Tt&&Tt in Object(n)?ai(n):ui(n)}function hi(n){return n!=null&&typeof n=="object"}var pi="[object Symbol]";function st(n){return typeof n=="symbol"||hi(n)&&Yt(n)==pi}function gi(n,e){for(var t=-1,i=n==null?0:n.length,r=Array(i);++t<i;)r[t]=e(n[t],t,n);return r}var mi=Array.isArray;const ot=mi;var bi=1/0,At=le?le.prototype:void 0,Lt=At?At.toString:void 0;function en(n){if(typeof n=="string")return n;if(ot(n))return gi(n,en)+"";if(st(n))return Lt?Lt.call(n):"";var e=n+"";return e=="0"&&1/n==-bi?"-0":e}function Pe(n){var e=typeof n;return n!=null&&(e=="object"||e=="function")}var yi="[object AsyncFunction]",wi="[object Function]",ki="[object GeneratorFunction]",xi="[object Proxy]";function vi(n){if(!Pe(n))return!1;var e=Yt(n);return e==wi||e==ki||e==yi||e==xi}var $i=rt["__core-js_shared__"];const Fe=$i;var zt=function(){var n=/[^.]+$/.exec(Fe&&Fe.keys&&Fe.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}();function Si(n){return!!zt&&zt in n}var Ei=Function.prototype,_i=Ei.toString;function Ci(n){if(n!=null){try{return _i.call(n)}catch{}try{return n+""}catch{}}return""}var Ti=/[\\^$.*+?()[\]{}|]/g,Ai=/^\[object .+?Constructor\]$/,Li=Function.prototype,zi=Object.prototype,Pi=Li.toString,Oi=zi.hasOwnProperty,Ii=RegExp("^"+Pi.call(Oi).replace(Ti,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Mi(n){if(!Pe(n)||Si(n))return!1;var e=vi(n)?Ii:Ai;return e.test(Ci(n))}function Ni(n,e){return n==null?void 0:n[e]}function at(n,e){var t=Ni(n,e);return Mi(t)?t:void 0}var Ri=function(){try{var n=at(Object,"defineProperty");return n({},"",{}),n}catch{}}();const Pt=Ri;var Di=9007199254740991,ji=/^(?:0|[1-9]\d*)$/;function Hi(n,e){var t=typeof n;return e=e??Di,!!e&&(t=="number"||t!="symbol"&&ji.test(n))&&n>-1&&n%1==0&&n<e}function qi(n,e,t){e=="__proto__"&&Pt?Pt(n,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):n[e]=t}function tn(n,e){return n===e||n!==n&&e!==e}var Fi=Object.prototype,Bi=Fi.hasOwnProperty;function Ui(n,e,t){var i=n[e];(!(Bi.call(n,e)&&tn(i,t))||t===void 0&&!(e in n))&&qi(n,e,t)}var Vi=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Wi=/^\w*$/;function Zi(n,e){if(ot(n))return!1;var t=typeof n;return t=="number"||t=="symbol"||t=="boolean"||n==null||st(n)?!0:Wi.test(n)||!Vi.test(n)||e!=null&&n in Object(e)}var Gi=at(Object,"create");const we=Gi;function Ji(){this.__data__=we?we(null):{},this.size=0}function Xi(n){var e=this.has(n)&&delete this.__data__[n];return this.size-=e?1:0,e}var Qi="__lodash_hash_undefined__",Ki=Object.prototype,Yi=Ki.hasOwnProperty;function er(n){var e=this.__data__;if(we){var t=e[n];return t===Qi?void 0:t}return Yi.call(e,n)?e[n]:void 0}var tr=Object.prototype,nr=tr.hasOwnProperty;function ir(n){var e=this.__data__;return we?e[n]!==void 0:nr.call(e,n)}var rr="__lodash_hash_undefined__";function sr(n,e){var t=this.__data__;return this.size+=this.has(n)?0:1,t[n]=we&&e===void 0?rr:e,this}function ee(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var i=n[e];this.set(i[0],i[1])}}ee.prototype.clear=Ji;ee.prototype.delete=Xi;ee.prototype.get=er;ee.prototype.has=ir;ee.prototype.set=sr;function or(){this.__data__=[],this.size=0}function Re(n,e){for(var t=n.length;t--;)if(tn(n[t][0],e))return t;return-1}var ar=Array.prototype,lr=ar.splice;function cr(n){var e=this.__data__,t=Re(e,n);if(t<0)return!1;var i=e.length-1;return t==i?e.pop():lr.call(e,t,1),--this.size,!0}function ur(n){var e=this.__data__,t=Re(e,n);return t<0?void 0:e[t][1]}function dr(n){return Re(this.__data__,n)>-1}function fr(n,e){var t=this.__data__,i=Re(t,n);return i<0?(++this.size,t.push([n,e])):t[i][1]=e,this}function de(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var i=n[e];this.set(i[0],i[1])}}de.prototype.clear=or;de.prototype.delete=cr;de.prototype.get=ur;de.prototype.has=dr;de.prototype.set=fr;var hr=at(rt,"Map");const pr=hr;function gr(){this.size=0,this.__data__={hash:new ee,map:new(pr||de),string:new ee}}function mr(n){var e=typeof n;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?n!=="__proto__":n===null}function De(n,e){var t=n.__data__;return mr(e)?t[typeof e=="string"?"string":"hash"]:t.map}function br(n){var e=De(this,n).delete(n);return this.size-=e?1:0,e}function yr(n){return De(this,n).get(n)}function wr(n){return De(this,n).has(n)}function kr(n,e){var t=De(this,n),i=t.size;return t.set(n,e),this.size+=t.size==i?0:1,this}function ie(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var i=n[e];this.set(i[0],i[1])}}ie.prototype.clear=gr;ie.prototype.delete=br;ie.prototype.get=yr;ie.prototype.has=wr;ie.prototype.set=kr;var xr="Expected a function";function lt(n,e){if(typeof n!="function"||e!=null&&typeof e!="function")throw new TypeError(xr);var t=function(){var i=arguments,r=e?e.apply(this,i):i[0],s=t.cache;if(s.has(r))return s.get(r);var a=n.apply(this,i);return t.cache=s.set(r,a)||s,a};return t.cache=new(lt.Cache||ie),t}lt.Cache=ie;var vr=500;function $r(n){var e=lt(n,function(i){return t.size===vr&&t.clear(),i}),t=e.cache;return e}var Sr=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Er=/\\(\\)?/g,_r=$r(function(n){var e=[];return n.charCodeAt(0)===46&&e.push(""),n.replace(Sr,function(t,i,r,s){e.push(r?s.replace(Er,"$1"):i||t)}),e});const Cr=_r;function ct(n){return n==null?"":en(n)}function ut(n,e){return ot(n)?n:Zi(n,e)?[n]:Cr(ct(n))}var Tr=1/0;function dt(n){if(typeof n=="string"||st(n))return n;var e=n+"";return e=="0"&&1/n==-Tr?"-0":e}function nn(n,e){e=ut(e,n);for(var t=0,i=e.length;n!=null&&t<i;)n=n[dt(e[t++])];return t&&t==i?n:void 0}function Be(n,e,t){var i=n==null?void 0:nn(n,e);return i===void 0?t:i}function Ar(n,e,t){var i=-1,r=n.length;e<0&&(e=-e>r?0:r+e),t=t>r?r:t,t<0&&(t+=r),r=e>t?0:t-e>>>0,e>>>=0;for(var s=Array(r);++i<r;)s[i]=n[i+e];return s}function rn(n){return function(e){return n==null?void 0:n[e]}}function Lr(n){var e=n==null?0:n.length;return e?n[e-1]:void 0}var zr={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Pr=rn(zr);const Or=Pr;var sn=/[&<>"']/g,Ir=RegExp(sn.source);function q(n){return n=ct(n),n&&Ir.test(n)?n.replace(sn,Or):n}function Mr(n,e){return e.length<2?n:nn(n,Ar(e,0,-1))}function Nr(n,e){return e=ut(e,n),n=Mr(n,e),n==null||delete n[dt(Lr(e))]}function Rr(n,e,t,i){if(!Pe(n))return n;e=ut(e,n);for(var r=-1,s=e.length,a=s-1,l=n;l!=null&&++r<s;){var o=dt(e[r]),u=t;if(o==="__proto__"||o==="constructor"||o==="prototype")return n;if(r!=a){var c=l[o];u=i?i(c,o,l):void 0,u===void 0&&(u=Pe(c)?c:Hi(e[r+1])?[]:{})}Ui(l,o,u),l=l[o]}return n}function ft(n,e,t){return n==null?n:Rr(n,e,t)}var Dr={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},jr=rn(Dr);const Hr=jr;var on=/&(?:amp|lt|gt|quot|#39);/g,qr=RegExp(on.source);function Fr(n){return n=ct(n),n&&qr.test(n)?n.replace(on,Hr):n}function Br(n,e){return n==null?!0:Nr(n,e)}const an=F("story"),P={customScripts:[],customStyles:[],passages:[]};function ln(n){for(const i of["name","creator","ifid","options"])P[i]=n.getAttribute(i)??void 0;const e=parseInt(n.getAttribute("startnode")??"");isNaN(e)||(P.startNode=e),P.creatorVersion=n.getAttribute("creator-version")??void 0;const t=i=>[...i].map(r=>r.textContent??"");P.customScripts=t(n.querySelectorAll('[type="text/twine-javascript"]')),P.customStyles=t(n.querySelectorAll('[type="text/twine-css"]')),P.passages=[...n.querySelectorAll("tw-passagedata")].map(i=>{const r=parseInt(i.getAttribute("pid")??""),s=i.getAttribute("tags");return{id:isNaN(r)?void 0:r,name:i.getAttribute("name")??void 0,source:i.textContent??"",tags:s?s.split(" "):[]}})}function cn(){const n=pt();if(!n||!n.name)throw new Error("There is no starting passage for this story, or it has no name.");re({trail:[n.name],"config.testing":typeof P.options=="string"&&P.options.indexOf("debug")!==-1||!1}),P.name&&(document.title=P.name)}function un(){an.log(`Running custom scripts (${P.customScripts.length})`);for(const n of P.customScripts)new Function(n).apply(window)}function dn(){an.log(`Adding custom styles (${P.customStyles.length})`);for(const n of P.customStyles){const e=document.createElement("style");e.innerHTML=n,document.head.appendChild(e)}}function fn(){return P.ifid}function ht(){return P.name}function Ur(){return P.passages}function pt(){return P.passages.find(n=>n.id===P.startNode)}function Se(n){return P.passages.find(e=>e.name===n)}function Vr(n){return P.passages.find(e=>e.id===n)}function hn(n){let e=[],t=!1;return async(...i)=>{t||(t=!0,Promise.resolve().then(()=>{try{n(e),e=[],t=!1}catch(r){window.setTimeout(()=>{throw r})}})),e.push(i)}}function ke(n,e,t=[]){const i=document.createElement(n);if(e)for(const r of Object.keys(e))e[r]!==void 0&&i.setAttribute(r,e[r]);for(const r of t)typeof r=="string"||typeof r=="number"?i.appendChild(document.createTextNode(r.toString())):i.appendChild(r);return i}function N(...n){return ke(...n).outerHTML}function Je(n){return Array.isArray(n)?n.every(Je):n===null?!0:typeof n=="object"?Object.getPrototypeOf(n)!==Object.prototype?!1:Object.values(n).every(Je):typeof n=="number"?isFinite(n)&&!isNaN(n):["boolean","string","undefined"].includes(typeof n)}const{log:Q,warn:Wr}=F("state");let te;const gt={},pn={},ce={};function mt(n,e){if(n[e])return;Object.defineProperty(n,e,{get(){return p(e)},set(i){$(e,i)},configurable:!0});const t=e.split(".");t.length>1&&(t.pop(),mt(n,t.join(".")))}function Zr(n,e){if(n[e])return;const t=e.split("."),i=t[t.length-1];for(let r=0;r<t.length-1;r++)n[t[r]]=n[t[r]]||{},n=n[t[r]];Object.defineProperty(n,i,{get(){return p(e)},set(){throw new Error("Chapbook lookup variables may only be read.")},configurable:!0})}function Gr(n,e){Br(n,e)}function gn(){const n=fn(),e=ht();if(e===void 0)throw new Error("Cannot set up state: the story has no name");te=`chapbook-${e}-${n}`,je("config.state.autosave",!0)}function bt(){function n(e,t){Object.keys(e).forEach(i=>{const r=t===""?i:`${t}.${i}`;if(typeof e[i]=="object"&&!Array.isArray(e[i]))n(e[i],r);else{const s=e[i];delete e[i],Gr(window,t),window.dispatchEvent(new CustomEvent("state-change",{detail:{name:r,value:p(r),previous:s}}))}})}n(ce,""),window.dispatchEvent(new CustomEvent("state-reset")),p("config.state.autosave")&&yt()}function $(n,e){const t=p(n);Je(e)||Wr(`Setting ${n} to ${JSON.stringify(e)} can't be saved permanently. This will work in the current session, but will not persist between sessions.`),ft(ce,n,e),mt(window,n),e!==t&&window.dispatchEvent(new CustomEvent("state-change",{detail:{previous:t,name:n,value:e}})),p("config.state.autosave")&&yt()}function je(n,e){const t=p(n);Q(`Defaulting "${n}" to ${JSON.stringify(e)}`),ft(gt,n,e),mt(window,n),t==null&&window.dispatchEvent(new CustomEvent("state-change",{detail:{previous:t,name:n,value:e}}))}function re(n){for(const e in n)je(e,n[e])}function C(n,e){const t=p(n);Q(`Adding lookup variable ${n}`),ft(pn,n,e),Zr(window,n),t==null&&window.dispatchEvent(new CustomEvent("state-change",{detail:{previous:t,name:n,value:p(n)}}))}function p(n){const e=Be(pn,n);if(typeof e=="function")return e(p,$);const t=Be(ce,n),i=Be(gt,n);if(t==null)return i;if(typeof t=="object"&&t!==null&&!Array.isArray(t)&&typeof i=="object"&&i!==null&&!Array.isArray(i)){const r={},s=[...Object.keys(i),...Object.keys(t)];for(const a of s)Object.defineProperty(r,a,{get(){return p(n+"."+a)},set(l){$(n+"."+a,l)},configurable:!0,enumerable:!0});return r}return t}function xe(){return{...ce}}function Ee(n){bt();for(const e in n)$(e,n[e])}function mn(){try{return window.localStorage.setItem("chapbook-test","a"),window.localStorage.removeItem("chapbook-test"),!0}catch{return!1}}function yt(){Q("Saving to local storage: "+JSON.stringify(xe())),window.localStorage.setItem(te,JSON.stringify(xe())),Q("Save complete")}function bn(){return mn()&&window.localStorage.getItem(te)!==null}function yn(){Q("Restoring variables from local storage");const n=window.localStorage.getItem(te);if(!n)throw new Error(`No value is set in local storage at "${te}"`);Ee(JSON.parse(n)),Q("Restore complete")}function wn(n){n||Q("Purging variables from local storage");const e=window.localStorage.getItem(te);if(!e)throw new Error(`No value is set in local storage at "${te}"`);Ee(JSON.parse(e)),n||Q("Purge complete")}function He(n){function e(t,i,r=[]){return Object.keys(t).reduce((s,a)=>{if(typeof t[a]=="object"&&t[a]&&!Array.isArray(t[a]))e(t[a],i?`${i}.${a}`:a,s);else{const l=i?`${i}.${a}`:a;s.includes(l)||s.push(l)}return s},r)}return n?e(gt,void 0,e(ce)).sort():e(ce).sort()}const Jr=Object.freeze(Object.defineProperty({__proto__:null,canRestoreFromStorage:bn,canSaveToStorage:mn,get:p,initState:gn,purgeFromStorage:wn,reset:bt,restoreFromObject:Ee,restoreFromStorage:yn,saveToObject:xe,saveToStorage:yt,set:$,setDefault:je,setDefaults:re,setLookup:C,varNames:He},Symbol.toStringTag,{value:"Module"})),Xr=Object.freeze(Object.defineProperty({__proto__:null,addCustomStyles:dn,ifid:fn,initStory:cn,loadFromData:ln,name:ht,passageNamed:Se,passageWithId:Vr,passages:Ur,runCustomScripts:un,startPassage:pt},Symbol.toStringTag,{value:"Module"})),{log:kn}=F("actions");function xn(n){kn(`Going to passage "${n}"`);const e=Se(n);if(!e)throw new Error(`There is no passage with the name "${n}"`);document.activeElement instanceof HTMLElement&&document.activeElement.blur();const t=p("trail");if(!Array.isArray(t))throw new Error(`The trail variable has been set to a ${typeof t}, not an array.`);$("trail",[...t,e.name])}function vn(){kn("Restarting"),bt(),window.location.reload()}let X=[],Oe=!0;function Qr(){Oe&&(X=[],window.dispatchEvent(new CustomEvent("backstage-state-recorder-update")))}function Kr({detail:n}){if(!Oe)return;X.length===p("config.backstage.trail.maxLength")&&X.shift();const{name:e,value:t}=n;X.push({change:{name:e,value:t},state:xe()}),window.dispatchEvent(new CustomEvent("backstage-state-recorder-update"))}function Yr(){return[...X]}function es(n){if(!X[n])throw new Error(`There is no history at index ${n} to rewind to.`);Oe=!1,Ee(X[n].state),X.length=n+1,Oe=!0,window.dispatchEvent(new CustomEvent("backstage-state-recorder-update"))}function ts(){je("config.backstage.trail.maxLength",100),window.addEventListener("state-change",Kr),window.addEventListener("state-reset",Qr)}let V=[];function ns(n){V.push({name:n,state:xe()}),$n(),window.dispatchEvent(new CustomEvent("backstage-state-snapshots-update"))}function is(n){const e=V.find(t=>t.name===n);if(!e)throw new Error(`There is no snapshot named "${n}".`);Ee(e.state)}function rs(n){V=V.filter(({name:e})=>n!==e),$n(),window.dispatchEvent(new CustomEvent("backstage-state-snapshots-update"))}function ss(){try{V=JSON.parse(window.localStorage.getItem(`chapbookbackstage-snapshots-${p("config.state.saveKey")}`)),Array.isArray(V)||(V=[])}catch{V=[]}}function $n(){window.localStorage.setItem(`chapbookbackstage-snapshots-${p("config.state.saveKey")}`,JSON.stringify(V))}function Ot(){return V.map(({name:n})=>n)}function os(){ss()}function wt(n){for(const e in n)window.customElements.get(e)||window.customElements.define(e,n[e])}class z extends HTMLElement{defaultHtml(e){this.innerHTML.trim()===""&&(this.innerHTML=e)}delegate(e,t,i){this.addEventListener(e,r=>{if(!r.target)return;const s=r.target.closest(t);s&&i(r,s)})}query(e){const t=this.querySelector(e);if(!t)throw new Error(`Couldn't find element matching "${e}"`);return t}queryAll(e){return[...this.querySelectorAll(e)]}}class Sn extends z{constructor(){super(),this.addEventListener("click",e=>{e.target.closest("[data-toggle-collapsed]")&&(this.hasAttribute("collapsed")?this.removeAttribute("collapsed"):this.setAttribute("collapsed",""))})}connectedCallback(){this.innerHTML=`
			<button data-toggle-collapsed></button>
			<div class="content">
				<backstage-tabs aria-label="Backstage">
				<backstage-tab
					aria-controls="backstage-state-tab-panel"
					id="backstage-state-tab"
				>
					State
				</backstage-tab>
				<backstage-tab
					aria-controls="backstage-history-tab-panel"
					id="backstage-history-tab"
				>
					History
				</backstage-tab>
				<backstage-tab
					aria-controls="backstage-style-tab-panel"
					id="backstage-style-tab"
				>
					Style
				</backstage-tab>
				<backstage-tab
					aria-controls="backstage-notes-tab-panel"
					id="backstage-notes-tab"
				>
					Notes
				</backstage-tab>
			</backstage-tabs>
			<backstage-tab-panel
				aria-labelledby="backstage-state-tab"
				id="backstage-state-tab-panel"
			>
				<backstage-state-variables></backstage-state-variables>
				<backstage-state-snapshots></backstage-state-snapshots>
			</backstage-tab-panel>
			<backstage-tab-panel
				aria-labelledby="backstage-history-tab"
				id="backstage-history-tab-panel"
			>
				<backstage-history-table></backstage-history-table>
			</backstage-tab-panel>
			<backstage-tab-panel
				aria-labelledby="backstage-style-tab"
				id="backstage-style-tab-panel"
			>
				<backstage-style-theme></backstage-style-theme>
				<backstage-style-config></backstage-style-config>
				<backstage-style-group title="Page" prefix="page"></backstage-style-group>
				<backstage-style-group title="Header"></backstage-style-group>
				<backstage-style-group title="Footer"></backstage-style-group>
			</backstage-tab-panel>
			<backstage-tab-panel
				aria-labelledby="backstage-notes-tab"
				id="backstage-notes-tab-panel"
			>
				<backstage-notes></backstage-notes>
			</backstage-tab-panel>
		</div>`,this.update()}attributeChangedCallback(){this.update()}update(){const e=this.querySelectorAll("[data-toggle-collapsed]");if(this.hasAttribute("collapsed")){for(const t of e)t.innerHTML="&larr;",t.setAttribute("aria-label","Show Backstage");document.body.classList.remove("backstage-visible")}else{for(const t of e)t.innerHTML="&rarr;",t.setAttribute("aria-label","Hide Backstage");document.body.classList.add("backstage-visible")}}}U(Sn,"observedAttributes",["collapsed"]);function as(n){const e=[];let t=[],i;return n.forEach(({change:r},s)=>{if(r.name==="trail"){const a=r.value;e.push({historyIndex:s-1,passage:i,varChanges:t}),t=[],i=a[a.length-1]}else t.push({name:r.name,value:r.value})}),e.push({historyIndex:n.length-1,passage:i,varChanges:t}),e}class ls extends z{constructor(){super();U(this,"root",document.createElement("div"));this.delegate("click","button[data-rewind]",(t,i)=>{const r=parseInt(i.dataset.rewind??"");isNaN(r)||es(r)})}connectedCallback(){window.addEventListener("backstage-state-recorder-update",this),this.update()}disconnectedCallback(){window.removeEventListener("backstage-state-recorder-update",this)}handleEvent(){this.update()}update(){this.innerHTML=as(Yr()).reduce((t,{historyIndex:i,passage:r,varChanges:s})=>{t+=`
					<button
						data-rewind="${i}"
						aria-label="Rewind to ${r?q(r):"Startup"}">&#x21aa;
					${r?q(r):"<em>Startup</em>"}</button><table><thead><tr><th>Variable</th><th>Value</th></thead><tbody>`;for(const a of s)t+=`
						<tr>
							<td>${q(a.name)}</td><td>${q(JSON.stringify(a.value))}</td>
						</tr>`;return t+"</tbody></table>"},"")}}let M={};function cs(){M={},kt()}function us(){const n=Object.keys(M).reduce((t,i)=>t+`<li class="note"><span class="passage">${q(i)}</span><pre>${q(M[i])}</pre></li>`,"");let e=p("story.name");return typeof e!="string"&&(e="Story"),`<h1>Notes for &ldquo;${q(e)}&rdquo;</h1><ul data-cb-backstage-notes data-cb-version="${p("engine.version")}">${n}</ul>`}function ds(n){return M[n]}function fs(n){const e=document.createElement("div"),t={...M};let i=0;e.innerHTML=n;for(const r of e.querySelectorAll("ul[data-cb-backstage-notes] li")){const s=r.querySelector("span.passage"),a=r.querySelector("pre");s!=null&&s.textContent&&(a!=null&&a.textContent)&&(t[s.textContent]?t[s.textContent]=`${t[s.textContent]??""}

${a.textContent}`:t[s.textContent]=a.textContent,i++)}return M=t,kt(),i}function hs(){const n=window.localStorage.getItem(`chapbookbackstage-passage-notes-${p("config.state.saveKey")}`);try{n&&(M=JSON.parse(n),(typeof M!="object"||Array.isArray(M))&&(M={}))}catch{M={}}}function kt(){window.localStorage.setItem(`chapbookbackstage-passage-notes-${p("config.state.saveKey")}`,JSON.stringify(M))}function ps(n,e){M[n]=e,kt()}function gs(){hs()}function It(){const n=p("trail");if(Array.isArray(n))return n[n.length-1]}class ms extends z{constructor(){super(),this.delegate("change",'input[type="file"]',e=>{var i;const t=(i=e.target.files)==null?void 0:i[0];if(t){const r=new FileReader;r.onload=s=>{const a=fs(s.target.result);window.alert(`${a} note(s) were imported.`)},r.readAsText(t)}}),this.delegate("change","textarea",e=>{const t=It();t&&ps(t,e.target.value)}),this.delegate("click","[data-export]",()=>{const e=us(),t=document.createElement("a");p("story.name"),t.setAttribute("download",`${p("story.name")} Notes - ${new Date().toDateString()} ${new Date().toTimeString()}.html`),t.setAttribute("href","data:text/html;base64,"+window.btoa(e)),document.body.appendChild(t),t.click(),document.body.removeChild(t)}),this.delegate("click","[data-import]",()=>{this.query('input[type="file"]').click()}),this.delegate("click","[data-reset]",()=>{window.confirm("Are you sure? This will delete all text entered in the Notes panel of Backstage, and cannot be undone.")&&cs()})}connectedCallback(){this.defaultHtml(`
			<label for="backstage-notes-textarea"></label>
				<textarea id="backstage-notes-textarea"></textarea>
				<div class="actions">
					<button data-export>Export All Notes</button>
					<button data-import>Import Notes</button>
					<button data-reset>Delete All Notes</button>
				</div>
				<input type="file" hidden />
		`),window.addEventListener("state-change",this),this.update()}disconnectedCallback(){window.removeEventListener("state-change",this)}handleEvent(e){e.detail.name==="trail"&&this.update()}update(){const e=It();e&&(this.query("#backstage-notes-textarea").value=ds(e)??"",this.query('label[for="backstage-notes-textarea"]').textContent=`Notes on "${e}"`)}}class bs extends z{constructor(){super(),this.delegate("click","[data-add-snapshot]",()=>{const e=window.prompt("Enter a name for this snapshot:");e&&(Ot().includes(e)?window.alert("A snapshot already exists with this name."):ns(e))}),this.delegate("click","[data-remove]",({target:e})=>{const t=e.dataset.remove;t&&window.confirm(`Are you sure you want to delete the snapshot "${t}"? This cannot be undone.`)&&rs(t)}),this.delegate("click","[data-restore]",({target:e})=>{is(e.dataset.restore)})}connectedCallback(){this.defaultHtml(`
			<details open>
				<summary>Snapshots</summary>
				<div class="snapshots"></div>
				<button data-add-snapshot>Add Snapshot</button>
			</details>
		`),window.addEventListener("backstage-state-snapshots-update",this),this.update()}disconnectedCallback(){window.removeEventListener("backstage-state-snapshots-update",this)}handleEvent(){this.update()}update(){const e=this.querySelector(".snapshots");e&&(e.innerHTML=Ot().map(t=>{const i=q(t);return`
					<div class="snapshot-button">
						<button data-restore="${i}" aria-label="Restore '${i}' snapshot">
							${i}
						</button>
						<button data-remove="${i}" aria-label="Remove '${i}' snapshot">
							&times;
						</button>
					</div class="snapshot-button">
				`}).join(""))}}const ys=["config.random.privateState"];class ws extends z{constructor(){super();U(this,"showDefaults",!1);this.delegate("change",'input[type="checkbox"]',t=>{this.showDefaults=t.target.checked,this.update()})}connectedCallback(){this.defaultHtml(`
			<details open>
				<summary>Variables</summary>
				<label>
					<input type="checkbox" />
					Show Defaults
				</label>
				<div class="variables"></div>
			</details>
		`),this.update(),window.addEventListener("state-change",this)}disconnectedCallback(){window.removeEventListener("state-change",this)}handleEvent(){this.update()}update(){this.query(".variables").innerHTML=He(this.showDefaults).filter(t=>!ys.some(i=>t.startsWith(i))).map(t=>`<div><label><span>${q(t)}</span><backstage-variable-input name="${q(t)}"></backstage-variable-input></label></div>`).join("")}}const ks=["config.style.page.theme.override"];class xs extends z{connectedCallback(){this.defaultHtml(`
			<details open>
				<summary>Config</summary>
				<label for="cb-backstage-style-config">
					Enter this code into your first passage&rsquo;s variables section to
					permanently use this style:
				</label>
				<textarea
					readonly
					id="cb-backstage-style-config"
				></textarea>
			</details>
		`),window.addEventListener("state-change",this),this.update()}disconnectedCallback(){window.removeEventListener("state-change",this)}handleEvent(){this.update()}update(){this.query("textarea").value=He(!1).reduce((e,t)=>!/^config.style/.test(t)||ks.includes(t)||p(t)===void 0?e:e+`${t}: ${JSON.stringify(p(t))}
`,"").trim()}}const vs=[{name:"Font",suffix:"font"},{name:"Color",suffix:"color"},{name:"Link Font",suffix:"link.font"},{name:"Link Color",suffix:"link.color"},{name:"Link Line Color",suffix:"link.lineColor"},{name:"Active Link Font",suffix:"link.active.font"},{name:"Active Link Color",suffix:"link.active.color"},{name:"Active Link Line Color",suffix:"link.active.lineColor"}];class En extends z{connectedCallback(){const e=this.getAttribute("prefix"),t=this.getAttribute("title");this.defaultHtml(`
			<details open>
				<summary>${t}</summary>
				${vs.map(({name:i,suffix:r})=>`
						<label data-prefix="%.${r}">
							${i}
							<backstage-variable-input name="${e}.${r}" string />
						</label>
					`).join("")}
			</details>
		`),window.addEventListener("state-change",this),window.addEventListener("system-theme-change",this),this.updateInputs()}updateInputs(){var r;const e=this.getAttribute("prefix")??"",t=p("browser.darkTheme");let i="config.style.";t&&(i+="dark.");for(const s of this.queryAll("backstage-variable-input")){const a=(r=s.closest("[data-prefix]"))==null?void 0:r.dataset.prefix;if(a&&(s.setAttribute("name",i+a.replace("%",e)),s.removeAttribute("placeholder"),t)){const l=p(`config.style.${a.replace("%",e)}`);typeof l=="string"&&s.setAttribute("placeholder",l)}}}attributeChangedCallback(e,t,i){if(this.innerHTML!=="")switch(e){case"title":this.query("summary").innerText=i;break;case"prefix":this.updateInputs();break}}handleEvent(e){(e.type==="system-theme-change"||e.detail.name==="config.style.page.theme.override")&&this.updateInputs()}}U(En,"observedAttributes",["prefix","title"]);class $s extends z{connectedCallback(){this.defaultHtml(`
      <details open>
      <summary>Theme</summary>
      <p>The <strong data-theme-name></strong> theme is active. <button>Switch Theme</button></p>
      <p>
      <label><input type="checkbox"> Theme switching</label>
      </p>
      </details>
    `),this.update(),this.query("button").addEventListener("click",()=>this.switchTheme()),this.query("input").addEventListener("change",()=>this.toggleThemeSwitching()),window.addEventListener("system-theme-change",this),window.addEventListener("state-change",this),this.update()}disconnectedCallback(){window.removeEventListener("system-theme-change",this)}handleEvent(e){(e.type==="system-theme-change"||["config.style.page.theme.override","config.style.page.theme.enableSwitching"].includes(e.detail.name))&&this.update()}switchTheme(){$("config.style.page.theme.override",p("browser.darkTheme")?"light":"dark")}toggleThemeSwitching(){$("config.style.page.theme.enableSwitching",!p("config.style.page.theme.enableSwitching")),this.update()}update(){const e=!!p("config.style.page.theme.enableSwitching");this.query("input").checked=e,this.query("button").disabled=!e,this.query("[data-theme-name]").innerHTML=p("browser.darkTheme")?"dark":"light"}}class Ss extends z{constructor(){super(),this.addEventListener("click",()=>{var e;this.textContent&&((e=this.closest("backstage-tabs"))==null||e.selectTab(this.textContent))})}connectedCallback(){this.setAttribute("role","tab")}}class Es extends z{connectedCallback(){this.setAttribute("role","tabpanel")}}class _s extends z{connectedCallback(){this.setAttribute("role","tablist"),window.setTimeout(()=>this.selectTab(0))}selectTab(e){[...this.children].filter(t=>t.getAttribute("role")==="tab").forEach((t,i)=>{var a,l;const r=t.getAttribute("aria-controls"),s=typeof e=="number"?i==e:t.textContent===e;t.setAttribute("aria-selected",s.toString()),r&&(s?(a=document.getElementById(r))==null||a.removeAttribute("hidden"):(l=document.getElementById(r))==null||l.setAttribute("hidden",""))})}}class _n extends z{constructor(){super(),this.addEventListener("input",e=>{const t=this.getAttribute("name");if(!t||!e.target)return;const i=e.target.value;try{this.hasAttribute("string")?$(t,i):$(t,JSON.parse(i))}catch{}})}attributeChangedCallback(){const e=this.getAttribute("name");if(!e)return;const t=p(e);let i=JSON.stringify(t);this.hasAttribute("string")&&(t==null?i="":i=t.toString()),this.innerHTML=`<input type="text" placeholder="${this.getAttribute("placeholder")??""}" value="${q(i)}" />`}}U(_n,"observedAttributes",["name","placeholder","string"]);function Cs(){wt({"backstage-history-table":ls,"backstage-notes":ms,"backstage-sidebar":Sn,"backstage-state-snapshots":bs,"backstage-state-variables":ws,"backstage-style-config":xs,"backstage-style-group":En,"backstage-style-theme":$s,"backstage-tab":Ss,"backstage-tab-panel":Es,"backstage-tabs":_s,"backstage-variable-input":_n})}function Ts(){gs(),ts(),os(),Cs(),document.body.appendChild(document.createElement("backstage-sidebar"))}var se=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function As(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var t=function i(){if(this instanceof i){var r=[null];r.push.apply(r,arguments);var s=Function.bind.apply(e,r);return new s}return e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(i){var r=Object.getOwnPropertyDescriptor(n,i);Object.defineProperty(t,i,r.get?r:{enumerable:!0,get:function(){return n[i]}})}),t}var ve=zs;const Ls={hoursPerDay:24,daysPerWeek:7,weeksPerMonth:4,monthsPerYear:12,daysPerYear:365.25},Mt={ms:["ms","milli","millisecond","milliseconds"],s:["s","sec","secs","second","seconds"],m:["m","min","mins","minute","minutes"],h:["h","hr","hrs","hour","hours"],d:["d","day","days"],w:["w","week","weeks"],mth:["mon","mth","mths","month","months"],y:["y","yr","yrs","year","years"]};function zs(n,e,t){t=Object.assign({},Ls,t||{});let i=0,r=Ps(t),s=n.toLowerCase().replace(/[^.\w+-]+/g,"").match(/[-+]?[0-9.]+[a-z]+/g);if(s===null)throw new Error(`The string [${n}] could not be parsed by timestring`);return s.forEach(a=>{let l=a.match(/[0-9.]+/g)[0],o=a.match(/[a-z]+/g)[0];i+=Os(l,o,r)}),e?Is(i,e,r):i}function Ps(n){let e={ms:.001,s:1,m:60,h:3600};return e.d=n.hoursPerDay*e.h,e.w=n.daysPerWeek*e.d,e.mth=n.daysPerYear/n.monthsPerYear*e.d,e.y=n.daysPerYear*e.d,e}function Cn(n){for(let e of Object.keys(Mt))if(Mt[e].indexOf(n)>-1)return e;throw new Error(`The unit [${n}] is not supported by timestring`)}function Os(n,e,t){return n*t[Cn(e)]}function Is(n,e,t){return n/t[Cn(e)]}function xt(n,e){return new Promise(t=>{n.innerHTML=e,t()})}function Ms(n,e,t){const i=ve(t,"s")/2;return i===0?xt(n,e):new Promise(r=>{const s=n.style.animationDuration,a=n.style.pointerEvents,l=n.style.visibility;n.style.pointerEvents="none";function o(){n.removeEventListener("animationend",o),n.classList.remove("fade-in"),n.style.animationDuration=s,n.style.pointerEvents=a,r()}n.innerHTML.trim()!==""?(n.style.animationDuration=`${i}s`,n.addEventListener("animationend",async function u(){n.removeEventListener("animationend",u),n.classList.remove("fade-out"),n.style.visibility="hidden",window.setTimeout(()=>{n.addEventListener("animationend",o),n.innerHTML=e,n.style.visibility=l,n.classList.add("fade-in")},0)}),n.classList.add("fade-out")):(n.innerHTML=e,n.style.animationDuration=`${i*2}s`,n.classList.add("fade-in"),n.addEventListener("animationend",o))})}function Ns(n,e,t){const i=ve(t,"s");return i===0?xt(n,e):new Promise((r,s)=>{const a=n.style.animationDuration,l=n.style.pointerEvents;if(n.innerHTML.trim()!==""){if(!n.parentNode){s(new Error("This element must have a parent element."));return}const o=n.cloneNode(!0);n.parentNode.appendChild(o),o.setAttribute("aria-hidden",""),o.classList.add("fade-out"),o.style.animationDuration=`${i}s`,o.addEventListener("animationend",()=>o.remove())}n.innerHTML=e,n.classList.add("fade-in"),n.style.animationDuration=`${i}s`,n.style.pointerEvents="none",n.addEventListener("animationend",function o(){n.removeEventListener("animationend",o),n.style.animationDuration=a,n.style.pointerEvents=l,n.classList.remove("fade-in"),r()})})}function Rs(n){return typeof n=="string"&&["crossfade","fadeInOut","none"].includes(n)}function Tn(n,e,t,i){const r=typeof i=="string"?i:"0s";switch(Rs(t)?t:"none"){case"crossfade":return Ns(n,e,r);case"fadeInOut":return Ms(n,e,r);case"none":return xt(n,e)}}class An extends z{allChildInputsValid(){let e=!0;for(const t of this.querySelectorAll("input, select"))e=e&&t.reportValidity();return e}moveContentsOffscreen(){const e=this.innerHTML,t=document.createElement("div");for(;this.firstChild;)t.appendChild(this.firstChild);return this.innerHTML=e,t}}class Ds extends An{connectedCallback(){window.addEventListener("display-change",this)}disconnectedCallback(){window.removeEventListener("display-change",this)}async changeContent(e){const t=super.moveContentsOffscreen();await e(t),await Tn(this,t.innerHTML,p("config.body.transition.name"),p("config.body.transition.duration")),this.dispatchEvent(new CustomEvent("body-content-change",{bubbles:!0}))}handleEvent({detail:e}){this.changeContent(t=>{t.innerHTML=e.body})}}class js extends z{constructor(){super(),this.delegate("click","[data-back]",()=>{const e=p("trail");this.classList.remove("active"),Array.isArray(e)?$("trail",e.slice(0,e.length-1)):window.alert("Sorry, going back was not successful. Please try hard restarting.")}),this.delegate("click","[data-refresh]",()=>{var t;const e=p("trail");this.classList.remove("active"),Array.isArray(e)?$("trail",[...e]):$("trail",[(t=pt())==null?void 0:t.name])}),this.delegate("click","[data-hard-restart]",()=>{wn(!0),window.location.reload()})}connectedCallback(){window.addEventListener("error",this),window.addEventListener("unhandledrejection",this)}disconnectedCallback(){window.removeEventListener("error",this),window.removeEventListener("unhandledrejection",this)}handleEvent(e){const t=`
Please report this to https://github.com/markedjs/marked.`,i=e.type==="unhandledrejection"?e.reason:e.error;try{let r="";i!=null&&i.stack?r=`${i.message}

Stack trace:
${i.stack}`:r=`${i.message}

[No stack trace available]`,r=r.replace(t,"");const s=p("trail");this.classList.add("active"),this.innerHTML=`
			<p>
			An unexpected error has occurred.
			</p>
			<pre>${p("config.testing")?r:""}</pre>
			<ul>
				<li>
					<inline-button class="link" ${Array.isArray(s)&&s.length>1?"data-back":"data-refresh"}>Go back</inline-button> to the previous passage.
				</li>
				<li>
					<inline-button class="link" data-hard-restart>Hard restart</inline-button>, clearing all progress and beginning from the start.
				</li>
			</ul>
		`}catch(r){console.error(r)}}}const{log:Ce}=F("display");class Hs extends z{connectedCallback(){window.addEventListener("state-change",this),this.defaultHtml("<div data-google></div><div data-typekit></div>")}disconnectedCallback(){window.removeEventListener("state-change",this)}handleEvent({detail:e}){if(["config","config.style","config.style.fonts"].includes(e.name)){const r=p("config.style.fonts");if(!r)return;for(const s in r){const a=r[s].name,l=r[s].url;typeof a=="string"&&typeof l=="string"&&this.loadUrlFont(s,l,a)}return}const i=e.name.match(/^config\.style\.fonts\.([^.]+)/i);if(i){const r=i[1],s=p(`config.style.fonts.${r}.name`),a=p(`config.style.fonts.${r}.url`);typeof a=="string"&&typeof s=="string"&&(Ce(`Adding font from URL (${s})`),this.loadUrlFont(r,a,s));return}e.name==="config.style.googleFont"&&typeof e.value=="string"?this.loadGoogleFont(e.value):e.name==="config.style.typekitFont"&&typeof e.value=="string"&&this.loadTypekitFont(e.value)}loadGoogleFont(e){Ce("Adding Google font"),this.query("[data-google]").innerHTML=e}loadTypekitFont(e){Ce("Adding Typekit font"),this.query("[data-typekit]").innerHTML=e}loadUrlFont(e,t,i){Ce("Adding font from URL");const r=t.match(/\.(.+)$/);if(!r||!r[1])return;const s=r[1],a=this.querySelector(`[data-url-${e}]`)??document.createElement("style");a.setAttribute(`data-url-${e}`,""),a.innerHTML=`@font-face { font-family: "${i}"; src: url("${t}") format("${s}"); }`,a.parentNode||this.appendChild(a)}}class qs extends An{get validatedType(){const e=this.getAttribute("type")??"";if(!["footer","header"].includes(e))throw new Error(`Don't know how to update marginal content with type "${e}".`);return e}connectedCallback(){window.addEventListener("display-change",this)}disconnectedCallback(){window.removeEventListener("display-change",this)}async changeContent(e){const t=super.moveContentsOffscreen();await e(t);let i=!1;for(const r of["left","center","right"]){const s=t.querySelector(`.${r}`);if((s==null?void 0:s.innerHTML.trim())!==""){i=!0;break}}if(i)return this.removeAttribute("hidden"),Tn(this,t.innerHTML,p(`config.${this.validatedType}.transition.name`),p(`config.${this.validatedType}.transition.duration`));this.setAttribute("hidden","")}handleEvent({detail:e}){this.changeContent(t=>{t.innerHTML=["left","center","right"].reduce((i,r)=>i+`<div class="${r}">${e[this.validatedType][r]}</div>`,"")})}}class Fs extends HTMLElement{constructor(){super(),this.addEventListener("body-content-change",this)}handleEvent({target:e}){if(!e)return;const t=[...e.querySelectorAll("[skippable-delay]")].map(l=>{const o={delay:0,el:l};try{o.delay=parseInt(l.getAttribute("skippable-delay")??"0")}catch{}return o}).filter(({delay:l})=>!!l).sort((l,o)=>l.delay-o.delay);if(t.length===0)return;let i=Date.now(),r;const s=()=>{var u;const l=Date.now()-i,o=(u=t.find(({delay:c})=>c>l))==null?void 0:u.delay;if(!o){this.dispatchEvent(new CustomEvent("page-skip-indicator-hide"));return}for(const c of t)c.delay<=0||(c.delay<=o?(c.delay=0,c.el.setAttribute("skippable-delay","0")):(c.delay-=o,c.el.setAttribute("skippable-delay",c.delay.toString())));i=Date.now(),window.clearTimeout(r),a()},a=()=>{r&&window.clearTimeout(r),r=window.setTimeout(()=>{window.removeEventListener("click",s),window.removeEventListener("keyup",s),this.dispatchEvent(new CustomEvent("page-skip-indicator-hide"))},t[t.length-1].delay)};window.addEventListener("click",s),window.addEventListener("keyup",s),a(),this.dispatchEvent(new CustomEvent("page-skip-indicator-show"))}}class Bs extends z{connectedCallback(){var e,t;(e=this.closest("page-skip"))==null||e.addEventListener("page-skip-indicator-hide",this),(t=this.closest("page-skip"))==null||t.addEventListener("page-skip-indicator-show",this)}disconnectedCallback(){var e,t;(e=this.closest("page-skip"))==null||e.removeEventListener("page-skip-indicator-hide",this),(t=this.closest("page-skip"))==null||t.removeEventListener("page-skip-indicator-show",this)}handleEvent(e){switch(e.type){case"page-skip-indicator-hide":this.removeAttribute("active");break;case"page-skip-indicator-show":this.setAttribute("active","");break}}}const Nt=["gray","red","pink","grape","violet","indigo","blue","cyan","teal","green","lime","yellow","orange"].map(n=>`oc-${n}`),Us=["gray","rose","raspberry","red","orange","cinnamon","amber","yellow","lime","chartreuse","green","emerald","aquamarine","teal","cyan","powder","sky","cerulean","azure","blue","indigo","violet","purple","magenta","pink"];function Rt(n){if(typeof n!="string")throw new Error("Only strings can be parsed as color values.");if(Nt.includes(n))return`var(--${n}-9)`;const e=/^(oc-\w+)-\d$/.exec(n);if(e&&Nt.includes(e[1]))return`var(--${n})`;const t=/^(\w+)-([1-6])$/.exec(n);return t&&Us.includes(t[1])?`var(--color-${n})`:n}function me(n){const e={backgroundColor:"inherit",color:"inherit"};if(n===void 0)return e;if(typeof n!="string")throw new Error("Only strings can be parsed as colors.");const t=n.split(/ on /i);return e.color=Rt(t[0].trim().toLowerCase()),e.color===""&&(e.color="inherit"),t.length===2&&(e.backgroundColor=Rt(t[1].trim().toLowerCase())),e}function Vs(n,{scaling:e}){const t={fontFamily:"inherit",fontSize:"inherit",fontStyle:"inherit",fontVariant:"inherit",fontWeight:"inherit",textDecoration:"inherit",textTransform:"inherit"};if(n===void 0)return t;if(typeof n!="string")throw new Error("Only strings can be parsed as fonts.");function i(c,d){c.fontFamily=d.split("/").map(f=>{let h=f;return["monospace","sans-serif","serif"].includes(h)||(h[0]!=='"'&&(h='"'+h),h[h.length-1]!=='"'&&(h=h+'"')),h}).join(",")}function r(c){c.fontWeight="bold"}function s(c){c.fontStyle="italic"}function a(c){c.fontStyle="none",c.fontWeight="normal",c.textDecoration="none",c.textTransform="none"}function l(c){c.fontVariant="small-caps",c.textTransform="lowercase"}function o(c){c.textDecoration="underline"}const u=/\b\d+(?:\.\d+)?(ch|cm|ex|in|mm|pc|pt|px|r?em|vh|vmax|vmin|vw|%)?/i.exec(n);if(u){t.fontSize=u[0],/^\d+$/.test(u[0])&&(t.fontSize=`${u[0]}px`),e&&(t.fontSize=`calc(${t.fontSize} + max(${e.addAtDoubleWidth} * (100vw - ${e.baseViewportWidth}px) / ${e.baseViewportWidth}, 0px))`,e.maximumSize&&(t.fontSize=`min(${t.fontSize}, ${e.maximumSize})`)),u.index!==0&&i(t,n.substring(0,u.index).trim());const c=n.substring(u.index);/\bregular\b/i.test(c)?a(t):(/\bbold\b/.test(c)&&r(t),/\bitalics?\b/.test(c)&&s(t),/\bunderlined?/.test(c)&&o(t),/\bsmall caps?\b/.test(c)&&l(t))}else{let c,d=n;for(;c=/(bold|italics?|regular|small caps|underlined?)$/.exec(d);){switch(c[0]){case"bold":r(t);break;case"italic":case"italics":s(t);break;case"regular":a(t);break;case"small caps":l(t);break;case"underline":case"underlined":o(t);break}d=d.substring(0,c.index).trim()}d.trim()!==""&&i(t,d)}return t}const Ws={"config.style.dark.backdrop":"hsl(0, 0%, 10%)","config.style.dark.page.footer.border":"thin-line","config.style.dark.page.footer.borderColor":"white","config.style.dark.page.footer.link.active.color":"raspberry-3 on raspberry-6","config.style.dark.page.fork.divider.color":"gray-5","config.style.dark.page.color":"white on gray-6","config.style.dark.page.header.border":"thin-line","config.style.dark.page.header.borderColor":"white","config.style.dark.page.header.link.active.color":"raspberry-3 on raspberry-6","config.style.dark.page.link.color":"white","config.style.dark.page.link.lineColor":"raspberry-4","config.style.dark.page.link.active.color":"raspberry-3 on raspberry-6","config.style.backdrop":"gray-1","config.style.fontScaling.enabled":!0,"config.style.fontScaling.baseViewportWidth":1e3,"config.style.fontScaling.addAtDoubleWidth":6,"config.style.page.style.border":"shadow","config.style.page.style.borderColor":"gray-2","config.style.page.font":"Iowan Old Style/Constantia/Georgia/serif 18","config.style.page.color":"gray-6 on white","config.style.page.fork.divider.color":"gray-2","config.style.page.fork.divider.style":"dashed","config.style.page.fork.divider.size":1,"config.style.page.link.color":"gray-6","config.style.page.link.lineColor":"raspberry-4","config.style.page.link.font":"underline","config.style.page.link.active.color":"raspberry-4 on raspberry-1","config.style.page.verticalAlign":"center","config.style.page.header.border":"thin-line","config.style.page.header.borderColor":"gray-6","config.style.page.header.font":"16","config.style.page.header.link.font":"small caps underlined","config.style.page.header.link.lineColor":"raspberry-4","config.style.page.header.link.active.color":"raspberry-4 on raspberry-1","config.style.page.header.link.active.font":"small caps underlined","config.style.page.header.link.active.lineColor":"raspberry-4","config.style.page.footer.border":"thin-line","config.style.page.footer.borderColor":"gray-6","config.style.page.footer.font":"16","config.style.page.footer.link.font":"small caps underlined","config.style.page.footer.link.lineColor":"raspberry-4","config.style.page.footer.link.active.color":"raspberry-4 on raspberry-1","config.style.page.footer.link.active.font":"small caps underlined","config.style.page.footer.link.active.lineColor":"raspberry-4","config.style.page.theme.override":void 0,"config.style.page.theme.enableSwitching":!0};function Zs(){re(Ws)}class Gs extends z{connectedCallback(){window.addEventListener("state-change",this)}disconnectedCallback(){window.removeEventListener("state-change",this)}handleEvent(e){const{name:t,value:i}=e.detail;if(!t.startsWith("config.style."))return;const r=`--${t.replace(/^config\.style\./,"").replace(/\./g,"-")}`;if(typeof i=="string"&&r.endsWith("-color")){this.updateColor(r.replace(/-color$/,""),i);return}if(typeof i=="string"&&r.endsWith("-lineColor")){this.updateLineColor(r.replace(/-lineColor$/,""),i);return}if(typeof i=="string"&&r.endsWith("-font")){this.updateFont(r.replace(/-font$/,""),i);return}switch(r){case"--backdrop":case"--dark-backdrop":{const{color:s}=me(i);this.style.setProperty(`${r}-color`,s);break}case"--fontScaling-enabled":case"--fontScaling-baseViewportWidth":case"--fontScaling-addAtDoubleWidth":case"--fontScaling-maximumSize":this.recalculateFontSizes();break;case"--page-fork-divider-size":case"--dark-page-fork-divider-size":(typeof i=="string"||typeof i=="number")&&this.style.setProperty(r,`${i}px`);break;case"--page-fork-divider-style":case"--dark-page-fork-divider-style":typeof i=="string"&&this.style.setProperty(r,i);break;case"--page-verticalAlign":case"--dark-page-verticalAlign":{if(typeof i!="string")break;const s=r.replace(/-verticalAlign$/,"");switch(i){case"top":this.style.setProperty(`${s}-current-passage-justify-content`,"flex-start");break;case"center":this.style.setProperty(`${s}-current-passage-justify-content`,"center");break;case"bottom":this.style.setProperty(`${s}-current-passage-justify-content`,"flex-end");break}break}case"--page-footer-border":case"--page-footer-borderColor":case"--page-header-border":case"--page-header-borderColor":case"--dark-page-footer-border":case"--dark-page-footer-borderColor":case"--dark-page-header-border":case"--dark-page-header-borderColor":case"--page-style-border":case"--dark-page-style-border":case"--page-style-borderColor":case"--dark-page-style-borderColor":{const s=r.replace(/-style-[^-]*?$/,"").replace(/-border(Color)?$/,""),a=t.replace(/\.[^.]*?$/,""),l=p(`${a}.border`),o=p(`${a}.borderColor`);switch(l){case"none":this.style.setProperty(`${s}-border`,"none"),this.style.setProperty(`${s}-box-shadow`,"none");break;case"shadow":this.style.setProperty(`${s}-border`,"none"),this.style.setProperty(`${s}-box-shadow`,"inset 0 0 2px 2px hsla(0, 0%, 100%, 0.05), 0 0 0 1px hsla(0, 0%, 0%, 0.05), 0 2px 2px hsla(0, 0%, 0%, 0.05), 0 4px 4px hsla(0, 0%, 0%, 0.05), 0 8px 8px hsla(0, 0%, 0%, 0.05), 0 16px 16px hsla(0, 0%, 0%, 0.05)");break;case"thick-line":this.style.setProperty(`${s}-border`,`4px solid ${me(o).color}`),this.style.setProperty(`${s}-box-shadow`,"none");break;case"thin-line":this.style.setProperty(`${s}-border`,`1px solid ${me(o).color}`),this.style.setProperty(`${s}-box-shadow`,"none");break}}}}recalculateFontSizes(){for(const e of He(!0)){const t=/^config\.style\.(.*)\.font$/.exec(e);if(t){const i=p(e);typeof i=="string"&&this.updateFont(`--${t[1].replace(/\./g,"-")}`,i)}}}updateColor(e,t){const{backgroundColor:i,color:r}=me(t);this.style.setProperty(`${e}-background-color`,i),this.style.setProperty(`${e}-color`,r)}updateFont(e,t){const i=p("config.style.fontScaling.enabled"),r={};if(i){const a=p("config.style.fontScaling.baseViewportWidth"),l=p("config.style.fontScaling.addAtDoubleWidth"),o=p("config.style.fontScaling.maximumSize");typeof a=="number"&&typeof l=="number"&&(r.scaling={baseViewportWidth:a,addAtDoubleWidth:l},typeof o=="string"&&(r.scaling.maximumSize=o))}const s=Vs(t,r);this.style.setProperty(`${e}-font-family`,s.fontFamily),this.style.setProperty(`${e}-font-size`,s.fontSize),this.style.setProperty(`${e}-font-style`,s.fontStyle),this.style.setProperty(`${e}-font-variant`,s.fontVariant),this.style.setProperty(`${e}-font-weight`,s.fontWeight),this.style.setProperty(`${e}-text-decoration`,s.textDecoration),this.style.setProperty(`${e}-text-transform`,s.textTransform)}updateLineColor(e,t){const{color:i}=me(t);this.style.setProperty(`${e}-text-decoration-color`,i)}}class Js extends z{connectedCallback(){window.addEventListener("state-change",this),window.addEventListener("system-theme-change",this),Promise.resolve().then(()=>this.update())}disconnectedCallback(){window.removeEventListener("state-change",this),window.removeEventListener("system-theme-change",this)}update(){p("browser.darkTheme")?this.enable():this.disable()}disable(){this.style.cssText=""}enable(){const e=this.closest("state-css-variables");if(e){this.style.cssText="";for(let t=0;t<e.style.length;t++){const i=/^--dark-(.*)/.exec(e.style.item(t));i!=null&&i[1]&&this.style.setProperty(`--${i[1]}`,`var(--dark-${i[1]})`)}}}handleEvent(e){if(e.type==="system-theme-change")this.update();else{const{name:t}=e.detail;(["config.style.page.theme.enableSwitching","config.style.page.theme.override"].includes(t)||t.startsWith("config.style.dark"))&&this.update()}}}var J;class Xs extends z{constructor(){super();U(this,"warnings");_t(this,J,void 0);this.warnings=[]}connectedCallback(){window.addEventListener("state-change",this),this.spyOnWarnings(),this.update()}disconnectedCallback(){window.removeEventListener("state-change",this),this.unspyOnWarnings()}handleEvent(t){t.type==="state-change"&&t.detail.name==="trail"&&(this.warnings=[],this.update())}spyOnWarnings(){Ct(this,J,console.warn),console.warn=(...t)=>{this.warnings.push(...t),this.update(),pe(this,J).apply(pe(this,J),t)}}unspyOnWarnings(){pe(this,J)&&(console.warn=pe(this,J))}update(){this.isConnected&&(this.warnings.length>0&&p("config.testing")?(this.removeAttribute("hidden"),this.innerHTML=`<ul>${this.warnings.map(t=>`<li>Warning: ${t}</li>`).join("")}</ul>`):this.setAttribute("hidden",""))}}J=new WeakMap;function Qs(){wt({"body-content":Ds,"error-handler":js,"external-fonts":Hs,"marginal-content":qs,"page-skip":Fs,"page-skip-indicator":Bs,"state-css-variables":Gs,"state-dark-theme-css-overrides":Js,"warning-list":Xs})}class fe extends z{constructor(){super(),this.addEventListener("keydown",e=>{(e.key===" "||e.key==="Enter")&&(e.preventDefault(),this.dispatchEvent(new MouseEvent("click",{bubbles:!0})))})}connectedCallback(){this.setAttribute("tabindex","0"),this.hasAttribute("role")||this.setAttribute("role","button")}}const{warn:Dt}=F("inserts");class Ks extends fe{constructor(){super(),this.addEventListener("click",()=>{const e=this.getAttribute("choices");if(e){let t;try{t=JSON.parse(e)}catch{Dt(`The choices attribute, "${e}" couldn't be parsed.`);return}if(!Array.isArray(t)){Dt("The choices attribute of this cycling link doesn't deserialize to an array.");return}let i=t.map(a=>typeof a=="string"?a:a.toString()).indexOf((this.textContent??"").trim())+1;i===t.length&&(i=0);const r=this.closest("body-content, marginal-content");if(!r)throw new Error("Couldn't find suitable parent element to do a cycle link transition on.");r.changeContent(()=>{this.textContent=t[i].toString()});const s=this.getAttribute("set");s&&$(s,t[i])}})}}class Ys extends fe{constructor(){super(),this.addEventListener("click",()=>{const e=this.getAttribute("to"),t=this.closest("body-content, marginal-content");t&&!t.allChildInputsValid()||e&&xn(e)})}connectedCallback(){this.setAttribute("role","link")}}class eo extends fe{constructor(){super(),this.addEventListener("click",vn)}}const to={match:/^(no )?ambient\s+sound/i,render(n,{volume:e}){const t=p("sound.ambient");if(t)for(const r in t)r!==n&&t[r].playing&&$(`sound.ambient.${r}.playing`,!1);if(!n)return;const i=p(`sound.ambient.${n}.description`)??"";return e&&$(`sound.ambient.${n}.volume`,e),$(`sound.ambient.${n}.playing`,!0),`<audio>${i}</audio>`}};function vt(n,e){return/^\w+:\/\/\/?\w/i.test(n)?N("a",{class:"link",href:n},[e??n]):N("passage-link",{class:"link",to:n},[e??n])}function no(n){return n.replace(/\[\[(.*?)\]\]/g,(e,t)=>{let i=t;const r=t.indexOf("|");if(r!==-1)i=t.substring(0,r),t=t.substring(r+1);else{const s=t.indexOf("->");if(s!==-1)i=t.substring(0,s),t=t.substring(s+2);else{const a=t.indexOf("<-");a!==-1&&(i=t.substring(a+2),t=t.substring(0,a))}}return i===""||t===""?e:vt(t,i??t)})}const io={match:/^back\s+link/i,render(n,e){const t=p("trail");if(!(!Array.isArray(t)||t.length===0))return vt(t.length>1?t[t.length-2]:t[0],e.label??"Back")}},ro={match:/^cycling\s+link(\s+for)?/i,render(n,{choices:e}){let t="";if(n){const i=p(n);i===void 0?($(n,e[0]),t=e[0].toString()):t=i.toString()}else t=e[0].toString();return N("cycling-link",{class:"link",set:n??void 0,choices:JSON.stringify(e)},[t])}},so={match:/^dropdown menu(\s+for)?/i,render(n,e){let t;return n&&(t=p(n),t===void 0&&($(n,e.choices[0]),t=e.choices[0])),N("variable-binding",{name:n??void 0},[ke("select",{},e.choices.map(i=>{const r=i.toString(),s={"data-json-value":JSON.stringify(i)};return n&&t===i&&(s.selected=""),ke("option",s,[r])}))])}},oo={match:/^embed\s+flickr(\s+image)?/i,render(n,e){var t;if(n)return N("img",{...e,src:(t=/img src="(.+?)"/.exec(n))==null?void 0:t[1]})}},ao={match:/^embed\s+image/i,render(n,e){return N("img",{...e,src:n??""})}},lo={match:/^embed\s+passage(\s+named)?/i,render(n){if(!n)return"";const e=Se(n);return e?$e(e.source):""}},co={match:/^embed\s+unsplash(\s+image)?/i,render(n,e){if(n)return N("img",{...e,src:`https://source.unsplash.com/${n.replace(/.*\//,"")}/${e.width}x${e.height}`})}},uo={match:/^embed\s+youtube(\s+video)?/i,render(n,e){if(!n)return;let t=`https://www.youtube-nocookie.com/embed/${n.replace(/.*\?v=/,"")}?modestbranding=1&rel=0&controls=${e.controls?1:0}&`;return e.autoplay&&(t+="autoplay=1&"),e.loop&&(t+="loop=1&"),N("div",{style:"position: relative; height: 0; padding-bottom: 56.25%; margin-bottom: 1em"},[ke("iframe",{src:t,frameBorder:"0",style:"position: absolute; top: 0; left: 0; width: 100%; height: 100%"})])}},fo={match:/^link\s+to/i,render(n,{label:e}){if(n)return vt(n,e)}},ho={match:/^restart\s+link/i,render(n,{label:e}){return N("restart-link",{class:"link"},[e??"Restart"])}},po={match:/^reveal\s+link/i,render(n,e){if(n){if(e.text)return N("reveal-link",{class:"link",text:e.text},[n]);if(e.passage)return N("reveal-link",{class:"link",passage:e.passage},[n])}}},go={match:/^sound\s+effect/i,render(n,{volume:e}){const t=p(`sound.effect.${n}.description`)??"";return e&&$(`sound.effect.${n}.volume`,e),$(`sound.effect.${n}.playing`,!0),`<audio>${t}</audio>`}},mo={match:/^text\s+input(\s+for)?/i,render(n,e){return N("variable-binding",{name:n??void 0},[ke("input",{type:"text",value:n?(p(n)??"").toString():"",required:e.required!==!1?"":void 0})])}},bo={match:/^theme\s+switcher$/i,render(n,{darkLabel:e,lightLabel:t,prefix:i,suffix:r}){return N("theme-switcher",{prefix:i,suffix:r,class:"link","dark-label":e,"light-label":t},[])}},Ln=[to,io,ro,so,oo,ao,lo,co,uo,fo,ho,po,go,mo,bo];let ue=[...Ln];function zn(){return ue}function yo(n){ue=[...ue,n]}function wo(n){ue=ue.filter(e=>e!==n)}function ko(){ue=[...Ln]}const xo=Object.freeze(Object.defineProperty({__proto__:null,add:yo,all:zn,remove:wo,reset:ko},Symbol.toStringTag,{value:"Module"}));function Pn(n,e,t={}){const i=`<${e}`+Object.keys(t).reduce((s,a)=>`${s} ${a}="${t[a]}"`,"")+">";let r=i+n.replace(/[\r\n]{2,}/g,`</${e}>$&${i}`)+`</${e}>`;return r=r.replace(/(<span.*?>)\s*(#+)/gi,"$2 $1"),r}const vo={match:/^after\s/i,process(n,{invocation:e}){const t=ve(e.replace(/^after\s/i,""),"ms");n.text=Pn(n.text,"skippable-animation",{"skippable-delay":t.toString(),class:"fade-in"})}},$o={match:/^align\s+(left|right|center)/i,process(n,{invocation:e}){const t=e.replace(/^align\s+/i,"");n.text=Pn(n.text,"span",{style:`display: block; text-align: ${t}`})}},So={match:/^append$/i,process(n){n.startsNewParagraph=!1}},Eo={match:/^if(always|never)?\s|else$|unless\s/i,processRaw(n,{invocation:e,state:t}){const i=e.replace(/\s.*/,"").toLowerCase(),r=()=>new Function("return "+e.replace(/.*?\s/,"")).apply(window);switch(i){case"if":t.conditionEval=r();break;case"ifalways":t.conditionEval=!0;break;case"ifnever":t.conditionEval=!1;break;case"unless":t.conditionEval=!r();break;case"else":if(t.conditionEval===void 0)throw new Error("There was no matching if modifier for an else modifier.");t.conditionEval=!t.conditionEval;break}t.conditionEval||(n.text="")}},_o={match:/^continued?|cont('d)?$/i,process(){}},Co={match:/^css$/i,processRaw(n){n.text=`<style>${n.text}</style>`}},To={match:/^javascript$/i,processRaw(n){try{const e=new Function(`
						function write() { write.__out += write.__join.call(arguments, ''); }
						write.__out = '';
						write.__join = Array.prototype.join;
						${Fr(n.text)};
						return write.__out;
					`);n.text=e.apply(window)}catch(e){if(p("config.testing")){const t=e;let i="unknown error";t.stack?i=t.stack:i=t.message+`
[No stack trace available]`,n.text=`<div class="error">An error occurred evaluating:<pre>${n.text}</pre><p><pre>${i}</pre></p></div>`}else throw e}}},Ao={match:/^(note(\s+to\s+myself)?|n\.?b\.?|todo|fixme)$/i,process(n){n.text=""}},On=[vo,$o,So,Eo,_o,Co,To,Ao];let ne=[...On];function In(){return ne}function Lo(n){ne=[...ne,n]}function zo(n){ne=ne.filter(e=>e!==n)}function Po(){ne=[...On]}const Oo=Object.freeze(Object.defineProperty({__proto__:null,add:Lo,all:In,get modifiers(){return ne},remove:zo,reset:Po},Symbol.toStringTag,{value:"Module"})),{log:be,warn:Io}=F("parse"),Mo={varsSep:/^--$/m,modifierPattern:/^\[([^[].+[^\]])\]$/gm};function No(n,e=Mo){const t={vars:[],blocks:[]},i=n.split(e.varsSep,2);let r,s;i.length===2?(be("Detected vars section"),[r,s]=i,r.split(/\r?\n/).forEach(c=>{if(c.trim()==="")return;const d=c.indexOf(":");if(d!==-1){const f=c.substring(0,d).trim(),h=c.substring(d+1).trim(),m={name:f,value:new Function(`return (${h})`)},v=f.match(/\(.+\)/);if(v){if(!v.index)throw new Error(`A condition was found in "${f}", but no index was present in the regular expression match.`);m.condition=new Function(`return !!(${v[0]})`),m.name=m.name.substring(0,v.index).trim(),be(`Setting variable "${m.name}" to "${h}" with condition (${v[0]})`)}else be(`Setting variable "${f}" to "${h}" without condition`);t.vars.push(m)}else Io(`The line "${c}" in the vars section is missing a colon. It was ignored.`)})):(be("No vars section detected"),s=i[0]);function a(c,d){const f=d.trim();f!==""&&(be(`Creating '${c}' block with content: "${f}"`),t.blocks.push({type:c,content:f}))}const l=new RegExp(e.modifierPattern);let o=0,u=l.exec(s);for(;u;){a("text",s.substring(o,u.index));const c=u[1];let d="";for(let f=0;f<c.length;f++)switch(c[f]){case'"':for(d+='"',f=f+1;f<c.length&&(d+=c[f],!(c[f]==='"'&&c[f-1]!=="\\"));f++);break;case";":a("modifier",d),d="";break;default:d+=c[f]}a("modifier",d),o=l.lastIndex,u=l.exec(s)}return a("text",s.substring(o)),t}function Mn(){return{async:!1,baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,hooks:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}let oe=Mn();function Ro(n){oe=n}const Nn=/[&<>"']/,Do=new RegExp(Nn.source,"g"),Rn=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,jo=new RegExp(Rn.source,"g"),Ho={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},jt=n=>Ho[n];function I(n,e){if(e){if(Nn.test(n))return n.replace(Do,jt)}else if(Rn.test(n))return n.replace(jo,jt);return n}const qo=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function Dn(n){return n.replace(qo,(e,t)=>(t=t.toLowerCase(),t==="colon"?":":t.charAt(0)==="#"?t.charAt(1)==="x"?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):""))}const Fo=/(^|[^\[])\^/g;function E(n,e){n=typeof n=="string"?n:n.source,e=e||"";const t={replace:(i,r)=>(r=r.source||r,r=r.replace(Fo,"$1"),n=n.replace(i,r),t),getRegex:()=>new RegExp(n,e)};return t}const Bo=/[^\w:]/g,Uo=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function Ht(n,e,t){if(n){let i;try{i=decodeURIComponent(Dn(t)).replace(Bo,"").toLowerCase()}catch{return null}if(i.indexOf("javascript:")===0||i.indexOf("vbscript:")===0||i.indexOf("data:")===0)return null}e&&!Uo.test(t)&&(t=Go(e,t));try{t=encodeURI(t).replace(/%25/g,"%")}catch{return null}return t}const Te={},Vo=/^[^:]+:\/*[^/]*$/,Wo=/^([^:]+:)[\s\S]*$/,Zo=/^([^:]+:\/*[^/]*)[\s\S]*$/;function Go(n,e){Te[" "+n]||(Vo.test(n)?Te[" "+n]=n+"/":Te[" "+n]=ze(n,"/",!0)),n=Te[" "+n];const t=n.indexOf(":")===-1;return e.substring(0,2)==="//"?t?e:n.replace(Wo,"$1")+e:e.charAt(0)==="/"?t?e:n.replace(Zo,"$1")+e:n+e}const Ie={exec:function(){}};function qt(n,e){const t=n.replace(/\|/g,(s,a,l)=>{let o=!1,u=a;for(;--u>=0&&l[u]==="\\";)o=!o;return o?"|":" |"}),i=t.split(/ \|/);let r=0;if(i[0].trim()||i.shift(),i.length>0&&!i[i.length-1].trim()&&i.pop(),i.length>e)i.splice(e);else for(;i.length<e;)i.push("");for(;r<i.length;r++)i[r]=i[r].trim().replace(/\\\|/g,"|");return i}function ze(n,e,t){const i=n.length;if(i===0)return"";let r=0;for(;r<i;){const s=n.charAt(i-r-1);if(s===e&&!t)r++;else if(s!==e&&t)r++;else break}return n.slice(0,i-r)}function Jo(n,e){if(n.indexOf(e[1])===-1)return-1;const t=n.length;let i=0,r=0;for(;r<t;r++)if(n[r]==="\\")r++;else if(n[r]===e[0])i++;else if(n[r]===e[1]&&(i--,i<0))return r;return-1}function Xo(n){n&&n.sanitize&&!n.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}function Ft(n,e){if(e<1)return"";let t="";for(;e>1;)e&1&&(t+=n),e>>=1,n+=n;return t+n}function Bt(n,e,t,i){const r=e.href,s=e.title?I(e.title):null,a=n[1].replace(/\\([\[\]])/g,"$1");if(n[0].charAt(0)!=="!"){i.state.inLink=!0;const l={type:"link",raw:t,href:r,title:s,text:a,tokens:i.inlineTokens(a)};return i.state.inLink=!1,l}return{type:"image",raw:t,href:r,title:s,text:I(a)}}function Qo(n,e){const t=n.match(/^(\s+)(?:```)/);if(t===null)return e;const i=t[1];return e.split(`
`).map(r=>{const s=r.match(/^\s+/);if(s===null)return r;const[a]=s;return a.length>=i.length?r.slice(i.length):r}).join(`
`)}class $t{constructor(e){this.options=e||oe}space(e){const t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){const t=this.rules.block.code.exec(e);if(t){const i=t[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?i:ze(i,`
`)}}}fences(e){const t=this.rules.block.fences.exec(e);if(t){const i=t[0],r=Qo(i,t[3]||"");return{type:"code",raw:i,lang:t[2]?t[2].trim().replace(this.rules.inline._escapes,"$1"):t[2],text:r}}}heading(e){const t=this.rules.block.heading.exec(e);if(t){let i=t[2].trim();if(/#$/.test(i)){const r=ze(i,"#");(this.options.pedantic||!r||/ $/.test(r))&&(i=r.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:i,tokens:this.lexer.inline(i)}}}hr(e){const t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:t[0]}}blockquote(e){const t=this.rules.block.blockquote.exec(e);if(t){const i=t[0].replace(/^ *>[ \t]?/gm,""),r=this.lexer.state.top;this.lexer.state.top=!0;const s=this.lexer.blockTokens(i);return this.lexer.state.top=r,{type:"blockquote",raw:t[0],tokens:s,text:i}}}list(e){let t=this.rules.block.list.exec(e);if(t){let i,r,s,a,l,o,u,c,d,f,h,m,v=t[1].trim();const O=v.length>1,x={type:"list",raw:"",ordered:O,start:O?+v.slice(0,-1):"",loose:!1,items:[]};v=O?`\\d{1,9}\\${v.slice(-1)}`:`\\${v}`,this.options.pedantic&&(v=O?v:"[*+-]");const A=new RegExp(`^( {0,3}${v})((?:[	 ][^\\n]*)?(?:\\n|$))`);for(;e&&(m=!1,!(!(t=A.exec(e))||this.rules.block.hr.test(e)));){if(i=t[0],e=e.substring(i.length),c=t[2].split(`
`,1)[0].replace(/^\t+/,w=>" ".repeat(3*w.length)),d=e.split(`
`,1)[0],this.options.pedantic?(a=2,h=c.trimLeft()):(a=t[2].search(/[^ ]/),a=a>4?1:a,h=c.slice(a),a+=t[1].length),o=!1,!c&&/^ *$/.test(d)&&(i+=d+`
`,e=e.substring(d.length+1),m=!0),!m){const w=new RegExp(`^ {0,${Math.min(3,a-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),k=new RegExp(`^ {0,${Math.min(3,a-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),_=new RegExp(`^ {0,${Math.min(3,a-1)}}(?:\`\`\`|~~~)`),T=new RegExp(`^ {0,${Math.min(3,a-1)}}#`);for(;e&&(f=e.split(`
`,1)[0],d=f,this.options.pedantic&&(d=d.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),!(_.test(d)||T.test(d)||w.test(d)||k.test(e)));){if(d.search(/[^ ]/)>=a||!d.trim())h+=`
`+d.slice(a);else{if(o||c.search(/[^ ]/)>=4||_.test(c)||T.test(c)||k.test(c))break;h+=`
`+d}!o&&!d.trim()&&(o=!0),i+=f+`
`,e=e.substring(f.length+1),c=d.slice(a)}}x.loose||(u?x.loose=!0:/\n *\n *$/.test(i)&&(u=!0)),this.options.gfm&&(r=/^\[[ xX]\] /.exec(h),r&&(s=r[0]!=="[ ] ",h=h.replace(/^\[[ xX]\] +/,""))),x.items.push({type:"list_item",raw:i,task:!!r,checked:s,loose:!1,text:h}),x.raw+=i}x.items[x.items.length-1].raw=i.trimRight(),x.items[x.items.length-1].text=h.trimRight(),x.raw=x.raw.trimRight();const R=x.items.length;for(l=0;l<R;l++)if(this.lexer.state.top=!1,x.items[l].tokens=this.lexer.blockTokens(x.items[l].text,[]),!x.loose){const w=x.items[l].tokens.filter(_=>_.type==="space"),k=w.length>0&&w.some(_=>/\n.*\n/.test(_.raw));x.loose=k}if(x.loose)for(l=0;l<R;l++)x.items[l].loose=!0;return x}}html(e){const t=this.rules.block.html.exec(e);if(t){const i={type:"html",raw:t[0],pre:!this.options.sanitizer&&(t[1]==="pre"||t[1]==="script"||t[1]==="style"),text:t[0]};if(this.options.sanitize){const r=this.options.sanitizer?this.options.sanitizer(t[0]):I(t[0]);i.type="paragraph",i.text=r,i.tokens=this.lexer.inline(r)}return i}}def(e){const t=this.rules.block.def.exec(e);if(t){const i=t[1].toLowerCase().replace(/\s+/g," "),r=t[2]?t[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline._escapes,"$1"):"",s=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline._escapes,"$1"):t[3];return{type:"def",tag:i,raw:t[0],href:r,title:s}}}table(e){const t=this.rules.block.table.exec(e);if(t){const i={type:"table",header:qt(t[1]).map(r=>({text:r})),align:t[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:t[3]&&t[3].trim()?t[3].replace(/\n[ \t]*$/,"").split(`
`):[]};if(i.header.length===i.align.length){i.raw=t[0];let r=i.align.length,s,a,l,o;for(s=0;s<r;s++)/^ *-+: *$/.test(i.align[s])?i.align[s]="right":/^ *:-+: *$/.test(i.align[s])?i.align[s]="center":/^ *:-+ *$/.test(i.align[s])?i.align[s]="left":i.align[s]=null;for(r=i.rows.length,s=0;s<r;s++)i.rows[s]=qt(i.rows[s],i.header.length).map(u=>({text:u}));for(r=i.header.length,a=0;a<r;a++)i.header[a].tokens=this.lexer.inline(i.header[a].text);for(r=i.rows.length,a=0;a<r;a++)for(o=i.rows[a],l=0;l<o.length;l++)o[l].tokens=this.lexer.inline(o[l].text);return i}}}lheading(e){const t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:t[2].charAt(0)==="="?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(e){const t=this.rules.block.paragraph.exec(e);if(t){const i=t[1].charAt(t[1].length-1)===`
`?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:i,tokens:this.lexer.inline(i)}}}text(e){const t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(e){const t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:I(t[1])}}tag(e){const t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&/^<a /i.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(t[0]):I(t[0]):t[0]}}link(e){const t=this.rules.inline.link.exec(e);if(t){const i=t[2].trim();if(!this.options.pedantic&&/^</.test(i)){if(!/>$/.test(i))return;const a=ze(i.slice(0,-1),"\\");if((i.length-a.length)%2===0)return}else{const a=Jo(t[2],"()");if(a>-1){const o=(t[0].indexOf("!")===0?5:4)+t[1].length+a;t[2]=t[2].substring(0,a),t[0]=t[0].substring(0,o).trim(),t[3]=""}}let r=t[2],s="";if(this.options.pedantic){const a=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(r);a&&(r=a[1],s=a[3])}else s=t[3]?t[3].slice(1,-1):"";return r=r.trim(),/^</.test(r)&&(this.options.pedantic&&!/>$/.test(i)?r=r.slice(1):r=r.slice(1,-1)),Bt(t,{href:r&&r.replace(this.rules.inline._escapes,"$1"),title:s&&s.replace(this.rules.inline._escapes,"$1")},t[0],this.lexer)}}reflink(e,t){let i;if((i=this.rules.inline.reflink.exec(e))||(i=this.rules.inline.nolink.exec(e))){let r=(i[2]||i[1]).replace(/\s+/g," ");if(r=t[r.toLowerCase()],!r){const s=i[0].charAt(0);return{type:"text",raw:s,text:s}}return Bt(i,r,i[0],this.lexer)}}emStrong(e,t,i=""){let r=this.rules.inline.emStrong.lDelim.exec(e);if(!r||r[3]&&i.match(/[\p{L}\p{N}]/u))return;const s=r[1]||r[2]||"";if(!s||s&&(i===""||this.rules.inline.punctuation.exec(i))){const a=r[0].length-1;let l,o,u=a,c=0;const d=r[0][0]==="*"?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(d.lastIndex=0,t=t.slice(-1*e.length+a);(r=d.exec(t))!=null;){if(l=r[1]||r[2]||r[3]||r[4]||r[5]||r[6],!l)continue;if(o=l.length,r[3]||r[4]){u+=o;continue}else if((r[5]||r[6])&&a%3&&!((a+o)%3)){c+=o;continue}if(u-=o,u>0)continue;o=Math.min(o,o+u+c);const f=e.slice(0,a+r.index+(r[0].length-l.length)+o);if(Math.min(a,o)%2){const m=f.slice(1,-1);return{type:"em",raw:f,text:m,tokens:this.lexer.inlineTokens(m)}}const h=f.slice(2,-2);return{type:"strong",raw:f,text:h,tokens:this.lexer.inlineTokens(h)}}}}codespan(e){const t=this.rules.inline.code.exec(e);if(t){let i=t[2].replace(/\n/g," ");const r=/[^ ]/.test(i),s=/^ /.test(i)&&/ $/.test(i);return r&&s&&(i=i.substring(1,i.length-1)),i=I(i,!0),{type:"codespan",raw:t[0],text:i}}}br(e){const t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){const t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(e,t){const i=this.rules.inline.autolink.exec(e);if(i){let r,s;return i[2]==="@"?(r=I(this.options.mangle?t(i[1]):i[1]),s="mailto:"+r):(r=I(i[1]),s=r),{type:"link",raw:i[0],text:r,href:s,tokens:[{type:"text",raw:r,text:r}]}}}url(e,t){let i;if(i=this.rules.inline.url.exec(e)){let r,s;if(i[2]==="@")r=I(this.options.mangle?t(i[0]):i[0]),s="mailto:"+r;else{let a;do a=i[0],i[0]=this.rules.inline._backpedal.exec(i[0])[0];while(a!==i[0]);r=I(i[0]),i[1]==="www."?s="http://"+i[0]:s=i[0]}return{type:"link",raw:i[0],text:r,href:s,tokens:[{type:"text",raw:r,text:r}]}}}inlineText(e,t){const i=this.rules.inline.text.exec(e);if(i){let r;return this.lexer.state.inRawBlock?r=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(i[0]):I(i[0]):i[0]:r=I(this.options.smartypants?t(i[0]):i[0]),{type:"text",raw:i[0],text:r}}}}const y={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:Ie,lheading:/^((?:.|\n(?!\n))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/};y._label=/(?!\s*\])(?:\\.|[^\[\]\\])+/;y._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/;y.def=E(y.def).replace("label",y._label).replace("title",y._title).getRegex();y.bullet=/(?:[*+-]|\d{1,9}[.)])/;y.listItemStart=E(/^( *)(bull) */).replace("bull",y.bullet).getRegex();y.list=E(y.list).replace(/bull/g,y.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+y.def.source+")").getRegex();y._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul";y._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/;y.html=E(y.html,"i").replace("comment",y._comment).replace("tag",y._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex();y.paragraph=E(y._paragraph).replace("hr",y.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",y._tag).getRegex();y.blockquote=E(y.blockquote).replace("paragraph",y.paragraph).getRegex();y.normal={...y};y.gfm={...y.normal,table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"};y.gfm.table=E(y.gfm.table).replace("hr",y.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",y._tag).getRegex();y.gfm.paragraph=E(y._paragraph).replace("hr",y.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",y.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",y._tag).getRegex();y.pedantic={...y.normal,html:E(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",y._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Ie,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:E(y.normal._paragraph).replace("hr",y.hr).replace("heading",` *#{1,6} *[^
]`).replace("lheading",y.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()};const g={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:Ie,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/^(?:[^_*\\]|\\.)*?\_\_(?:[^_*\\]|\\.)*?\*(?:[^_*\\]|\\.)*?(?=\_\_)|(?:[^*\\]|\\.)+(?=[^*])|[punct_](\*+)(?=[\s]|$)|(?:[^punct*_\s\\]|\\.)(\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|(?:[^punct*_\s\\]|\\.)(\*+)(?=[^punct*_\s])/,rDelimUnd:/^(?:[^_*\\]|\\.)*?\*\*(?:[^_*\\]|\\.)*?\_(?:[^_*\\]|\\.)*?(?=\*\*)|(?:[^_\\]|\\.)+(?=[^_])|[punct*](\_+)(?=[\s]|$)|(?:[^punct*_\s\\]|\\.)(\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:Ie,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/};g._punctuation="!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~";g.punctuation=E(g.punctuation).replace(/punctuation/g,g._punctuation).getRegex();g.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g;g.escapedEmSt=/(?:^|[^\\])(?:\\\\)*\\[*_]/g;g._comment=E(y._comment).replace("(?:-->|$)","-->").getRegex();g.emStrong.lDelim=E(g.emStrong.lDelim).replace(/punct/g,g._punctuation).getRegex();g.emStrong.rDelimAst=E(g.emStrong.rDelimAst,"g").replace(/punct/g,g._punctuation).getRegex();g.emStrong.rDelimUnd=E(g.emStrong.rDelimUnd,"g").replace(/punct/g,g._punctuation).getRegex();g._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g;g._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/;g._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/;g.autolink=E(g.autolink).replace("scheme",g._scheme).replace("email",g._email).getRegex();g._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/;g.tag=E(g.tag).replace("comment",g._comment).replace("attribute",g._attribute).getRegex();g._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/;g._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/;g._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/;g.link=E(g.link).replace("label",g._label).replace("href",g._href).replace("title",g._title).getRegex();g.reflink=E(g.reflink).replace("label",g._label).replace("ref",y._label).getRegex();g.nolink=E(g.nolink).replace("ref",y._label).getRegex();g.reflinkSearch=E(g.reflinkSearch,"g").replace("reflink",g.reflink).replace("nolink",g.nolink).getRegex();g.normal={...g};g.pedantic={...g.normal,strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:E(/^!?\[(label)\]\((.*?)\)/).replace("label",g._label).getRegex(),reflink:E(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",g._label).getRegex()};g.gfm={...g.normal,escape:E(g.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/};g.gfm.url=E(g.gfm.url,"i").replace("email",g.gfm._extended_email).getRegex();g.breaks={...g.gfm,br:E(g.br).replace("{2,}","*").getRegex(),text:E(g.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()};function Ko(n){return n.replace(/---/g,"—").replace(/--/g,"–").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…")}function Ut(n){let e="",t,i;const r=n.length;for(t=0;t<r;t++)i=n.charCodeAt(t),Math.random()>.5&&(i="x"+i.toString(16)),e+="&#"+i+";";return e}class K{constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||oe,this.options.tokenizer=this.options.tokenizer||new $t,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const t={block:y.normal,inline:g.normal};this.options.pedantic?(t.block=y.pedantic,t.inline=g.pedantic):this.options.gfm&&(t.block=y.gfm,this.options.breaks?t.inline=g.breaks:t.inline=g.gfm),this.tokenizer.rules=t}static get rules(){return{block:y,inline:g}}static lex(e,t){return new K(t).lex(e)}static lexInline(e,t){return new K(t).inlineTokens(e)}lex(e){e=e.replace(/\r\n|\r/g,`
`),this.blockTokens(e,this.tokens);let t;for(;t=this.inlineQueue.shift();)this.inlineTokens(t.src,t.tokens);return this.tokens}blockTokens(e,t=[]){this.options.pedantic?e=e.replace(/\t/g,"    ").replace(/^ +$/gm,""):e=e.replace(/^( *)(\t+)/gm,(l,o,u)=>o+"    ".repeat(u.length));let i,r,s,a;for(;e;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(l=>(i=l.call({lexer:this},e,t))?(e=e.substring(i.raw.length),t.push(i),!0):!1))){if(i=this.tokenizer.space(e)){e=e.substring(i.raw.length),i.raw.length===1&&t.length>0?t[t.length-1].raw+=`
`:t.push(i);continue}if(i=this.tokenizer.code(e)){e=e.substring(i.raw.length),r=t[t.length-1],r&&(r.type==="paragraph"||r.type==="text")?(r.raw+=`
`+i.raw,r.text+=`
`+i.text,this.inlineQueue[this.inlineQueue.length-1].src=r.text):t.push(i);continue}if(i=this.tokenizer.fences(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.heading(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.hr(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.blockquote(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.list(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.html(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.def(e)){e=e.substring(i.raw.length),r=t[t.length-1],r&&(r.type==="paragraph"||r.type==="text")?(r.raw+=`
`+i.raw,r.text+=`
`+i.raw,this.inlineQueue[this.inlineQueue.length-1].src=r.text):this.tokens.links[i.tag]||(this.tokens.links[i.tag]={href:i.href,title:i.title});continue}if(i=this.tokenizer.table(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.lheading(e)){e=e.substring(i.raw.length),t.push(i);continue}if(s=e,this.options.extensions&&this.options.extensions.startBlock){let l=1/0;const o=e.slice(1);let u;this.options.extensions.startBlock.forEach(function(c){u=c.call({lexer:this},o),typeof u=="number"&&u>=0&&(l=Math.min(l,u))}),l<1/0&&l>=0&&(s=e.substring(0,l+1))}if(this.state.top&&(i=this.tokenizer.paragraph(s))){r=t[t.length-1],a&&r.type==="paragraph"?(r.raw+=`
`+i.raw,r.text+=`
`+i.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=r.text):t.push(i),a=s.length!==e.length,e=e.substring(i.raw.length);continue}if(i=this.tokenizer.text(e)){e=e.substring(i.raw.length),r=t[t.length-1],r&&r.type==="text"?(r.raw+=`
`+i.raw,r.text+=`
`+i.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=r.text):t.push(i);continue}if(e){const l="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(l);break}else throw new Error(l)}}return this.state.top=!0,t}inline(e,t=[]){return this.inlineQueue.push({src:e,tokens:t}),t}inlineTokens(e,t=[]){let i,r,s,a=e,l,o,u;if(this.tokens.links){const c=Object.keys(this.tokens.links);if(c.length>0)for(;(l=this.tokenizer.rules.inline.reflinkSearch.exec(a))!=null;)c.includes(l[0].slice(l[0].lastIndexOf("[")+1,-1))&&(a=a.slice(0,l.index)+"["+Ft("a",l[0].length-2)+"]"+a.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(l=this.tokenizer.rules.inline.blockSkip.exec(a))!=null;)a=a.slice(0,l.index)+"["+Ft("a",l[0].length-2)+"]"+a.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(l=this.tokenizer.rules.inline.escapedEmSt.exec(a))!=null;)a=a.slice(0,l.index+l[0].length-2)+"++"+a.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex),this.tokenizer.rules.inline.escapedEmSt.lastIndex--;for(;e;)if(o||(u=""),o=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(c=>(i=c.call({lexer:this},e,t))?(e=e.substring(i.raw.length),t.push(i),!0):!1))){if(i=this.tokenizer.escape(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.tag(e)){e=e.substring(i.raw.length),r=t[t.length-1],r&&i.type==="text"&&r.type==="text"?(r.raw+=i.raw,r.text+=i.text):t.push(i);continue}if(i=this.tokenizer.link(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(i.raw.length),r=t[t.length-1],r&&i.type==="text"&&r.type==="text"?(r.raw+=i.raw,r.text+=i.text):t.push(i);continue}if(i=this.tokenizer.emStrong(e,a,u)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.codespan(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.br(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.del(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.autolink(e,Ut)){e=e.substring(i.raw.length),t.push(i);continue}if(!this.state.inLink&&(i=this.tokenizer.url(e,Ut))){e=e.substring(i.raw.length),t.push(i);continue}if(s=e,this.options.extensions&&this.options.extensions.startInline){let c=1/0;const d=e.slice(1);let f;this.options.extensions.startInline.forEach(function(h){f=h.call({lexer:this},d),typeof f=="number"&&f>=0&&(c=Math.min(c,f))}),c<1/0&&c>=0&&(s=e.substring(0,c+1))}if(i=this.tokenizer.inlineText(s,Ko)){e=e.substring(i.raw.length),i.raw.slice(-1)!=="_"&&(u=i.raw.slice(-1)),o=!0,r=t[t.length-1],r&&r.type==="text"?(r.raw+=i.raw,r.text+=i.text):t.push(i);continue}if(e){const c="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(c);break}else throw new Error(c)}}return t}}class qe{constructor(e){this.options=e||oe}code(e,t,i){const r=(t||"").match(/\S*/)[0];if(this.options.highlight){const s=this.options.highlight(e,r);s!=null&&s!==e&&(i=!0,e=s)}return e=e.replace(/\n$/,"")+`
`,r?'<pre><code class="'+this.options.langPrefix+I(r)+'">'+(i?e:I(e,!0))+`</code></pre>
`:"<pre><code>"+(i?e:I(e,!0))+`</code></pre>
`}blockquote(e){return`<blockquote>
${e}</blockquote>
`}html(e){return e}heading(e,t,i,r){if(this.options.headerIds){const s=this.options.headerPrefix+r.slug(i);return`<h${t} id="${s}">${e}</h${t}>
`}return`<h${t}>${e}</h${t}>
`}hr(){return this.options.xhtml?`<hr/>
`:`<hr>
`}list(e,t,i){const r=t?"ol":"ul",s=t&&i!==1?' start="'+i+'"':"";return"<"+r+s+`>
`+e+"</"+r+`>
`}listitem(e){return`<li>${e}</li>
`}checkbox(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "}paragraph(e){return`<p>${e}</p>
`}table(e,t){return t&&(t=`<tbody>${t}</tbody>`),`<table>
<thead>
`+e+`</thead>
`+t+`</table>
`}tablerow(e){return`<tr>
${e}</tr>
`}tablecell(e,t){const i=t.header?"th":"td";return(t.align?`<${i} align="${t.align}">`:`<${i}>`)+e+`</${i}>
`}strong(e){return`<strong>${e}</strong>`}em(e){return`<em>${e}</em>`}codespan(e){return`<code>${e}</code>`}br(){return this.options.xhtml?"<br/>":"<br>"}del(e){return`<del>${e}</del>`}link(e,t,i){if(e=Ht(this.options.sanitize,this.options.baseUrl,e),e===null)return i;let r='<a href="'+e+'"';return t&&(r+=' title="'+t+'"'),r+=">"+i+"</a>",r}image(e,t,i){if(e=Ht(this.options.sanitize,this.options.baseUrl,e),e===null)return i;let r=`<img src="${e}" alt="${i}"`;return t&&(r+=` title="${t}"`),r+=this.options.xhtml?"/>":">",r}text(e){return e}}class jn{strong(e){return e}em(e){return e}codespan(e){return e}del(e){return e}html(e){return e}text(e){return e}link(e,t,i){return""+i}image(e,t,i){return""+i}br(){return""}}class Hn{constructor(){this.seen={}}serialize(e){return e.toLowerCase().trim().replace(/<[!\/a-z].*?>/ig,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")}getNextSafeSlug(e,t){let i=e,r=0;if(this.seen.hasOwnProperty(i)){r=this.seen[e];do r++,i=e+"-"+r;while(this.seen.hasOwnProperty(i))}return t||(this.seen[e]=r,this.seen[i]=0),i}slug(e,t={}){const i=this.serialize(e);return this.getNextSafeSlug(i,t.dryrun)}}class Y{constructor(e){this.options=e||oe,this.options.renderer=this.options.renderer||new qe,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new jn,this.slugger=new Hn}static parse(e,t){return new Y(t).parse(e)}static parseInline(e,t){return new Y(t).parseInline(e)}parse(e,t=!0){let i="",r,s,a,l,o,u,c,d,f,h,m,v,O,x,A,R,w,k,_;const T=e.length;for(r=0;r<T;r++){if(h=e[r],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[h.type]&&(_=this.options.extensions.renderers[h.type].call({parser:this},h),_!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(h.type))){i+=_||"";continue}switch(h.type){case"space":continue;case"hr":{i+=this.renderer.hr();continue}case"heading":{i+=this.renderer.heading(this.parseInline(h.tokens),h.depth,Dn(this.parseInline(h.tokens,this.textRenderer)),this.slugger);continue}case"code":{i+=this.renderer.code(h.text,h.lang,h.escaped);continue}case"table":{for(d="",c="",l=h.header.length,s=0;s<l;s++)c+=this.renderer.tablecell(this.parseInline(h.header[s].tokens),{header:!0,align:h.align[s]});for(d+=this.renderer.tablerow(c),f="",l=h.rows.length,s=0;s<l;s++){for(u=h.rows[s],c="",o=u.length,a=0;a<o;a++)c+=this.renderer.tablecell(this.parseInline(u[a].tokens),{header:!1,align:h.align[a]});f+=this.renderer.tablerow(c)}i+=this.renderer.table(d,f);continue}case"blockquote":{f=this.parse(h.tokens),i+=this.renderer.blockquote(f);continue}case"list":{for(m=h.ordered,v=h.start,O=h.loose,l=h.items.length,f="",s=0;s<l;s++)A=h.items[s],R=A.checked,w=A.task,x="",A.task&&(k=this.renderer.checkbox(R),O?A.tokens.length>0&&A.tokens[0].type==="paragraph"?(A.tokens[0].text=k+" "+A.tokens[0].text,A.tokens[0].tokens&&A.tokens[0].tokens.length>0&&A.tokens[0].tokens[0].type==="text"&&(A.tokens[0].tokens[0].text=k+" "+A.tokens[0].tokens[0].text)):A.tokens.unshift({type:"text",text:k}):x+=k),x+=this.parse(A.tokens,O),f+=this.renderer.listitem(x,w,R);i+=this.renderer.list(f,m,v);continue}case"html":{i+=this.renderer.html(h.text);continue}case"paragraph":{i+=this.renderer.paragraph(this.parseInline(h.tokens));continue}case"text":{for(f=h.tokens?this.parseInline(h.tokens):h.text;r+1<T&&e[r+1].type==="text";)h=e[++r],f+=`
`+(h.tokens?this.parseInline(h.tokens):h.text);i+=t?this.renderer.paragraph(f):f;continue}default:{const L='Token with "'+h.type+'" type was not found.';if(this.options.silent){console.error(L);return}else throw new Error(L)}}}return i}parseInline(e,t){t=t||this.renderer;let i="",r,s,a;const l=e.length;for(r=0;r<l;r++){if(s=e[r],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[s.type]&&(a=this.options.extensions.renderers[s.type].call({parser:this},s),a!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(s.type))){i+=a||"";continue}switch(s.type){case"escape":{i+=t.text(s.text);break}case"html":{i+=t.html(s.text);break}case"link":{i+=t.link(s.href,s.title,this.parseInline(s.tokens,t));break}case"image":{i+=t.image(s.href,s.title,s.text);break}case"strong":{i+=t.strong(this.parseInline(s.tokens,t));break}case"em":{i+=t.em(this.parseInline(s.tokens,t));break}case"codespan":{i+=t.codespan(s.text);break}case"br":{i+=t.br();break}case"del":{i+=t.del(this.parseInline(s.tokens,t));break}case"text":{i+=t.text(s.text);break}default:{const o='Token with "'+s.type+'" type was not found.';if(this.options.silent){console.error(o);return}else throw new Error(o)}}}return i}}class Me{constructor(e){this.options=e||oe}preprocess(e){return e}postprocess(e){return e}}U(Me,"passThroughHooks",new Set(["preprocess","postprocess"]));function Yo(n,e,t){return i=>{if(i.message+=`
Please report this to https://github.com/markedjs/marked.`,n){const r="<p>An error occurred:</p><pre>"+I(i.message+"",!0)+"</pre>";if(e)return Promise.resolve(r);if(t){t(null,r);return}return r}if(e)return Promise.reject(i);if(t){t(i);return}throw i}}function qn(n,e){return(t,i,r)=>{typeof i=="function"&&(r=i,i=null);const s={...i};i={...b.defaults,...s};const a=Yo(i.silent,i.async,r);if(typeof t>"u"||t===null)return a(new Error("marked(): input parameter is undefined or null"));if(typeof t!="string")return a(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected"));if(Xo(i),i.hooks&&(i.hooks.options=i),r){const l=i.highlight;let o;try{i.hooks&&(t=i.hooks.preprocess(t)),o=n(t,i)}catch(d){return a(d)}const u=function(d){let f;if(!d)try{i.walkTokens&&b.walkTokens(o,i.walkTokens),f=e(o,i),i.hooks&&(f=i.hooks.postprocess(f))}catch(h){d=h}return i.highlight=l,d?a(d):r(null,f)};if(!l||l.length<3||(delete i.highlight,!o.length))return u();let c=0;b.walkTokens(o,function(d){d.type==="code"&&(c++,setTimeout(()=>{l(d.text,d.lang,function(f,h){if(f)return u(f);h!=null&&h!==d.text&&(d.text=h,d.escaped=!0),c--,c===0&&u()})},0))}),c===0&&u();return}if(i.async)return Promise.resolve(i.hooks?i.hooks.preprocess(t):t).then(l=>n(l,i)).then(l=>i.walkTokens?Promise.all(b.walkTokens(l,i.walkTokens)).then(()=>l):l).then(l=>e(l,i)).then(l=>i.hooks?i.hooks.postprocess(l):l).catch(a);try{i.hooks&&(t=i.hooks.preprocess(t));const l=n(t,i);i.walkTokens&&b.walkTokens(l,i.walkTokens);let o=e(l,i);return i.hooks&&(o=i.hooks.postprocess(o)),o}catch(l){return a(l)}}}function b(n,e,t){return qn(K.lex,Y.parse)(n,e,t)}b.options=b.setOptions=function(n){return b.defaults={...b.defaults,...n},Ro(b.defaults),b};b.getDefaults=Mn;b.defaults=oe;b.use=function(...n){const e=b.defaults.extensions||{renderers:{},childTokens:{}};n.forEach(t=>{const i={...t};if(i.async=b.defaults.async||i.async||!1,t.extensions&&(t.extensions.forEach(r=>{if(!r.name)throw new Error("extension name required");if(r.renderer){const s=e.renderers[r.name];s?e.renderers[r.name]=function(...a){let l=r.renderer.apply(this,a);return l===!1&&(l=s.apply(this,a)),l}:e.renderers[r.name]=r.renderer}if(r.tokenizer){if(!r.level||r.level!=="block"&&r.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");e[r.level]?e[r.level].unshift(r.tokenizer):e[r.level]=[r.tokenizer],r.start&&(r.level==="block"?e.startBlock?e.startBlock.push(r.start):e.startBlock=[r.start]:r.level==="inline"&&(e.startInline?e.startInline.push(r.start):e.startInline=[r.start]))}r.childTokens&&(e.childTokens[r.name]=r.childTokens)}),i.extensions=e),t.renderer){const r=b.defaults.renderer||new qe;for(const s in t.renderer){const a=r[s];r[s]=(...l)=>{let o=t.renderer[s].apply(r,l);return o===!1&&(o=a.apply(r,l)),o}}i.renderer=r}if(t.tokenizer){const r=b.defaults.tokenizer||new $t;for(const s in t.tokenizer){const a=r[s];r[s]=(...l)=>{let o=t.tokenizer[s].apply(r,l);return o===!1&&(o=a.apply(r,l)),o}}i.tokenizer=r}if(t.hooks){const r=b.defaults.hooks||new Me;for(const s in t.hooks){const a=r[s];Me.passThroughHooks.has(s)?r[s]=l=>{if(b.defaults.async)return Promise.resolve(t.hooks[s].call(r,l)).then(u=>a.call(r,u));const o=t.hooks[s].call(r,l);return a.call(r,o)}:r[s]=(...l)=>{let o=t.hooks[s].apply(r,l);return o===!1&&(o=a.apply(r,l)),o}}i.hooks=r}if(t.walkTokens){const r=b.defaults.walkTokens;i.walkTokens=function(s){let a=[];return a.push(t.walkTokens.call(this,s)),r&&(a=a.concat(r.call(this,s))),a}}b.setOptions(i)})};b.walkTokens=function(n,e){let t=[];for(const i of n)switch(t=t.concat(e.call(b,i)),i.type){case"table":{for(const r of i.header)t=t.concat(b.walkTokens(r.tokens,e));for(const r of i.rows)for(const s of r)t=t.concat(b.walkTokens(s.tokens,e));break}case"list":{t=t.concat(b.walkTokens(i.items,e));break}default:b.defaults.extensions&&b.defaults.extensions.childTokens&&b.defaults.extensions.childTokens[i.type]?b.defaults.extensions.childTokens[i.type].forEach(function(r){t=t.concat(b.walkTokens(i[r],e))}):i.tokens&&(t=t.concat(b.walkTokens(i.tokens,e)))}return t};b.parseInline=qn(K.lexInline,Y.parseInline);b.Parser=Y;b.parser=Y.parse;b.Renderer=qe;b.TextRenderer=jn;b.Lexer=K;b.lexer=K.lex;b.Tokenizer=$t;b.Slugger=Hn;b.Hooks=Me;b.parse=b;b.options;b.setOptions;b.use;b.walkTokens;b.parseInline;Y.parse;K.lex;const St=new qe;St.blockquote=n=>`<div class="fork">${n}</div>`;St.del=n=>`<span class="small-caps">${n}</span>`;function ea(n,e){var i,r;const t=n.substring(1,n.length-1).trim();if(/\s/.test(t)){const s=(i=t.match(/^[^:,]+/))==null?void 0:i[0];if(!s)return n;const a=e.find(l=>l.match.test(s));if(a){const l=t.replace(s,"");if(l[0]===":"){const o=new Function(`return {"${s}" ${l}}`)(),u=o[s];return delete o[s],a.render(u,o,t)}else if(l[0]===","){const o=new Function(`return {${l.substring(1)}}`)();return a.render(null,o,t)}else if(l==="")return a.render(null,{},t)}}else{const s=/(.+)\[(.+)\]$/.exec(t);let a;if(s?a=(r=p(s[1]))==null?void 0:r[s[2]]:a=p(t),a!==void 0)return a}return n}function ta(n,e){let t="",i=0,r=n.indexOf("{");if(r===-1)return n;let s=!1,a;for(let l=r+1;l<n.length;l++)switch(n[l]){case"{":r=l,s=!1;break;case'"':case"'":l>0&&n[l-1]!=="\\"&&(s?s&&a===n[l]&&(s=!1):(s=!0,a=n[l]));break;case"}":if(!s){const o=n.substring(r,l+1);let u="";try{u=ea(o,e)}catch(c){console.warn(`An error occurred while rendering "${o}": ${c.message}`),u=o}u===void 0&&(u=""),t+=n.substring(i,r)+u,i=l+1,r=n.indexOf("{",i),r===-1&&(l=n.length)}break}return t+n.substring(i)}const{log:Z}=F("render"),na={renderer:St,smartypants:!0};function ia(n,e,t,i=!1){if(!n.vars)throw new Error("The renderer was given an object with no vars property.");if(!n.blocks)throw new Error("The renderer was given an object with no blocks property.");let r="";if(!i){Z(`Setting vars (${n.vars.length})`);for(const o of n.vars)o.condition?o.condition()?(Z(`Setting var "${o.name}" (condition is currently true)`),$(o.name,o.value())):Z(`Not setting var "${o.name}" (condition is currently false)`):(Z(`Setting var "${o.name}"`),$(o.name,o.value()))}let s=[];const a=new Map;for(const o of n.blocks)switch(o.type){case"text":{const u={text:o.content,startsNewParagraph:!0},c=s.filter(f=>!!f.modifier.processRaw);Z(`Running ${c.length} modifiers on raw source block`);for(const{invocation:f,modifier:h}of c){const m=a.get(h);if(!m)throw new Error("State for a modifier was unknown, but should have had a value.");if(!h.processRaw)throw new Error("A modifier was added to the raw modifiers list, but it has no processRaw function.");h.processRaw(u,{state:m,invocation:f})}u.text=ta(no(u.text),e);const d=s.filter(f=>!!f.modifier.process);Z(`Running ${d.length} modifiers on source block`);for(const{invocation:f,modifier:h}of d){const m=a.get(h);if(!m)throw new Error("State for a modifier was unknown, but should have had a value.");if(!h.process)throw new Error("A modifier was added to the processed modifiers list, but it has no process function.");h.process(u,{state:m,invocation:f})}Z(`Output after modifiers: ${JSON.stringify(u)}`),u.text.trim()!==""&&(r!==""&&(r+=u.startsNewParagraph?`

`:" "),r+=u.text),s=[];break}case"modifier":{const u=t.filter(c=>c.match.test(o.content));if(u.length===1){const c=u[0];Z(`Activated modifier matching [${o.content}]`),a.has(c)||a.set(c,{}),s.push({modifier:c,invocation:o.content})}else u.length===0?r+=`

[${o.content}]

`:(console.warn(`More than one modifier matched "[${o.content}]".`),r+=`

[${o.content}]

`);break}default:throw new Error(`Don't know how to render a block with type "${o.type}".`)}const l=/^((>|-|(\*\s)).*$)\n{2,}\2/gm;for(;l.test(r);)r=r.replace(l,`$1
$2`);return b.setOptions(na),Z(`Final Markdown:
${r}`),b(r)}function $e(n,e=!1){return ia(No(n),zn(),In(),e)}class ra extends fe{constructor(){super(),this.addEventListener("click",()=>{let e=this.getAttribute("text");const t=this.getAttribute("passage");if(t){const i=Se(t);i&&(e=i.source)}if(e){const i=document.createElement("div");i.innerHTML=$e(e).trim();const r=this.closest("body-content, marginal-content");if(!r)throw new Error("Couldn't find suitable parent element to do a reveal link transition on.");r.changeContent(()=>{var a,l;const s=i.children.length;if(s>0&&this.parentNode){const o=document.createElement("span");if(o.innerHTML=((a=i.firstElementChild)==null?void 0:a.innerHTML)??"",this.parentNode.insertBefore(o,this),(l=i.firstElementChild)==null||l.remove(),s>1&&this.parentNode.parentNode&&i.lastChild){const u=i.lastChild;for(;i.lastChild;)this.parentNode.parentNode.insertBefore(i.lastChild,this.parentNode.nextSibling);for(;this.nextSibling;)u.insertBefore(this.nextSibling,null)}}this.remove()})}})}}class Fn extends z{attributeChangedCallback(){const e=this.getAttribute("skippable-delay");if(!e)return;const t=parseInt(e);if(isFinite(t))if(t===0){this.style.animationDelay="";const i=this.className;this.className="",this.offsetWidth,this.className=i}else this.style.animationDelay=`${t}ms`}}U(Fn,"observedAttributes",["skippable-delay"]);class Bn extends fe{constructor(){super(),this.addEventListener("click",this),window.addEventListener("state-change",this)}connectedCallback(){super.connectedCallback(),this.updateLabel(),this.updateVisibility()}disconnectedCallback(){window.removeEventListener("state-change",this)}handleEvent(e){if(e.type==="click")$("config.style.page.theme.override",p("browser.darkTheme")?"light":"dark"),this.updateLabel();else{const{detail:t}=e;t.name==="config.style.page.theme.enableSwitching"&&this.updateVisibility()}}updateLabel(){const e=p("browser.darkTheme")?"dark":"light";this.innerHTML=this.getAttribute(`${e}-label`)??"Switch Theme"}updateVisibility(){p("config.style.page.theme.enableSwitching")?this.removeAttribute("hidden"):this.setAttribute("hidden","")}attributeChangedCallback(){this.updateLabel()}}U(Bn,"observedAttributes",["dark-label","light-label"]);class sa extends z{constructor(){super(),this.delegate("change","input, select",e=>{const t=this.getAttribute("name"),i=e.target;if(t)switch(i.nodeName){case"INPUT":$(t,i.value);break;case"SELECT":{const r=i.querySelectorAll("option")[i.selectedIndex];$(t,r.dataset.jsonValue?JSON.parse(r.dataset.jsonValue):r.value)}}})}}function oa(){wt({"cycling-link":Ks,"inline-button":fe,"passage-link":Ys,"restart-link":eo,"reveal-link":ra,"skippable-animation":Fn,"theme-switcher":Bn,"variable-binding":sa})}function Un(){oa()}const aa=Object.freeze(Object.defineProperty({__proto__:null,initTemplate:Un,inserts:xo,modifiers:Oo,render:$e},Symbol.toStringTag,{value:"Module"})),la=hn(n=>{if(n.some(e=>e[0])){const e=p("trail");if(!Array.isArray(e))throw new Error("The trail variable has been set to a non-array value.");if(typeof e[e.length-1]!="string")throw new Error("The last value in the trail variable is not a string.");const i=Se(e[e.length-1]);if(!i)throw new Error(`There is no passage named "${e[e.length-1]}".`);const r=$e(i.source),s={footer:{center:"",left:"",right:""},header:{center:"",left:"",right:""}};for(const a in s)for(const l in s[a])s[a][l]=$e(p(`config.${a}.${l}`).toString());window.dispatchEvent(new CustomEvent("display-change",{detail:{body:r,...s}}))}});let Ue;function ca(){window.addEventListener("state-change",({detail:n})=>{la(n.name==="trail")}),Ue=window.matchMedia("(prefers-color-scheme: dark)"),Ue.addEventListener("change",()=>{window.dispatchEvent(new CustomEvent("system-theme-change",{detail:{theme:Ue.matches?"dark":"light"}}))})}const ua={"config.body.transition.name":"crossfade","config.body.transition.duration":"300ms","config.header.left":"","config.header.center":"","config.header.right":"","config.header.transition.name":"crossfade","config.header.transition.duration":"300ms","config.footer.left":"_{story.name}_","config.footer.center":"","config.footer.right":"{theme switcher}&emsp;{restart link}","config.footer.transition.name":"crossfade","config.footer.transition.duration":"300ms"};function da(){re(ua),Qs(),ca()}const{warn:Ae}=F("extensibility");function Vt(n){return n.split(".").map(window.parseInt)}function fa(){window.engine={extend(n,e){const t=p("engine.version");if(typeof t!="string")throw new Error(`engine.version has been set to a ${typeof t}, not a string.`);const i=Vt(n),r=Vt(t);if(r[0]<i[0]){Ae(`The current engine version (${t}) has a lower major version than requested (${n}); skipping`);return}r[0]>i[0]?Ae(`The current engine version (${t}) has a higher major version than requested (${n}); running code but you may encounter problems`):(r[1]<i[1]&&Ae(`The current engine version (${t}) has a lower minor version than requested (${n}); running code but you may encounter problems`),r[1]===i[1]&&r[2]<i[2]&&Ae(`The current engine version (${t}) has a lower patch version than requested (${n}); running code but you may encounter problems`)),e()},log:Xt,state:Jr,story:Xr,template:aa,warn:Qt}}function ha(n,e,t,i){return(n/=i/2)<1?t/2*n*n+e:-t/2*(--n*(n-2)-1)+e}function Vn(n,e,t){const i=n.volume,r=e-i;let s,a=0;return n.volume===e?Promise.resolve():new Promise(l=>window.requestAnimationFrame(o=>{function u(c){a+=c-s,n.volume=ha(a,i,r,t),a<t?(s=c,window.requestAnimationFrame(u)):l()}s=o,window.requestAnimationFrame(u)}))}const{log:Xe}=F("sound"),S={};function Ve(n,e,t){S[n]?(S[n].setAttribute("src",e),t?S[n].setAttribute("preload","auto"):S[n].removeAttribute("preload"),Xe(`Updated <audio> element in sound bank for "${n}" to use ${e}`)):(S[n]=document.createElement("audio"),S[n].setAttribute("src",e),t&&S[n].setAttribute("preload","auto"),Xe(`Added new <audio> element to sound bank for "${n}" for ${e}`))}async function Le(n,e=!1,t=0){if(!S[n])throw new Error(`There is no sound loaded named ${n}.`);return Xe(`Playing sound "${n}" (looping: ${e})`),t>0&&(S[n].volume=0,Vn(S[n],1,t)),e?(S[n].loop=!0,S[n].play()):(S[n].loop=!1,new Promise((i,r)=>{try{S[n].addEventListener("ended",function s(){S[n].removeEventListener("ended",s),i()}),S[n].play().catch(s=>r(s))}catch(s){r(s)}}))}function Wt(n,e=0){if(!S[n])throw new Error(`There is no sound loaded named ${n}.`);if(e<=0)S[n].pause(),S[n].currentTime=0;else{const t=S[n].volume;Vn(S[n],0,e).then(()=>{S[n].pause(),S[n].volume=t,S[n].currentTime=0})}}function Zt(n,e){if(!S[n])throw new Error(`There is no sound loaded named ${n}.`);S[n].muted=e}function We(n,e){if(!S[n])throw new Error(`There is no sound loaded named ${n}.`);if(e<0||e>1)throw new Error("A sound volume must be between 0 and 1.");S[n].volume=e}const{warn:Gt}=F("sound");function pa(){re({"sound.mute":!1,"sound.volume":1,"sound.transitionDuration":"1s"}),window.addEventListener("state-change",({detail:n})=>{const{name:e,value:t}=n,i=["sound","sound.ambient"].includes(e),r=["sound","sound.effect"].includes(e);if(i){const a=p("sound.ambient");if(typeof a=="object"&&a){const l=a;for(const o in l)typeof l[o].url=="string"&&Ve(o,l[o].url,!1),typeof l[o].volume=="number"&&We(o,l[o].volume),"muted"in l[o]&&Zt(o,!!l[o].muted),l[o].playing===!0&&Le(o,!0).catch(u=>Gt(`Could not resume playing ambient sound "${o}" (${u.message})`))}}if(r){const a=p("sound.effect");if(typeof a=="object"&&a){const l=a;for(const o in l)typeof l[o].url=="string"&&Ve(o,l[o].url,!0),typeof l[o].volume=="number"&&We(o,l[o].volume),"muted"in l[o]&&Zt(o,!!l[o].muted),l[o].playing&&Le(o,!1).then(()=>$(`sound.effect.${o}.playing`,!1)).catch(u=>Gt(`Could not resume playing sound effect "${o}" (${u.message}`))}}if(i||r)return;const s=/^sound\.(ambient|effect)\.(.+?)\.(.+)$/i.exec(e);if(s)switch(s[3].toLowerCase()){case"playing":{let a="0s";typeof p(`${s[2]}.transitionDuration`)=="string"&&(a=p(`${s[2]}.transitionDuration`)),typeof p("sound.transitionDuration")=="string"&&(a=p("sound.transitionDuration")),t?s[1]==="ambient"?Le(s[2],!0,ve(a,"ms")):Le(s[2],!1).then(()=>$(e,!1)):s[1]==="ambient"?Wt(s[2],ve(a,"ms")):Wt(s[2]);break}case"url":Ve(s[2],t,s[1]==="effect");break;case"volume":We(s[2],t);break}})}function ga(){C("browser.darkSystemTheme",()=>!!(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches)),C("browser.darkTheme",()=>{if(!p("config.style.page.theme.enableSwitching"))return!1;switch(p("config.style.page.theme.override")){case"dark":return!0;case"light":return!1;default:return p("browser.darkSystemTheme")}}),C("browser.height",()=>window.innerHeight),C("browser.online",()=>window.navigator.onLine),C("browser.width",()=>window.innerWidth)}const ma="2.1.0";function ba(){C("engine.version",()=>ma)}function ya(){C("now.datestamp",()=>new Date().toLocaleDateString(navigator.language)),C("now.second",()=>new Date().getSeconds()),C("now.minute",()=>new Date().getMinutes()),C("now.hour",()=>new Date().getHours()),C("now.day",()=>new Date().getDate()),C("now.weekday",()=>new Date().getDay()+1),C("now.weekdayName",()=>new Date().toLocaleString(navigator.language,{weekday:"long"})),C("now.month",()=>new Date().getMonth()+1),C("now.monthName",()=>new Date().toLocaleString(navigator.language,{month:"long"})),C("now.year",()=>new Date().getFullYear()),C("now.timestamp",()=>new Date().toLocaleString(navigator.language,{hour:"numeric",minute:"numeric",second:"numeric"}))}const{warn:Ze}=F("lookups");function wa(){C("passage.from",()=>{const n=p("trail");if(!Array.isArray(n)){Ze(`The trail variable has been set to a ${typeof n}, not an array.`);return}if(n.length>1)return n[n.length-2]}),C("passage.name",()=>{const n=p("trail");if(!Array.isArray(n)){Ze(`The trail variable has been set to a ${typeof n}, not an array.`);return}return n[n.length-1]}),C("passage.visits",()=>{const n=p("trail"),e=p("passage.name");return Array.isArray(n)?n.reduce((t,i)=>i===e?t+1:t,0):(Ze(`The trail variable has been set to a ${typeof n}, not an array.`),0)})}var Qe={},ka={get exports(){return Qe},set exports(n){Qe=n}};(function(n){(function(e,t,i){function r(o){var u=this,c=l();u.next=function(){var d=2091639*u.s0+u.c*23283064365386963e-26;return u.s0=u.s1,u.s1=u.s2,u.s2=d-(u.c=d|0)},u.c=1,u.s0=c(" "),u.s1=c(" "),u.s2=c(" "),u.s0-=c(o),u.s0<0&&(u.s0+=1),u.s1-=c(o),u.s1<0&&(u.s1+=1),u.s2-=c(o),u.s2<0&&(u.s2+=1),c=null}function s(o,u){return u.c=o.c,u.s0=o.s0,u.s1=o.s1,u.s2=o.s2,u}function a(o,u){var c=new r(o),d=u&&u.state,f=c.next;return f.int32=function(){return c.next()*4294967296|0},f.double=function(){return f()+(f()*2097152|0)*11102230246251565e-32},f.quick=f,d&&(typeof d=="object"&&s(d,c),f.state=function(){return s(c,{})}),f}function l(){var o=4022871197,u=function(c){c=String(c);for(var d=0;d<c.length;d++){o+=c.charCodeAt(d);var f=.02519603282416938*o;o=f>>>0,f-=o,f*=o,o=f>>>0,f-=o,o+=f*4294967296}return(o>>>0)*23283064365386963e-26};return u}t&&t.exports?t.exports=a:i&&i.amd?i(function(){return a}):this.alea=a})(se,n,!1)})(ka);var Ke={},xa={get exports(){return Ke},set exports(n){Ke=n}};(function(n){(function(e,t,i){function r(l){var o=this,u="";o.x=0,o.y=0,o.z=0,o.w=0,o.next=function(){var d=o.x^o.x<<11;return o.x=o.y,o.y=o.z,o.z=o.w,o.w^=o.w>>>19^d^d>>>8},l===(l|0)?o.x=l:u+=l;for(var c=0;c<u.length+64;c++)o.x^=u.charCodeAt(c)|0,o.next()}function s(l,o){return o.x=l.x,o.y=l.y,o.z=l.z,o.w=l.w,o}function a(l,o){var u=new r(l),c=o&&o.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var f=u.next()>>>11,h=(u.next()>>>0)/4294967296,m=(f+h)/(1<<21);while(m===0);return m},d.int32=u.next,d.quick=d,c&&(typeof c=="object"&&s(c,u),d.state=function(){return s(u,{})}),d}t&&t.exports?t.exports=a:i&&i.amd?i(function(){return a}):this.xor128=a})(se,n,!1)})(xa);var Ye={},va={get exports(){return Ye},set exports(n){Ye=n}};(function(n){(function(e,t,i){function r(l){var o=this,u="";o.next=function(){var d=o.x^o.x>>>2;return o.x=o.y,o.y=o.z,o.z=o.w,o.w=o.v,(o.d=o.d+362437|0)+(o.v=o.v^o.v<<4^(d^d<<1))|0},o.x=0,o.y=0,o.z=0,o.w=0,o.v=0,l===(l|0)?o.x=l:u+=l;for(var c=0;c<u.length+64;c++)o.x^=u.charCodeAt(c)|0,c==u.length&&(o.d=o.x<<10^o.x>>>4),o.next()}function s(l,o){return o.x=l.x,o.y=l.y,o.z=l.z,o.w=l.w,o.v=l.v,o.d=l.d,o}function a(l,o){var u=new r(l),c=o&&o.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var f=u.next()>>>11,h=(u.next()>>>0)/4294967296,m=(f+h)/(1<<21);while(m===0);return m},d.int32=u.next,d.quick=d,c&&(typeof c=="object"&&s(c,u),d.state=function(){return s(u,{})}),d}t&&t.exports?t.exports=a:i&&i.amd?i(function(){return a}):this.xorwow=a})(se,n,!1)})(va);var et={},$a={get exports(){return et},set exports(n){et=n}};(function(n){(function(e,t,i){function r(l){var o=this;o.next=function(){var c=o.x,d=o.i,f,h;return f=c[d],f^=f>>>7,h=f^f<<24,f=c[d+1&7],h^=f^f>>>10,f=c[d+3&7],h^=f^f>>>3,f=c[d+4&7],h^=f^f<<7,f=c[d+7&7],f=f^f<<13,h^=f^f<<9,c[d]=h,o.i=d+1&7,h};function u(c,d){var f,h=[];if(d===(d|0))h[0]=d;else for(d=""+d,f=0;f<d.length;++f)h[f&7]=h[f&7]<<15^d.charCodeAt(f)+h[f+1&7]<<13;for(;h.length<8;)h.push(0);for(f=0;f<8&&h[f]===0;++f);for(f==8?h[7]=-1:h[f],c.x=h,c.i=0,f=256;f>0;--f)c.next()}u(o,l)}function s(l,o){return o.x=l.x.slice(),o.i=l.i,o}function a(l,o){l==null&&(l=+new Date);var u=new r(l),c=o&&o.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var f=u.next()>>>11,h=(u.next()>>>0)/4294967296,m=(f+h)/(1<<21);while(m===0);return m},d.int32=u.next,d.quick=d,c&&(c.x&&s(c,u),d.state=function(){return s(u,{})}),d}t&&t.exports?t.exports=a:i&&i.amd?i(function(){return a}):this.xorshift7=a})(se,n,!1)})($a);var tt={},Sa={get exports(){return tt},set exports(n){tt=n}};(function(n){(function(e,t,i){function r(l){var o=this;o.next=function(){var c=o.w,d=o.X,f=o.i,h,m;return o.w=c=c+1640531527|0,m=d[f+34&127],h=d[f=f+1&127],m^=m<<13,h^=h<<17,m^=m>>>15,h^=h>>>12,m=d[f]=m^h,o.i=f,m+(c^c>>>16)|0};function u(c,d){var f,h,m,v,O,x=[],A=128;for(d===(d|0)?(h=d,d=null):(d=d+"\0",h=0,A=Math.max(A,d.length)),m=0,v=-32;v<A;++v)d&&(h^=d.charCodeAt((v+32)%d.length)),v===0&&(O=h),h^=h<<10,h^=h>>>15,h^=h<<4,h^=h>>>13,v>=0&&(O=O+1640531527|0,f=x[v&127]^=h+O,m=f==0?m+1:0);for(m>=128&&(x[(d&&d.length||0)&127]=-1),m=127,v=4*128;v>0;--v)h=x[m+34&127],f=x[m=m+1&127],h^=h<<13,f^=f<<17,h^=h>>>15,f^=f>>>12,x[m]=h^f;c.w=O,c.X=x,c.i=m}u(o,l)}function s(l,o){return o.i=l.i,o.w=l.w,o.X=l.X.slice(),o}function a(l,o){l==null&&(l=+new Date);var u=new r(l),c=o&&o.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var f=u.next()>>>11,h=(u.next()>>>0)/4294967296,m=(f+h)/(1<<21);while(m===0);return m},d.int32=u.next,d.quick=d,c&&(c.X&&s(c,u),d.state=function(){return s(u,{})}),d}t&&t.exports?t.exports=a:i&&i.amd?i(function(){return a}):this.xor4096=a})(se,n,!1)})(Sa);var nt={},Ea={get exports(){return nt},set exports(n){nt=n}};(function(n){(function(e,t,i){function r(l){var o=this,u="";o.next=function(){var d=o.b,f=o.c,h=o.d,m=o.a;return d=d<<25^d>>>7^f,f=f-h|0,h=h<<24^h>>>8^m,m=m-d|0,o.b=d=d<<20^d>>>12^f,o.c=f=f-h|0,o.d=h<<16^f>>>16^m,o.a=m-d|0},o.a=0,o.b=0,o.c=-1640531527,o.d=1367130551,l===Math.floor(l)?(o.a=l/4294967296|0,o.b=l|0):u+=l;for(var c=0;c<u.length+20;c++)o.b^=u.charCodeAt(c)|0,o.next()}function s(l,o){return o.a=l.a,o.b=l.b,o.c=l.c,o.d=l.d,o}function a(l,o){var u=new r(l),c=o&&o.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var f=u.next()>>>11,h=(u.next()>>>0)/4294967296,m=(f+h)/(1<<21);while(m===0);return m},d.int32=u.next,d.quick=d,c&&(typeof c=="object"&&s(c,u),d.state=function(){return s(u,{})}),d}t&&t.exports?t.exports=a:i&&i.amd?i(function(){return a}):this.tychei=a})(se,n,!1)})(Ea);var it={},_a={get exports(){return it},set exports(n){it=n}};const Ca={},Ta=Object.freeze(Object.defineProperty({__proto__:null,default:Ca},Symbol.toStringTag,{value:"Module"})),Aa=As(Ta);(function(n){(function(e,t,i){var r=256,s=6,a=52,l="random",o=i.pow(r,s),u=i.pow(2,a),c=u*2,d=r-1,f;function h(w,k,_){var T=[];k=k==!0?{entropy:!0}:k||{};var L=x(O(k.entropy?[w,R(t)]:w??A(),3),T),D=new m(T),H=function(){for(var j=D.g(s),W=o,B=0;j<u;)j=(j+B)*r,W*=r,B=D.g(1);for(;j>=c;)j/=2,W/=2,B>>>=1;return(j+B)/W};return H.int32=function(){return D.g(4)|0},H.quick=function(){return D.g(4)/4294967296},H.double=H,x(R(D.S),t),(k.pass||_||function(j,W,B,G){return G&&(G.S&&v(G,D),j.state=function(){return v(D,{})}),B?(i[l]=j,W):j})(H,L,"global"in k?k.global:this==i,k.state)}function m(w){var k,_=w.length,T=this,L=0,D=T.i=T.j=0,H=T.S=[];for(_||(w=[_++]);L<r;)H[L]=L++;for(L=0;L<r;L++)H[L]=H[D=d&D+w[L%_]+(k=H[L])],H[D]=k;(T.g=function(j){for(var W,B=0,G=T.i,_e=T.j,he=T.S;j--;)W=he[G=d&G+1],B=B*r+he[d&(he[G]=he[_e=d&_e+W])+(he[_e]=W)];return T.i=G,T.j=_e,B})(r)}function v(w,k){return k.i=w.i,k.j=w.j,k.S=w.S.slice(),k}function O(w,k){var _=[],T=typeof w,L;if(k&&T=="object")for(L in w)try{_.push(O(w[L],k-1))}catch{}return _.length?_:T=="string"?w:w+"\0"}function x(w,k){for(var _=w+"",T,L=0;L<_.length;)k[d&L]=d&(T^=k[d&L]*19)+_.charCodeAt(L++);return R(k)}function A(){try{var w;return f&&(w=f.randomBytes)?w=w(r):(w=new Uint8Array(r),(e.crypto||e.msCrypto).getRandomValues(w)),R(w)}catch{var k=e.navigator,_=k&&k.plugins;return[+new Date,e,_,e.screen,R(t)]}}function R(w){return String.fromCharCode.apply(0,w)}if(x(i.random(),t),n.exports){n.exports=h;try{f=Aa}catch{}}else i["seed"+l]=h})(typeof self<"u"?self:se,[],Math)})(_a);var La=Qe,za=Ke,Pa=Ye,Oa=et,Ia=tt,Ma=nt,ae=it;ae.alea=La;ae.xor128=za;ae.xorwow=Pa;ae.xorshift7=Oa;ae.xor4096=Ia;ae.tychei=Ma;var Wn=ae;const Zn=Date.now().toString();let ye=Wn(Zn,{state:!0});const Ge=hn(()=>{$("config.random.privateState",ye.state())});function Na(){re({"config.random.privateState":null,"config.random.seed":Zn}),window.addEventListener("state-change",({detail:n})=>{n.name==="config.random.seed"&&(ye=Wn(n.value,{state:!0}))}),C("random.coinFlip",()=>{const n=ye();return Ge(),n>.5}),C("random.fraction",()=>{const n=ye();return Ge(),n});for(const n of[4,5,6,8,10,12,20,25,50,100,1e3])C(`random.d${n}`,()=>{const e=1+Math.round(ye()*(n-1));return Ge(),e})}function Ra(){C("story.name",ht)}function Da(){ga(),ba(),ya(),wa(),Na(),Ra()}function ja(){const n=document.querySelectorAll("tw-storydata");if(n.length===0){console.warn("No <tw-storydata> element was found in HTML.");return}n.length>1&&console.warn("Multiple <tw-storydata> elements were found in HTML. Using the first."),ln(n[0]),fa(),gn(),Object.assign(window,{go:xn,restart:vn}),Yn(),re(Xn),da(),Zs(),Un(),Da(),pa(),cn(),p("config.testing")?Ts():bn()&&yn(),dn(),un()}ja();

</script><style>
:root{--font-monospace: ui-monospace, Menlo, Monaco, "Cascadia Mono", "Segoe UI Mono", "Roboto Mono", "Oxygen Mono", "Ubuntu Monospace", "Source Code Pro", "Fira Mono", "Droid Sans Mono", "Courier New", monospace;--font-system: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen-Sans, Ubuntu, Cantarell, "Helvetica Neue", sans-serif}*{box-sizing:border-box}body{margin:0;padding:0}code{font-family:var(--font-monospace)}img{max-width:100%;height:auto}input[type=text],select{padding:.25em}noscript{align-items:center;background:black;color:#fff;display:flex;height:100vh;font-family:var(--font-system);justify-content:center;width:100vw}pre{font-family:var(--font-monospace);white-space:pre-wrap}tw-storydata{display:none}body.backstage-visible #backdrop{max-width:67vw}backstage-sidebar{--backstage-grid: 10px;background:var(--color-gray-2);border-left:1px solid var(--color-gray-3);bottom:0;color:var(--color-gray-5);display:block;font-family:var(--font-system);font-size:13px;position:fixed;top:0;right:0;width:33vw}backstage-sidebar .content{overflow:auto;padding:var(--backstage-grid);height:100%;width:100%}backstage-sidebar[collapsed]{width:0}backstage-sidebar button[data-toggle-collapsed]{background:var(--color-gray-2);border-bottom:1px solid var(--color-gray-3);border-left:1px solid var(--color-gray-3);border-right:none;border-top:1px solid var(--color-gray-3);border-radius:60px 0 0 60px;color:var(--color-gray-5);font-size:20px;height:60px;min-width:30px;padding:0;position:absolute;top:50%;left:-30px;transform:translateY(-50%);width:30px}backstage-sidebar button[data-toggle-collapsed]:hover{background:var(--color-gray-1);cursor:pointer}backstage-sidebar button{background:var(--color-gray-1);border:1px solid var(--color-gray-3);border-radius:var(--backstage-grid);color:var(--color-gray-5);cursor:pointer;font-size:100%;min-width:40px;padding:calc(var(--backstage-grid) / 2)}backstage-sidebar button:disabled{color:var(--color-gray-3);cursor:not-allowed}backstage-sidebar button:not(:disabled):hover{background:white}backstage-sidebar details summary{cursor:pointer;font-size:110%;font-variant:small-caps;padding:calc(var(--backstage-grid) / 2) 0;text-transform:lowercase}backstage-sidebar input,backstage-sidebar textarea{background:var(--color-gray-1);border:1px solid var(--color-gray-3);color:var(--color-gray-5);font:100% var(--font-system);padding:calc(var(--backstage-grid) / 2)}backstage-sidebar table{max-width:100%;width:100%}backstage-history-table button{display:block;width:100%}backstage-history-table table{border-collapse:collapse;margin:var(--backstage-grid) 0;table-layout:fixed}backstage-history-table thead{height:1px;left:-10000px;overflow:hidden;position:absolute;top:auto;width:1px}backstage-history-table tr:not(:last-child){border-bottom:1px solid var(--oc-gray-8)}backstage-history-table td{text-overflow:ellipsis;overflow-wrap:break-word;padding:calc(var(--backstage-grid) / 2);vertical-align:top}backstage-history-table td:first-child{border-right:1px solid var(--oc-gray-8);width:45%}backstage-notes label{display:block;margin-top:var(--backstage-grid)}backstage-notes textarea{height:10em;margin:var(--backstage-grid) 0;width:100%}backstage-notes .actions{display:flex;gap:var(--backstage-grid)}backstage-notes .actions button{flex-grow:1}backstage-state-snapshots button[data-add-snapshot]{width:100%}backstage-state-snapshots .snapshot-button{display:flex;margin-bottom:var(--backstage-grid)}backstage-state-snapshots .snapshot-button [data-restore]{flex-grow:1;border-right-color:var(--oc-gray-4);border-bottom-right-radius:0;border-top-right-radius:0}backstage-state-snapshots .snapshot-button [data-remove]{border-left:none;border-bottom-left-radius:0;border-top-left-radius:0}backstage-state-variables .variables{display:flex;flex-direction:column;gap:calc(var(--backstage-grid) / 2);margin:calc(var(--backstage-grid)) 0}backstage-state-variables .variables label{align-items:center;display:grid;gap:var(--backstage-grid);grid-template-columns:15em 1fr}backstage-style-config textarea{height:10em;margin:var(--backstage-grid) 0;width:100%}backstage-style-group label{display:grid;gap:.25em;margin-bottom:.5em}backstage-style-theme p{margin:0 0 .5em}backstage-tab{border-left:1px solid var(--color-gray-3);cursor:pointer;flex-grow:1;padding:calc(var(--backstage-grid) / 2);text-align:center}backstage-tab:hover{background:white}backstage-tab:first-child{border-left:none;border-bottom-left-radius:var(--backstage-grid);border-top-left-radius:var(--backstage-grid)}backstage-tab:last-child{border-bottom-right-radius:var(--backstage-grid);border-top-right-radius:var(--backstage-grid)}backstage-tab[aria-selected=true]{background-color:#fff;cursor:default;font-weight:700}backstage-tab-panel{display:block;padding:calc(var(--backstage-grid) / 2) 0}backstage-tab-panel[hidden]{display:none}backstage-tabs{background:var(--color-gray-1);border:1px solid var(--color-gray-3);border-radius:var(--backstage-grid);display:flex}backstage-variable-input input{display:inline-block;width:100%}.fade-in{opacity:0;animation:fade-in 1s ease-out forwards}.fade-out{animation:fade-in 1s ease-out reverse forwards}@keyframes fade-in{0%{opacity:0}to{opacity:1}}#backdrop{align-items:center;background-color:var(--backdrop-color);display:flex;justify-content:center;min-height:100vh}#page>marginal-content[type=footer]{background-color:var(--page-footer-background-color);border-top:var(--page-footer-border);color:var(--page-footer-color);font-family:var(--page-footer-font-family);font-size:var(--page-footer-font-size);font-style:var(--page-footer-font-style);font-variant:var(--page-footer-font-variant);font-weight:var(--page-footer-font-weight);text-decoration:var(--page-footer-text-decoration);text-decoration-color:var(--page-footer-text-decoration-color);text-transform:var(--page-footer-text-transform)}#page>marginal-content[type=footer] .link{background-color:var(--page-footer-link-background-color);color:var(--page-footer-link-color);font-family:var(--page-footer-link-font-family);font-size:var(--page-footer-link-font-size);font-style:var(--page-footer-link-font-style);font-variant:var(--page-footer-link-font-variant);font-weight:var(--page-footer-link-font-weight);text-decoration:var(--page-footer-link-text-decoration);text-decoration-color:var(--page-footer-link-text-decoration-color);text-transform:var(--page-footer-link-text-transform)}#page>marginal-content[type=footer] .link:hover{background-color:var(--page-footer-link-active-background-color);color:var(--page-footer-link-active-color);font-family:var(--page-footer-link-active-font-family);font-size:var(--page-footer-link-active-font-size);font-style:var(--page-footer-link-active-font-style);font-variant:var(--page-footer-link-active-font-variant);font-weight:var(--page-footer-link-active-font-weight);text-decoration:var(--page-footer-link-active-text-decoration);text-decoration-color:var( --page-footer-link-active-text-decoration-color );text-transform:var(--page-footer-link-active-text-transform)}#page>marginal-content[type=header]{background-color:var(--page-header-background-color);border-bottom:1px solid var(--page-footer-borderColor);color:var(--page-header-color);font-family:var(--page-header-font-family);font-size:var(--page-header-font-size);font-style:var(--page-header-font-style);font-variant:var(--page-header-font-variant);font-weight:var(--page-header-font-weight);text-decoration:var(--page-header-text-decoration);text-decoration-color:var(--page-header-text-decoration-color);text-transform:var(--page-header-text-transform)}#page>marginal-content[type=header] .link{background-color:var(--page-header-link-background-color);color:var(--page-header-link-color);font-family:var(--page-header-link-font-family);font-size:var(--page-header-link-font-size);font-style:var(--page-header-link-font-style);font-variant:var(--page-header-link-font-variant);font-weight:var(--page-header-link-font-weight);text-decoration:var(--page-header-link-text-decoration);text-decoration-color:var(--page-header-link-text-decoration-color);text-transform:var(--page-header-link-text-transform)}#page>marginal-content[type=header] .link:hover{background-color:var(--page-header-link-active-background-color);color:var(--page-header-link-active-color);font-family:var(--page-header-link-active-font-family);font-size:var(--page-header-link-active-font-size);font-style:var(--page-header-link-active-font-style);font-variant:var(--page-header-link-active-font-variant);font-weight:var(--page-header-link-active-font-weight);text-decoration:var(--page-header-link-active-text-decoration);text-decoration-color:var( --page-header-link-active-text-decoration-color );text-transform:var(--page-header-link-active-text-transform)}#page{background-color:var(--page-background-color);border:var(--page-border);border-radius:3px;box-shadow:var(--page-box-shadow);color:var(--page-color);display:grid;font-family:var(--page-font-family);font-size:var(--page-font-size);font-style:var(--page-font-style);font-variant:var(--page-font-variant);font-weight:var(--page-font-weight);grid-template-areas:"header" "body" "footer";grid-template-rows:min-content 1fr min-content;line-height:150%;margin:1em;max-width:calc(100vw - 2em);min-height:calc(100vh - 2em);padding:2em 4em;position:relative;text-decoration:var(--page-text-decoration);text-transform:var(--page-text-transform);width:40em}#page hr{border:none}#page hr:after{content:"* \a0* \a0*";display:block;text-align:center}#page page-skip-indicator{position:absolute;bottom:0;right:0}#page .fork p{display:flex;flex-direction:column;width:100%}#page .fork p .link{display:block;flex-grow:1;text-align:center;padding:.5em}#page .fork p .link+.link{border-top:var(--page-fork-divider-size) var(--page-fork-divider-style) var(--page-fork-divider-color)}#page .link{background-color:var(--page-link-background-color);color:var(--page-link-color);cursor:pointer;font-family:var(--page-link-font-family);font-size:var(--page-link-font-size);font-style:var(--page-link-font-style);font-variant:var(--page-link-font-variant);font-weight:var(--page-link-font-weight);text-decoration:var(--page-link-text-decoration);text-decoration-color:var(--page-link-text-decoration-color);text-transform:var(--page-link-text-transform)}#page .link:hover{background-color:var(--page-link-active-background-color);color:var(--page-link-active-color);font-family:var(--page-link-font-family);font-size:var(--page-link-font-size);font-style:var(--page-link-font-style);font-variant:var(--page-link-font-variant);font-weight:var(--page-link-font-weight);text-decoration:var(--page-link-text-decoration);text-decoration-color:var(--page-link-text-decoration-color);text-transform:var(--page-link-text-transform)}#page .small-caps{font-variant:small-caps;text-transform:lowercase}#page>marginal-content[type=footer]{grid-area:footer}#page>marginal-content[type=header]{grid-area:header}#page>body-content{display:flex;flex-direction:column;flex-grow:1;grid-area:body;justify-content:var(--page-current-passage-justify-content)}#page>error-handler{grid-area:body;position:relative;z-index:2}@media screen and (max-width: 768px){#page{margin:0;width:100vw;max-width:100vw;min-height:100vh;padding:1em}}body-content{display:block}error-handler{display:none}error-handler.active{background:var(--color-red-1);color:var(--color-red-5);display:block;font-family:var(--font-system);font-size:max(90%,16px);padding:.5em;border-left:4px solid var(--color-red-2);position:relative;margin:1em 0;overflow:auto}error-handler pre{font-size:90%}error-handler a{color:var(--color-red-4)}error-handler button{appearance:none;background:none;border:none;color:var(--color-red-4);cursor:pointer;padding:0}external-fonts{display:none}marginal-content{display:flex;justify-content:space-between}marginal-content[hidden]{display:none}marginal-content .center{text-align:center}marginal-content .right{text-align:right}page-skip{display:block}page-skip-indicator{background-image:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3e%09%3crect width='38' height='72' x='31' y='14' fill='%23fff' rx='4' /%3e%09%3ccircle cx='50' cy='50' r='28' fill='%23fff' /%3e%09%3crect%09%09width='30'%09%09height='64'%09%09x='35'%09%09y='18'%09%09fill='%23fff'%09%09stroke='%23000'%09%09stroke-width='2'%09%09rx='4'%09/%3e%09%3ccircle%09%09cx='50'%09%09cy='50'%09%09r='20'%09%09fill='%23fff'%09%09stroke='%23000'%09%09stroke-width='2'%09/%3e%09%3cpath%09%09stroke='%23000'%09%09stroke-linecap='round'%09%09stroke-width='2'%09%09d='M50 50V37'%09%3e%09%09%3canimateTransform%09%09%09attributeName='transform'%09%09%09begin='0s'%09%09%09dur='20s'%09%09%09from='0 50 50'%09%09%09repeatCount='indefinite'%09%09%09to='360 50 50'%09%09%09type='rotate'%09%09/%3e%09%3c/path%3e%09%3cpath%09%09stroke='%23000'%09%09stroke-linecap='round'%09%09stroke-width='2'%09%09d='M50 50h-8'%09%3e%09%09%3canimateTransform%09%09%09attributeName='transform'%09%09%09begin='0s'%09%09%09dur='120s'%09%09%09from='0 50 50'%09%09%09repeatCount='indefinite'%09%09%09to='360 50 50'%09%09%09type='rotate'%09%09/%3e%09%3c/path%3e%3c/svg%3e");background-size:contain;display:block;height:50px;opacity:0;pointer-events:none;transition:opacity .3s;width:50px}page-skip-indicator[active]{opacity:1}:root{--oc-white: #ffffff;--oc-white-rgb: 255, 255, 255;--oc-black: #000000;--oc-black-rgb: 0, 0, 0;--oc-gray-0: #f8f9fa;--oc-gray-0-rgb: 248, 249, 250;--oc-gray-1: #f1f3f5;--oc-gray-1-rgb: 241, 243, 245;--oc-gray-2: #e9ecef;--oc-gray-2-rgb: 233, 236, 239;--oc-gray-3: #dee2e6;--oc-gray-3-rgb: 222, 226, 230;--oc-gray-4: #ced4da;--oc-gray-4-rgb: 206, 212, 218;--oc-gray-5: #adb5bd;--oc-gray-5-rgb: 173, 181, 189;--oc-gray-6: #868e96;--oc-gray-6-rgb: 134, 142, 150;--oc-gray-7: #495057;--oc-gray-7-rgb: 73, 80, 87;--oc-gray-8: #343a40;--oc-gray-8-rgb: 52, 58, 64;--oc-gray-9: #212529;--oc-gray-9-rgb: 33, 37, 41;--oc-red-0: #fff5f5;--oc-red-0-rgb: 255, 245, 245;--oc-red-1: #ffe3e3;--oc-red-1-rgb: 255, 227, 227;--oc-red-2: #ffc9c9;--oc-red-2-rgb: 255, 201, 201;--oc-red-3: #ffa8a8;--oc-red-3-rgb: 255, 168, 168;--oc-red-4: #ff8787;--oc-red-4-rgb: 255, 135, 135;--oc-red-5: #ff6b6b;--oc-red-5-rgb: 255, 107, 107;--oc-red-6: #fa5252;--oc-red-6-rgb: 250, 82, 82;--oc-red-7: #f03e3e;--oc-red-7-rgb: 240, 62, 62;--oc-red-8: #e03131;--oc-red-8-rgb: 224, 49, 49;--oc-red-9: #c92a2a;--oc-red-9-rgb: 201, 42, 42;--oc-pink-0: #fff0f6;--oc-pink-0-rgb: 255, 240, 246;--oc-pink-1: #ffdeeb;--oc-pink-1-rgb: 255, 222, 235;--oc-pink-2: #fcc2d7;--oc-pink-2-rgb: 252, 194, 215;--oc-pink-3: #faa2c1;--oc-pink-3-rgb: 250, 162, 193;--oc-pink-4: #f783ac;--oc-pink-4-rgb: 247, 131, 172;--oc-pink-5: #f06595;--oc-pink-5-rgb: 240, 101, 149;--oc-pink-6: #e64980;--oc-pink-6-rgb: 230, 73, 128;--oc-pink-7: #d6336c;--oc-pink-7-rgb: 214, 51, 108;--oc-pink-8: #c2255c;--oc-pink-8-rgb: 194, 37, 92;--oc-pink-9: #a61e4d;--oc-pink-9-rgb: 166, 30, 77;--oc-grape-0: #f8f0fc;--oc-grape-0-rgb: 248, 240, 252;--oc-grape-1: #f3d9fa;--oc-grape-1-rgb: 243, 217, 250;--oc-grape-2: #eebefa;--oc-grape-2-rgb: 238, 190, 250;--oc-grape-3: #e599f7;--oc-grape-3-rgb: 229, 153, 247;--oc-grape-4: #da77f2;--oc-grape-4-rgb: 218, 119, 242;--oc-grape-5: #cc5de8;--oc-grape-5-rgb: 204, 93, 232;--oc-grape-6: #be4bdb;--oc-grape-6-rgb: 190, 75, 219;--oc-grape-7: #ae3ec9;--oc-grape-7-rgb: 174, 62, 201;--oc-grape-8: #9c36b5;--oc-grape-8-rgb: 156, 54, 181;--oc-grape-9: #862e9c;--oc-grape-9-rgb: 134, 46, 156;--oc-violet-0: #f3f0ff;--oc-violet-0-rgb: 243, 240, 255;--oc-violet-1: #e5dbff;--oc-violet-1-rgb: 229, 219, 255;--oc-violet-2: #d0bfff;--oc-violet-2-rgb: 208, 191, 255;--oc-violet-3: #b197fc;--oc-violet-3-rgb: 177, 151, 252;--oc-violet-4: #9775fa;--oc-violet-4-rgb: 151, 117, 250;--oc-violet-5: #845ef7;--oc-violet-5-rgb: 132, 94, 247;--oc-violet-6: #7950f2;--oc-violet-6-rgb: 121, 80, 242;--oc-violet-7: #7048e8;--oc-violet-7-rgb: 112, 72, 232;--oc-violet-8: #6741d9;--oc-violet-8-rgb: 103, 65, 217;--oc-violet-9: #5f3dc4;--oc-violet-9-rgb: 95, 61, 196;--oc-indigo-0: #edf2ff;--oc-indigo-0-rgb: 237, 242, 255;--oc-indigo-1: #dbe4ff;--oc-indigo-1-rgb: 219, 228, 255;--oc-indigo-2: #bac8ff;--oc-indigo-2-rgb: 186, 200, 255;--oc-indigo-3: #91a7ff;--oc-indigo-3-rgb: 145, 167, 255;--oc-indigo-4: #748ffc;--oc-indigo-4-rgb: 116, 143, 252;--oc-indigo-5: #5c7cfa;--oc-indigo-5-rgb: 92, 124, 250;--oc-indigo-6: #4c6ef5;--oc-indigo-6-rgb: 76, 110, 245;--oc-indigo-7: #4263eb;--oc-indigo-7-rgb: 66, 99, 235;--oc-indigo-8: #3b5bdb;--oc-indigo-8-rgb: 59, 91, 219;--oc-indigo-9: #364fc7;--oc-indigo-9-rgb: 54, 79, 199;--oc-blue-0: #e7f5ff;--oc-blue-0-rgb: 231, 245, 255;--oc-blue-1: #d0ebff;--oc-blue-1-rgb: 208, 235, 255;--oc-blue-2: #a5d8ff;--oc-blue-2-rgb: 165, 216, 255;--oc-blue-3: #74c0fc;--oc-blue-3-rgb: 116, 192, 252;--oc-blue-4: #4dabf7;--oc-blue-4-rgb: 77, 171, 247;--oc-blue-5: #339af0;--oc-blue-5-rgb: 51, 154, 240;--oc-blue-6: #228be6;--oc-blue-6-rgb: 34, 139, 230;--oc-blue-7: #1c7ed6;--oc-blue-7-rgb: 28, 126, 214;--oc-blue-8: #1971c2;--oc-blue-8-rgb: 25, 113, 194;--oc-blue-9: #1864ab;--oc-blue-9-rgb: 24, 100, 171;--oc-cyan-0: #e3fafc;--oc-cyan-0-rgb: 227, 250, 252;--oc-cyan-1: #c5f6fa;--oc-cyan-1-rgb: 197, 246, 250;--oc-cyan-2: #99e9f2;--oc-cyan-2-rgb: 153, 233, 242;--oc-cyan-3: #66d9e8;--oc-cyan-3-rgb: 102, 217, 232;--oc-cyan-4: #3bc9db;--oc-cyan-4-rgb: 59, 201, 219;--oc-cyan-5: #22b8cf;--oc-cyan-5-rgb: 34, 184, 207;--oc-cyan-6: #15aabf;--oc-cyan-6-rgb: 21, 170, 191;--oc-cyan-7: #1098ad;--oc-cyan-7-rgb: 16, 152, 173;--oc-cyan-8: #0c8599;--oc-cyan-8-rgb: 12, 133, 153;--oc-cyan-9: #0b7285;--oc-cyan-9-rgb: 11, 114, 133;--oc-teal-0: #e6fcf5;--oc-teal-0-rgb: 230, 252, 245;--oc-teal-1: #c3fae8;--oc-teal-1-rgb: 195, 250, 232;--oc-teal-2: #96f2d7;--oc-teal-2-rgb: 150, 242, 215;--oc-teal-3: #63e6be;--oc-teal-3-rgb: 99, 230, 190;--oc-teal-4: #38d9a9;--oc-teal-4-rgb: 56, 217, 169;--oc-teal-5: #20c997;--oc-teal-5-rgb: 32, 201, 151;--oc-teal-6: #12b886;--oc-teal-6-rgb: 18, 184, 134;--oc-teal-7: #0ca678;--oc-teal-7-rgb: 12, 166, 120;--oc-teal-8: #099268;--oc-teal-8-rgb: 9, 146, 104;--oc-teal-9: #087f5b;--oc-teal-9-rgb: 8, 127, 91;--oc-green-0: #ebfbee;--oc-green-0-rgb: 235, 251, 238;--oc-green-1: #d3f9d8;--oc-green-1-rgb: 211, 249, 216;--oc-green-2: #b2f2bb;--oc-green-2-rgb: 178, 242, 187;--oc-green-3: #8ce99a;--oc-green-3-rgb: 140, 233, 154;--oc-green-4: #69db7c;--oc-green-4-rgb: 105, 219, 124;--oc-green-5: #51cf66;--oc-green-5-rgb: 81, 207, 102;--oc-green-6: #40c057;--oc-green-6-rgb: 64, 192, 87;--oc-green-7: #37b24d;--oc-green-7-rgb: 55, 178, 77;--oc-green-8: #2f9e44;--oc-green-8-rgb: 47, 158, 68;--oc-green-9: #2b8a3e;--oc-green-9-rgb: 43, 138, 62;--oc-lime-0: #f4fce3;--oc-lime-0-rgb: 244, 252, 227;--oc-lime-1: #e9fac8;--oc-lime-1-rgb: 233, 250, 200;--oc-lime-2: #d8f5a2;--oc-lime-2-rgb: 216, 245, 162;--oc-lime-3: #c0eb75;--oc-lime-3-rgb: 192, 235, 117;--oc-lime-4: #a9e34b;--oc-lime-4-rgb: 169, 227, 75;--oc-lime-5: #94d82d;--oc-lime-5-rgb: 148, 216, 45;--oc-lime-6: #82c91e;--oc-lime-6-rgb: 130, 201, 30;--oc-lime-7: #74b816;--oc-lime-7-rgb: 116, 184, 22;--oc-lime-8: #66a80f;--oc-lime-8-rgb: 102, 168, 15;--oc-lime-9: #5c940d;--oc-lime-9-rgb: 92, 148, 13;--oc-yellow-0: #fff9db;--oc-yellow-0-rgb: 255, 249, 219;--oc-yellow-1: #fff3bf;--oc-yellow-1-rgb: 255, 243, 191;--oc-yellow-2: #ffec99;--oc-yellow-2-rgb: 255, 236, 153;--oc-yellow-3: #ffe066;--oc-yellow-3-rgb: 255, 224, 102;--oc-yellow-4: #ffd43b;--oc-yellow-4-rgb: 255, 212, 59;--oc-yellow-5: #fcc419;--oc-yellow-5-rgb: 252, 196, 25;--oc-yellow-6: #fab005;--oc-yellow-6-rgb: 250, 176, 5;--oc-yellow-7: #f59f00;--oc-yellow-7-rgb: 245, 159, 0;--oc-yellow-8: #f08c00;--oc-yellow-8-rgb: 240, 140, 0;--oc-yellow-9: #e67700;--oc-yellow-9-rgb: 230, 119, 0;--oc-orange-0: #fff4e6;--oc-orange-0-rgb: 255, 244, 230;--oc-orange-1: #ffe8cc;--oc-orange-1-rgb: 255, 232, 204;--oc-orange-2: #ffd8a8;--oc-orange-2-rgb: 255, 216, 168;--oc-orange-3: #ffc078;--oc-orange-3-rgb: 255, 192, 120;--oc-orange-4: #ffa94d;--oc-orange-4-rgb: 255, 169, 77;--oc-orange-5: #ff922b;--oc-orange-5-rgb: 255, 146, 43;--oc-orange-6: #fd7e14;--oc-orange-6-rgb: 253, 126, 20;--oc-orange-7: #f76707;--oc-orange-7-rgb: 247, 103, 7;--oc-orange-8: #e8590c;--oc-orange-8-rgb: 232, 89, 12;--oc-orange-9: #d9480f;--oc-orange-9-rgb: 217, 72, 15}/*! reasonable colors v0.4.0 | MIT License | https://github.com/matthewhowell/reasonable-colors */:root{--color-gray-1: #f6f6f6;--color-gray-2: #e2e2e2;--color-gray-3: #8b8b8b;--color-gray-4: #6f6f6f;--color-gray-5: #3e3e3e;--color-gray-6: #222222;--color-rose-1: #fff7f9;--color-rose-2: #ffdce5;--color-rose-3: #ff3b8d;--color-rose-4: #db0072;--color-rose-5: #800040;--color-rose-6: #4c0023;--color-raspberry-1: #fff8f8;--color-raspberry-2: #ffdddf;--color-raspberry-3: #ff426c;--color-raspberry-4: #de0051;--color-raspberry-5: #82002c;--color-raspberry-6: #510018;--color-red-1: #fff8f6;--color-red-2: #ffddd8;--color-red-3: #ff4647;--color-red-4: #e0002b;--color-red-5: #830014;--color-red-6: #530003;--color-orange-1: #fff8f5;--color-orange-2: #ffded1;--color-orange-3: #fd4d00;--color-orange-4: #cd3c00;--color-orange-5: #752100;--color-orange-6: #401600;--color-cinnamon-1: #fff8f3;--color-cinnamon-2: #ffdfc6;--color-cinnamon-3: #d57300;--color-cinnamon-4: #ac5c00;--color-cinnamon-5: #633300;--color-cinnamon-6: #371d00;--color-amber-1: #fff8ef;--color-amber-2: #ffe0b2;--color-amber-3: #b98300;--color-amber-4: #926700;--color-amber-5: #523800;--color-amber-6: #302100;--color-yellow-1: #fff9e5;--color-yellow-2: #ffe53e;--color-yellow-3: #9c8b00;--color-yellow-4: #7d6f00;--color-yellow-5: #463d00;--color-yellow-6: #292300;--color-lime-1: #f7ffac;--color-lime-2: #d5f200;--color-lime-3: #819300;--color-lime-4: #677600;--color-lime-5: #394100;--color-lime-6: #222600;--color-chartreuse-1: #e5ffc3;--color-chartreuse-2: #98fb00;--color-chartreuse-3: #5c9b00;--color-chartreuse-4: #497c00;--color-chartreuse-5: #264500;--color-chartreuse-6: #182600;--color-green-1: #e0ffd9;--color-green-2: #72ff6c;--color-green-3: #00a21f;--color-green-4: #008217;--color-green-5: #004908;--color-green-6: #062800;--color-emerald-1: #dcffe6;--color-emerald-2: #5dffa2;--color-emerald-3: #00a05a;--color-emerald-4: #008147;--color-emerald-5: #004825;--color-emerald-6: #002812;--color-aquamarine-1: #daffef;--color-aquamarine-2: #42ffc6;--color-aquamarine-3: #009f78;--color-aquamarine-4: #007f5f;--color-aquamarine-5: #004734;--color-aquamarine-6: #00281b;--color-teal-1: #d7fff7;--color-teal-2: #00ffe4;--color-teal-3: #009e8c;--color-teal-4: #007c6e;--color-teal-5: #00443c;--color-teal-6: #002722;--color-cyan-1: #c4fffe;--color-cyan-2: #00fafb;--color-cyan-3: #00999a;--color-cyan-4: #007a7b;--color-cyan-5: #004344;--color-cyan-6: #002525;--color-powder-1: #dafaff;--color-powder-2: #8df0ff;--color-powder-3: #0098a9;--color-powder-4: #007987;--color-powder-5: #004048;--color-powder-6: #002227;--color-sky-1: #e3f7ff;--color-sky-2: #aee9ff;--color-sky-3: #0094b4;--color-sky-4: #007590;--color-sky-5: #00404f;--color-sky-6: #001f28;--color-cerulean-1: #e8f6ff;--color-cerulean-2: #b9e3ff;--color-cerulean-3: #0092c5;--color-cerulean-4: #00749d;--color-cerulean-5: #003c54;--color-cerulean-6: #001d2a;--color-azure-1: #e8f2ff;--color-azure-2: #c6e0ff;--color-azure-3: #008fdb;--color-azure-4: #0071af;--color-azure-5: #003b5e;--color-azure-6: #001c30;--color-blue-1: #f0f4ff;--color-blue-2: #d4e0ff;--color-blue-3: #0089fc;--color-blue-4: #006dca;--color-blue-5: #00386d;--color-blue-6: #001a39;--color-indigo-1: #f3f3ff;--color-indigo-2: #deddff;--color-indigo-3: #657eff;--color-indigo-4: #0061fc;--color-indigo-5: #00328a;--color-indigo-6: #001649;--color-violet-1: #f7f1ff;--color-violet-2: #e8daff;--color-violet-3: #9b70ff;--color-violet-4: #794aff;--color-violet-5: #2d0fbf;--color-violet-6: #0b0074;--color-purple-1: #fdf4ff;--color-purple-2: #f7d9ff;--color-purple-3: #d150ff;--color-purple-4: #b01fe3;--color-purple-5: #660087;--color-purple-6: #3a004f;--color-magenta-1: #fff3fc;--color-magenta-2: #ffd7f6;--color-magenta-3: #f911e0;--color-magenta-4: #ca00b6;--color-magenta-5: #740068;--color-magenta-6: #44003c;--color-pink-1: #fff7fb;--color-pink-2: #ffdcec;--color-pink-3: #ff2fb2;--color-pink-4: #d2008f;--color-pink-5: #790051;--color-pink-6: #4b0030}warning-list{background:var(--color-yellow-1);border-left:4px solid var(--color-yellow-2);color:var(--color-yellow-4);display:block;font-family:var(--font-system);padding:.5em}warning-list[hidden]{display:none}warning-list ul{list-style-type:none;margin:0;padding-left:0}inline-button{cursor:pointer}

</style></head><body><state-css-variables><state-dark-theme-css-overrides><div id="backdrop"><page-skip><div id="page" aria-live="polite"><marginal-content role="banner" type="header"></marginal-content><body-content role="main"></body-content><warning-list></warning-list><marginal-content role="contentinfo" type="footer"></marginal-content><error-handler></error-handler><page-skip-indicator></page-skip-indicator></div></page-skip></div></state-dark-theme-css-overrides></state-css-variables><external-fonts></external-fonts><noscript>This requires JavaScript.</noscript></body><tw-storydata name="보물 상자 하나 잘못 열었다가" startnode="1" creator="Twine" creator-version="2.9.0" format="Chapbook" format-version="2.1.0" ifid="9DF4CD44-AD4E-43F3-BA5B-C72C6F24759D" options="" tags="" zoom="1" hidden><style role="stylesheet" id="twine-user-stylesheet" type="text/twine-css"></style><script role="script" id="twine-user-script" type="text/twine-javascript"></script><tw-passagedata pid="1" name="0. 시작" tags="" position="100,100" size="100,100">**당**신은 보물 상자 하나 잘못 열었다가 차원의 틈새로 빨려 들어가 아라카와 함께 낯선 던전을 탐험하게 됩니다.

&lt;br/&gt;

&lt;div style=&quot;text-align: right&quot;&gt; 빙긋 웃는 거동수상자 &lt;/div&gt;

&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;

-----

&lt;br/&gt;

&lt;center&gt;{link to: &#39;0. 읽는 방법&#39;, label: &#39;시작하기&#39;}&lt;center&gt;

&lt;br/&gt;</tw-passagedata><tw-passagedata pid="2" name="0. 읽는 방법" tags="" position="200,100" size="100,100">☞ 이 기호는 **자유로운 선택**을 할 수 있는 상황을 뜻합니다. 각각의 행동을 굳이 해도 되고 안 해도 됩니다. 

&lt;br/&gt;

◆◇ 이 기호는 **양자택일**해야 하는 상황을 뜻합니다. 둘 중에 하나만을 골라야 하며, 그렇게 하면 나머지 행동은 할 수 없습니다.

&lt;br/&gt;

행동에 의한 결과로 아라카의 &lt;span style=&quot;color:red&quot;&gt;[HP]&lt;/span&gt;가 깎이는 경우가 있습니다. 진행하면서 깎인 아라카의 총 HP를 합산해 주세요. 아쉽게도 자동으로 계산되지 않기 때문에 수동으로 기록하면서 진행하셔야 합니다.

&lt;br/&gt;

-----

&lt;br/&gt;

&lt;center&gt; {link to: &#39;1. 각성&#39;, label: &#39;진짜 시작하기&#39;}&lt;center&gt;

&lt;br/&gt;</tw-passagedata><tw-passagedata pid="3" name="1. 각성" tags="" position="200,200" size="100,100"># 1. 각성

&lt;br/&gt;

낯선 바닥이다. 정신을 차리고 보니 당신의 몸은 바닥에 엎드린 자세로 널브러져 있다. 당신은 천천히 몸을 일으킨다.

&lt;br/&gt;
&lt;br/&gt;

☞ {reveal link: &#39;무슨 일이 있었는지 떠올려본다.&#39;, passage: &#39;53&#39;}

&lt;br/&gt;

☞ {reveal link: &#39;주변을 살핀다.&#39;, passage: &#39;22&#39;}

&lt;br/&gt;

☞ {reveal link: &#39;자신의 상태를 점검한다.&#39;, passage: &#39;32&#39;} 

-----

&lt;br/&gt;

&lt;center&gt; {link to: &#39;1. 기척&#39;, label: &#39;계속하기&#39;}&lt;center&gt;

&lt;br/&gt;
</tw-passagedata><tw-passagedata pid="4" name="53" tags="" position="750,350" size="100,100">무슨 일이 있었는지 떠올려본다. 
&lt;br/&gt;
당신은 당신이 살던 세계에서 여느 때와 다름없이 평온함과는 거리가 먼 파란만장한 일상을 보내던 중, 웬 보물 상자를 발견했다. ‘이런 곳에 왜 보물 상자가?’라는 생각이 절로 들 정도로 의아한 장소였다. 보물 상자를 열었을 때, 그 안에서 왜곡된 공간이라고 불러야 할 것 같은 무언가가 나타났다. 구멍 같기도 하고 아지랑이 같기도 한 그것은 주변 풍경과 이질적인 기운을 내뿜고 있었다. 당신이 그것을 들여다본 순간 당신은 그 안에 집어 삼켜지는 느낌을 받았고, 정신이 아득해졌던 것이 마지막 기억이다.</tw-passagedata><tw-passagedata pid="5" name="22" tags="" position="700,200" size="100,100">주변을 살핀다. 
&lt;br/&gt;
주위를 둘러본다면, 어두운 곳이지만 빛이 아예 없는 것은 아니고, 높은 벽에 띄엄띄엄 붙어 있는 횃불 같은 것이 은은하게 타오르고 있어 벽과 천장을 알아볼 정도는 된다는 것을 알 수 있다. 소리를 내 보면, 고요하던 공간에 사방에서 소리가 울리는 것처럼 들린다. 어딘가에서 미미하게 바람이 통하는 듯도 하다. 굉장히 넓은 동굴, 어쩌면 건축물 같은 장소. 당신이 어떤 지하 유적에 가 본 경험이 있다면 그런 곳과 비슷하다는 인상을 받을 것이다.</tw-passagedata><tw-passagedata pid="6" name="32" tags="" position="700,250" size="100,100">자신의 상태를 점검한다.
&lt;br/&gt;
차가운 바닥에 얼마나 기절해 있었던 것인지, 몸이 찌뿌듯하긴 하지만 특별히 상처를 입었다는 느낌은 들지 않는다. 자신이 뭐 하던 사람인지에 대한 기억은 물론, 평소 싸울 때 쓰던 무기나 지식 같은 것도 그대로 가지고 있다.</tw-passagedata><tw-passagedata pid="7" name="1. 기척" tags="" position="200,225" size="100,100">당신은 이윽고 가까운 곳에서 웬 생명의 기척을 알아차린다.

&lt;br/&gt;
&lt;br/&gt;

☞ {reveal link: &#39;가까이 다가가 본다.&#39;, passage: &#39;40&#39;}

&lt;br/&gt;

☞ {reveal link: &#39; 말을 걸어 본다.&#39;, passage: &#39;26&#39;}

&lt;br/&gt;

☞ {reveal link: &#39;공격한다.&#39;, passage: &#39;60&#39;}

-----

&lt;br/&gt;

&lt;center&gt; {link to: &#39;1. 동료&#39;, label: &#39;계속하기&#39;}&lt;center&gt;

&lt;br/&gt;
</tw-passagedata><tw-passagedata pid="8" name="40" tags="" position="600,300" size="100,100">가까이 다가가 본다.
&lt;br/&gt;
한쪽 바닥에 길쭉한 것이 고른 숨소리를 내며 누워 있다. 혹시 위험한 생물일까? 아니면 당신과 마찬가지로 다른 곳에서 이곳으로 전이되어 온 사람일까?</tw-passagedata><tw-passagedata pid="9" name="26" tags="" position="900,200" size="100,100">말을 걸어 본다.
&lt;br/&gt;
곧바로 또랑또랑한 목소리가 들려 온다. &quot;아, 이제야 정신을 차렸나 보구먼? 나도 아마 아까 깨어났는데, 그냥 여기가 편하길래 좀 더 누워 있었다네. 지금도 그렇고 말일세.&quot;</tw-passagedata><tw-passagedata pid="10" name="60" tags="" position="600,400" size="100,100">공격한다.
&lt;br/&gt;
&quot;아야, 아야. 나는 이미 일어나 있던 몸이니 그렇게 격정적으로 깨우지 않아도 괜찮다네! 일어났다가 다시 누운 거니 말일세!&quot; &lt;span style=&quot;color:red&quot;&gt;
&lt;br/&gt;
[아라카 HP -5]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="11" name="1. 동료" tags="" position="200,250" size="100,100">바닥에 누워 있던 것은 당신도 아는 존재로, 당신이 내켜 했든 그렇지 않았든 자그마치 혼돈에 맞서 함께 싸운 동료들 중 한 명이다. 당신의 기억력이 좋다면 이름은 아라카, 전투 방식은 몽크, 그 외에도 평소 영 못 미더운 발언이나 행동을 해 왔다는 사실을 곧잘 기억해낼 수 있을지도 모른다. 하지만 어쩌면 그에게 사실 당신에게 인상을 줄 만한 존재감이 없었거나, 그 싸움 뒤로 이런저런 일이 많이 생기는 바람에 그에 대한 당신의 기억이 흐려져 있을 가능성도 없지는 않다.

&lt;br/&gt;
&lt;br/&gt;

☞ {reveal link: &#39;누구냐고 묻는다.&#39;, passage: &#39;44&#39;}

&lt;br/&gt;

☞ {reveal link: &#39;아라카 맞느냐고 묻는다.&#39;, passage: &#39;19&#39;}

&lt;br/&gt;

☞ {reveal link: &#39;당신의 이름을 대며, 그와 당신이 만난 적 있음을 이야기한다.&#39;, passage: &#39;39&#39;}

-----

&lt;br/&gt;

&lt;center&gt; {link to: &#39;1. 질문&#39;, label: &#39;계속하기&#39;}&lt;center&gt;

&lt;br/&gt;
</tw-passagedata><tw-passagedata pid="12" name="44" tags="" position="800,300" size="100,100">누구냐고 묻는다.
&lt;br/&gt;
&quot;신경 쓰지 말게나. 지나가던, 아니지, 여기 누워 있던…. 음, 몽크 비슷한 거라네. 자네도 한가하면 옆에 눕게나. 엎드려 있는 것보다 훨씬 편하다네. 자갈 같은 것도 있으니 배기지 않게 조심하고.&quot;</tw-passagedata><tw-passagedata pid="13" name="19" tags="" position="1050,100" size="100,100">아라카 맞느냐고 묻는다. 
&lt;br/&gt;
&quot;나를 안다고? 이거 참 영광이구먼. 역시 유머집을 만들기로 한 게 잘했던 일인 것 같네. 이렇게 알아봐 주는 사람이 많으니 말일세. 아직 발간은 못 했네만.&quot; 그는 작게 속삭이듯 덧붙인다. &quot;책이란 게 원래 하루아침에 나올 수 있는 게 아니지 않나. 그 작자가 돈을 떼어먹은 게 아니면 좋겠구먼.&quot;</tw-passagedata><tw-passagedata pid="14" name="39" tags="" position="1050,250" size="100,100">당신의 이름을 대며, 그와 당신이 만난 적 있음을 이야기한다. 
&lt;br/&gt;
&quot;오? 난 또 누구라고. 우리가 참 보통 사이가 아니지 않은가. 생사고락을 함께했으니 말일세. 자네는 그, 체력이 떨어지면 포션을 즐겨 사용하는 편이지? 추울 때는 따뜻한 곳에 있기를 좋아하고? 이것 보게나. 나도 다 기억하고 있다네.&quot;</tw-passagedata><tw-passagedata pid="15" name="1. 질문" tags="" position="200,275" size="100,100">당신은 그에게 본격적으로 묻고 싶은 것이 있을지도 모른다.

&lt;br/&gt;
&lt;br/&gt;

☞ {reveal link: &#39;자신이 이곳에 오기 직전에 봤던 그 공간 왜곡 현상에 관해 묻는다. &#39;, passage: &#39;21&#39;}

&lt;br/&gt;

☞ {reveal link: &#39;그에게 여기서 뭘 하고 있었는지, 혹은 언제부터 있었는지 묻는다.&#39;, passage: &#39;48&#39;} 

&lt;br/&gt;

☞ {reveal link: &#39;이곳이 어디인지 묻는다.&#39;, passage: &#39;59&#39;}

-----

&lt;br/&gt;

&lt;center&gt; {link to: &#39;1. 탐색&#39;, label: &#39;계속하기&#39;}&lt;center&gt;

&lt;br/&gt;
</tw-passagedata><tw-passagedata pid="16" name="21" tags="" position="650,200" size="100,100">자신이 이곳에 오기 직전에 봤던 그 공간 왜곡 현상에 관해 묻는다.
&lt;br/&gt;
&quot;아, 그거? 마법의 일종 아니겠나? 아니면 차원의 틈새? 아니면 입으로 모든 걸 빨아들이는 마물의 소행일지도 모르겠구먼.&quot;</tw-passagedata><tw-passagedata pid="17" name="48" tags="" position="1000,300" size="100,100">그에게 여기서 뭘 하고 있었는지, 혹은 언제부터 있었는지 묻는다. 
&lt;br/&gt;
&quot;나 말인가? 그냥 원래부터 여기 누워 있었다네. 원래가 정확히 언제부터였냐면, 어어, 어제였던 거 같기도 하고 한 달 전이었던 것 같기도 한 느낌이구먼. 중요한 건 내가 자네보다 먼저 와 있었다는 사실 아니겠나! 내가 선배일세!&quot;</tw-passagedata><tw-passagedata pid="18" name="59" tags="" position="1050,350" size="100,100">이곳이 어디인지 묻는다.
&lt;br/&gt;
“아는 곳 같기도 하고 모르는 곳 같기도 하다네! 나도 처음에 길 같은 걸 찾아보려고 했네만, 글쎄 별로 마주치고 싶지 않은 마물이 돌아다니고 있지 뭔가. 그래서 그냥 원래 자리로 돌아왔다네. 그래도 여기까진 안 오는 모양이더구먼. 의외로 여기가 썩 괜찮은 터라네. 마음만 먹으면 텐트도 칠 수 있을 거 같지 않나!”</tw-passagedata><tw-passagedata pid="19" name="1. 탐색" tags="" position="200,300" size="100,100">어찌 됐건 당신은 이런 곳에서 계속 지내고 싶은 마음은 들지 않을 가능성이 높다. 그렇기에 원래 있던 곳으로 돌아갈 방법, 또는 적어도 이것보다는 더 쾌적한 환경을 찾아 나서고 싶어질 만하다.

&lt;br/&gt;

&quot;먼저 와서 둘러 본 선배로서 말해 주자면, 여기엔 통로가 두 개 있다네! 하나는 저쪽에 있는데, 마물이 돌아다니지 뭔가. 하나는 이쪽에 있는데, 문으로 막혀 있다네. 힘으로 밀어도 꿈쩍하지 않았지. 어차피 잠가 둘 거면 왜 문으로 만들었는지 궁금하지 않은가? 그냥 처음부터 벽으로 만들 일이지.&quot;

&lt;br/&gt;
&lt;br/&gt;

☞ {reveal link: &#39;문을 보러 간다.&#39;, passage: &#39;37&#39;} 

&lt;br/&gt;

☞ {reveal link: &#39;통로를 보러 간다.&#39;, passage: &#39;18&#39;}

-----

&lt;br/&gt;

&lt;center&gt; {link to: &#39;2. 사투&#39;, label: &#39;계속하기&#39;}&lt;center&gt;

&lt;br/&gt;
</tw-passagedata><tw-passagedata pid="20" name="37" tags="" position="950,250" size="100,100">문을 보러 간다. 
&lt;br/&gt;
좌우 대칭으로 화려한 장식이 조각되어 있어 웅장한 분위기를 풍기는 돌문이다. 가운데에 둥근 구멍, 아니 홈 같은 것이 패여 있다. 아라카의 말대로 밀어서는 움직일 기미가 보이지 않는다. 홈에 끼워 볼 열쇠 같은 것을 찾아보려고 한다면, 적어도 이 부근에는 적당한 물체가 보이지 않는다.</tw-passagedata><tw-passagedata pid="21" name="18" tags="" position="1000,100" size="100,100">통로를 보러 간다. 
&lt;br/&gt;
일직선으로 뚫린 통로. 언뜻 보기에는 아무것도 보이지 않는다. 통로 끝 꺾이는 지점 너머에서 소리가 들려 온다. 적어도 발이 두 개 달린 무언가가 성큼성큼 걸어 다니는 소리다. 발소리는 작아졌다 가까워졌다 하며, 그 무언가가 통로 너머에서 서성이고 있음을 알려준다. 아라카는 목소리를 낮추며 말한다. &quot;쭉 여기 있어 봤는데, 다행히 이쪽으로는 오지 않는 모양이더구먼.&quot;</tw-passagedata><tw-passagedata pid="22" name="2. 사투" tags="" position="200,425" size="100,100"># 2. 사투

&lt;br/&gt;

문 쪽은 막혀 있기에, 어찌 됐든 선택지는 마물이 있는 통로밖에 없다는 것이 현 실정이다.
&lt;br/&gt;

&quot;흠, 어떻게 하는 것이 좋을런가? 일단 덤벼 보고 영 아니다 싶으면 미안하다고 사과하고 조용히 돌아가는 것도 괜찮을 거라네.&quot;
&lt;br/&gt;

그 마물은 아직 벽 뒤의 그늘에 숨어 있는 당신들을 눈치채지 못했다. 덜걱거리는 소리를 내며 통로를 배회하고 있는 것은 인간과 같은 형체를 유지한 채로 움직이는 뼈, 그런데 한 손에 칼을 가지고 있는. 따라서 굳이 이름을 붙인다면 스켈레톤 병사라고 할 수 있겠다. 통로 저편에는 이어지는 길이 있다. 스켈레톤 병사는 뚜렷한 목적지 없이 정해진 길을 그저 왕복하고 있을 뿐이다. 어쩌면 상대하지 않고 몰래 지나가는 것도 가능해 보인다.

&lt;br/&gt;
&lt;br/&gt;

◆ {link to: &#39;24&#39;, label: &#39;먼저 공격해서 처치하자고 한다.&#39;}

&lt;br/&gt;

◇ {link to: &#39;33&#39;, label: &#39;눈에 띄지 않도록 피해서 가 보자고 한다.&#39;}

&lt;br/&gt;
&lt;br/&gt;</tw-passagedata><tw-passagedata pid="23" name="24" tags="" position="800,200" size="100,100">◆ 먼저 공격해서 처치하자고 한다.

&lt;br/&gt;

 &quot;자네, 제법 호기롭구먼. 알겠네. 여차하면 나는 먼저 도망칠 테니, 나만 믿고 잘 따라오게나.&quot; 
&lt;br/&gt;
 
 당신은 스켈레톤을 공격한다. 아라카도 그럴싸한 전투태세를 취하고는 손과 발을 이용해서 되는 대로 타격한다. 스켈레톤은 칼을 쥐고 휘둘러 보지만 두 명을 동시에 상대하기에는 역부족인지 맥도 못 춘다. 마침내 다리뼈의 연결부가 부서지는 것을 시작으로 스켈레톤은 땅으로 무너져 내린다. 
&lt;br/&gt;
 
 &quot;에잇, 에잇.&quot; 아라카는 과장된 기합 소리를 내며 이미 다 바스러져 움직이지도 않는 뼈 더미를 발길질로 열심히 부순다. 
 
&lt;br/&gt;
&lt;span style=&quot;color:red&quot;&gt;  [아라카 HP -1] &lt;/span&gt;

-----
&lt;br/&gt;

&lt;center&gt; {link to: &#39;2. 던전&#39;, label: &#39;계속하기&#39;}&lt;center&gt;

&lt;br/&gt;
</tw-passagedata><tw-passagedata pid="24" name="33" tags="" position="750,250" size="100,100">◇ 눈에 띄지 않도록 피해서 가 보자고 한다. 

&lt;br/&gt;

&quot;자네, 제법 머리를 쓸 줄 아는구먼. 알겠네. 여차하면 나는 먼저 앞으로 도망칠 테니 자네가 시간을 좀 벌어 주게나.&quot; 
&lt;br/&gt;

당신과 아라카는 한쪽 벽에 바짝 붙어서 스켈레톤이 등을 돌리고 있는 사이에 조심스레 나아간다. 그리고는 모퉁이에 멈춰 서서 스켈레톤이 이쪽을 발견하지 않고 반대쪽으로 돌아가기를 숨죽여 기다린다. 스켈레톤이 돌아선 순간, 당신과 아라카는 잰걸음으로 움직인다.
&lt;br/&gt;

-----
&lt;br/&gt;

&lt;center&gt; {link to: &#39;2. 던전&#39;, label: &#39;계속하기&#39;}&lt;center&gt;

&lt;br/&gt;
</tw-passagedata><tw-passagedata pid="25" name="2. 던전" tags="" position="200,450" size="100,100">&quot;여기까지 와 본 건 처음이라네. 이제부터는 뭐가 있을지 전혀 모르겠구먼. 보통 이런 데에는 어떤 것들이 있더라? 전에도 이 비슷한 느낌이 드는 곳에 가 본 적이 있는 것도 같은데 말일세. 자네는 혹시 아는가?&quot;

&lt;br/&gt;
&lt;br/&gt;

☞ {reveal link: &#39;더 많은 마물이 있을 거라고 말한다.&#39;, passage: &#39;41&#39;}

&lt;br/&gt;

☞ {reveal link: &#39;보물 상자가 있을지 모른다고 말한다.&#39;, passage: &#39;15&#39;}

&lt;br/&gt;

☞ {reveal link: &#39;뭐가 됐든 나가는 길이나 찾자고 말한다.&#39;, passage: &#39;49&#39;}

-----

&lt;br/&gt;

&lt;center&gt; {link to: &#39;2. 통로&#39;, label: &#39;계속하기&#39;}&lt;center&gt;

&lt;br/&gt;
</tw-passagedata><tw-passagedata pid="26" name="41" tags="" position="650,300" size="100,100">더 많은 마물이 있을 거라고 말한다.
&lt;br/&gt;
&quot;그거 불길하구먼. 기왕 마물이 있을 거라면 눈이 초롱초롱한 개구리나 날개 달린 고양이가 있으면 좋겠다네. 그렇게 덩치가 작은 것들은 귀엽다며 인기가 있지 않겠나. 데리고 나가서 한탕 해보는 걸세. 아, 하지만 작다고 다 되는 건 아니라네. 전에 한 번 동그랗고 작은 마물을 주워서 키운 적이 있었는데, 너무 키우니까 터져 버리더구먼. 어찌나 뜨겁던지 내가 아직까지도 기억한다네.&quot;</tw-passagedata><tw-passagedata pid="27" name="15" tags="" position="850,150" size="100,100">보물 상자가 있을지 모른다고 말한다
&lt;br&gt;
&quot;그거 괜찮겠구먼. 발견하면 안에 들어 있는 걸 우리끼리 잘 나눠 가지도록 하세. 팔아치워서 한탕 해봐야 하지 않겠나. 나는 무기든 포션이든 가리는 거 없어서 말일세. 예를 들면 포션 중에도 굉장한 게 있다네. 전에 한 번 처음 보는 포션을 주운 적이 있었는데, 목이 말라서 물 대신에 그걸 마셨더니 3일 내내 가만히 드러누워서 움직이지 않아도 될 정도로 몸이 팔팔해지지 뭔가. 어찌나 내 몸이 내 몸 같지 않았던지 내가 아직까지도 기억한다네.&quot;</tw-passagedata><tw-passagedata pid="28" name="49" tags="" position="1050,300" size="100,100">뭐가 됐든 나가는 길이나 찾자고 말한다.
&lt;br&gt;
&quot;혹시 못 나가더라도 실망하지는 말게. 지내다 보면 처음 있던 방도 그렇게 나쁘진 않다는 걸 알게 될 거거든. 바닥 있고, 지붕 있고, 축축하지도 않고, 덥지도 춥지도 않고 무엇보다 내가 있으니 말일세.&quot;</tw-passagedata><tw-passagedata pid="29" name="2. 통로" tags="" position="200,475" size="100,100">당신은 아라카와 함께 통로를 따라 걸어가 본다. 곧은 길이 얼마쯤 이어지더니 갈림길이 나타난다. 양쪽으로 갈라진 통로는 겉보기에 큰 차이가 없다

&lt;br/&gt;
&lt;br/&gt;

◆ {link to: &#39;63&#39;, label: &#39;한쪽 길로 함께 간다.&#39;}

&lt;br/&gt;

◇ {link to: &#39;35&#39;, label: &#39;양쪽으로 각자 찢어진다.&#39;}

&lt;br/&gt;</tw-passagedata><tw-passagedata pid="30" name="63" tags="" position="750,400" size="100,100">◆ 한쪽 길로 함께 간다. 

&lt;br/&gt;

어쩐지 당신이 앞서서 걷고 아라카는 두어 발짝 뒤에 바짝 붙어서 따라 걷는 상태가 된다. 
&lt;br/&gt;

&quot;내가 여기 길을 잘 몰라서 말일세. 자신 있게 나섰다가 길을 잃기라도 하면 큰일이지 않겠나! 딱히 마물과 먼저 마주치고 싶지 않아서 그런 건 아니라네. 대신 뒤쪽은 내가 맡을 테니 나만 믿고 앞장서게나.&quot; 
&lt;br/&gt;

당신이 궁금해하든 그렇지 않든 아라카는 이유를 알아서 주절댄다. 그렇게 얼마간 이어지는 통로릎 따라 걷는데, 별안간 당신 뒤에서 심상치 않은 소리가 들려 온다. 
&lt;br/&gt;

&quot;이게 뭔가! 갑자기 나타나면 손도 못 쓰고 당하게 되잖나!&quot; 
&lt;br/&gt;

뒤를 돌아보자 거대한 거미 마물이 아라카를 붙잡아 거꾸로 매달고 있다.
&lt;br/&gt;

&quot;살려주게! 자네만 믿고 있으려다가 그만 방심했지 뭔가!&quot;
&lt;br/&gt;

&lt;span style=&quot;color:red&quot;&gt; [아라카 HP -2]&lt;/span&gt;

&lt;br/&gt;

-----

&lt;br/&gt;

&lt;center&gt; {link to: &#39;2. 거미&#39;, label: &#39;계속하기&#39;}&lt;center&gt;

&lt;br/&gt;


</tw-passagedata><tw-passagedata pid="31" name="2. 거미" tags="" position="200,500" size="100,100">거미 마물은 아라카에 이어 당신을 향한 적의를 드러낸다. 당신은 아라카와 함께 거미와 대치한다. 거미는 스켈레톤보다는 튼튼한 데다 거미줄을 쏘아 대기는 하지만 다행스럽게도 그다지 위협적이지는 않다. 거미는 금세 고꾸라져 움직이지 않게 된다.

&lt;br/&gt;
&lt;br/&gt;

☞ {reveal link: &#39;아라카에게 괜찮냐고 물어본다.&#39;, passage: &#39;20&#39;} 

&lt;br/&gt;

☞ {reveal link: &#39;경계를 늦추지 말라고 주의를 시킨다.&#39;, passage: &#39;51&#39;}

-----

&lt;br/&gt;

&lt;center&gt; {link to: &#39;2. 의자&#39;, label: &#39;계속하기&#39;}&lt;center&gt;

&lt;br/&gt;

</tw-passagedata><tw-passagedata pid="32" name="35" tags="" position="850,250" size="100,100">◇ 양쪽으로 각자 찢어진다.

&lt;br/&gt;

당신은 아라카와 헤어져 서로 반대쪽 길로 간다. 
&lt;br/&gt;

이쪽 길에 특별한 것은 없는지 마물의 기척은 느껴지지 않고 먼지 덮인 밋밋한 벽과 바닥만이 이어진다. 그러다 다시 갈림길이 나타나는데, 한쪽 길에서 범상치 않은 발소리가 점점 가까워지는 것이 들린다. 무언가가 다가온다는 직감에 당신은 전투태세를 갖추고 길 너머의 소리에 귀를 기울인다. 
&lt;br/&gt;

이윽고 어둠 사이에서 모습을 드러낸 것은 다름 아닌 아라카다. 
&lt;br/&gt;

&quot;아이고 깜짝이야. 이런 데서 우연히 마주치다니 반갑구먼?&quot;
&lt;br/&gt;

그 뒤로 발 8개가 내는 발소리와 함께 검은 그림자가 드리운다. 거대한 거미 마물이 아라카를 바짝 뒤쫓고 있다.
&lt;br/&gt;

&quot;이건 자네가 나를 버리고 가서 내가 새로 구한 동행이라네.&quot; 
&lt;br/&gt;

아라카는 당신을 향해 달려오며 거미를 가리킨다. 거미는 동행하기보다는 아라카를 잡아 족치고 싶어하는 것으로 보인다.

&lt;br&gt;

-----

&lt;br/&gt;

&lt;center&gt; {link to: &#39;2. 거미&#39;, label: &#39;계속하기&#39;}&lt;center&gt;

&lt;br/&gt;


</tw-passagedata><tw-passagedata pid="33" name="20" tags="" position="600,200" size="100,100">아라카에게 괜찮냐고 물어본다.
&lt;br/&gt;
&quot;나야 무사하다네! 살짝 긁혀서 기억을 조금 잃었을 수도 있겠네만, 무슨 기억을 잃었는지도 모르겠으니 상관없겠지. 아마도 어제 먹은 저녁 메뉴 같은, 별거 아닐 거라네.&quot;</tw-passagedata><tw-passagedata pid="34" name="51" tags="" position="650,350" size="100,100">경계를 늦추지 말라고 주의를 시킨다.
&lt;br/&gt;
&quot;내가 또 경계심 빼면 동상 아니겠나!&quot; 아라카는 대충 동상이 취할 만한 자세를 취해 보인다. 그러다 손을 위로 뻗는 과정에서 공중에 걸쳐져 있던 거미줄을 건드린다. 거미줄에 걸려 있던 크고 작은 벌레 사체들이 후두두 떨어져 내린다. 아라카는 태연하게 거미줄과 벌레를 털어낸다.</tw-passagedata><tw-passagedata pid="35" name="2. 의자" tags="" position="200,525" size="100,100">결국, 갈림길은 다시 하나로 합쳐지는 구조였다. 당신과 아라카는 길을 따라 조금 더 들어가 본다. 길이 끝나는 지점에 방처럼 막힌 장소가 나타난다. 방 한복판에는 들어온 이를 반기듯 돌로 된 길쭉한 구조물이 서 있다. 
&lt;br/&gt;

&quot;오호, 이건, 의자인가? 여기까지 고생해서 왔으니 앉아서 쉬라는 의미인가 보구먼.&quot;
&lt;br/&gt;

당신은 그 구조물이 의자가 아니라는 것을 장담할 수 있다. 아래에서 위로 갈수록 점점 좁아지는 형태이고, 아라카 기준으로 허리께에 달하는 높이이기에 무턱대고 앉는다고 해서 피로가 가실만한 생김새가 전혀 아니다. 무엇보다 맨 꼭대기에는 은은한 빛깔을 내는 동그란 구체가 놓여 있다.

&lt;br/&gt;
&lt;br/&gt;

☞ {reveal link: &#39;이 동그란 돌이 문을 여는 데에 쓰일지도 모른다고 말한다.&#39;, passage: &#39;31&#39;} 

&lt;br/&gt;

☞ {reveal link: &#39;돌을 챙기자고 말한다.&#39;, passage: &#39;56&#39;}

-----

&lt;br/&gt;

&lt;center&gt; {link to: &#39;2. 돌&#39;, label: &#39;계속하기&#39;}&lt;center&gt;

&lt;br/&gt;


</tw-passagedata><tw-passagedata pid="36" name="31" tags="" position="650,250" size="100,100">이 동그란 돌이 문을 여는 데에 쓰일지도 모른다고 말한다.
&lt;br/&gt;
크기로 보나 재질로 보나 정황상 그 잠겨 있다던 문에 꼭 맞게 만들어졌을 것이 분명해 보인다. 아라카는 문제의 돌에 대고 엉덩이를 들이밀다 말고, 당신의 말을 듣고 멈춰 서서 돌아본다. &quot;문? 아아, 그런 게 있었지. 자네는 모든 문의 열쇠 구멍 모양을 다 외우고 다니나? 굉장한 능력이구먼.&quot; </tw-passagedata><tw-passagedata pid="37" name="56" tags="" position="900,350" size="100,100">돌을 챙기자고 말한다.
&lt;br/&gt;
&quot;흠, 자네는 이런 취향인가 보구먼? 나는 좀 더 돈 되게 생긴 걸 좋아한다네. 특별히 이건 자네한테 양보할 테니, 다 가지게나.&quot;</tw-passagedata><tw-passagedata pid="38" name="2. 돌" tags="" position="200,550" size="100,100">아라카는 돌에 별 관심이 없어 보인다. 끝내는 당신이 동그란 돌을 챙긴다. 

&lt;br/&gt;
&lt;br/&gt;

☞ {reveal link: &#39;정 피곤하면 여기서 잠깐 쉬었다 가라고 말한다.&#39;, passage: &#39;12&#39;}

-----

&lt;br/&gt;

&lt;center&gt; {link to: &#39;3. 함정&#39;, label: &#39;계속하기&#39;}&lt;center&gt;

&lt;br/&gt;


</tw-passagedata><tw-passagedata pid="39" name="12" tags="" position="700,150" size="100,100">정 피곤하면 여기서 잠깐 쉬었다 가라고 말한다.
&lt;br/&gt;
아라카는 사양 않고 기어코 본인 엉덩이보다 좁은 받침대 위에 폴짝 뛰어올라 앉는다. 양발이 땅에서 떨어져 있음에도 균형을 잡고있는 것은 신기하지만 당연하게도 놀랍도록 하나도 편안해 보이지 않는다. 아라카는 부담스러울 정도로 정면에서 당신을 표정 변화 없이 바라보기만 하다가, 가뿐하게 땅으로 내려온다. &quot;다 쉬었다네. 이제 가 보세나.“</tw-passagedata><tw-passagedata pid="40" name="3. 함정" tags="" position="200,675" size="100,100"># 3. 함정

&lt;br/&gt;

당신과 아라카는 처음 방으로 무사히 돌아온다. 방을 지나쳐 반대편 길로 가자 웅장한 돌문은 그 앞을 가로막은 채 우뚝 서 있다. 화려한 무늬가 조각된 문 가운데에는, 방금 가져온 돌을 끼워 넣기에 딱 알맞게 생긴 동그란 홈이 있다.
&lt;br/&gt;

당신이 문에 돌을 끼워 넣자, 돌이 머금고 있던 은은한 빛깔이 문을 장식한 무늬를 따라 퍼져나간다. 이윽고 큰 소리를 울리며 묵직한 돌문이 양쪽으로 열려서 길을 터 준다.
&lt;br/&gt;

이번에는 아래로 내려가는 계단이 있다. 이곳은 지하일까, 지상일까? 계단을 내려가면 출구가 가까워지기는 할까? 하지만 별다른 선택지가 없는 관계로 우선은 나아가 보는 수밖에 없다.
&lt;br/&gt;

-----

&lt;br/&gt;

&lt;center&gt; {link to: &#39;3. 직선&#39;, label: &#39;계속하기&#39;}&lt;center&gt;

&lt;br/&gt;


</tw-passagedata><tw-passagedata pid="41" name="3. 직선" tags="" position="200,700" size="100,100">계단을 모두 내려서자 길고 곧게 뻗은 길이 당신들을 환영한다. 양쪽 벽에 일정한 간격으로 붙어 있는 횃불이 불을 밝히고 있는데, 천장은 하도 높아서 빛이 채 닿지도 않는다. 
&lt;br/&gt;

&quot;좋은 길이구먼. 이번엔 마물 같은 것도 없고, 일자로 쭉 이어져 있으니 길을 잃을 염려도 없지 않겠나! 내 집도 나중에 이렇게 지어야겠다네.&quot;
&lt;br/&gt;

아라카가 자신감 있게 발걸음을 내디딘다. 당신도 길을 따라 나아간다. 뚜벅뚜벅 발소리가 사방에서 울린다. 정확히 절반쯤 걸어왔을까? 갑자기 심상치 않은 거대한 땅 울림이 느껴진다. 
&lt;br/&gt;

-----

&lt;br/&gt;

&lt;center&gt; {link to: &#39;3. 벽&#39;, label: &#39;계속하기&#39;}&lt;center&gt;

&lt;br/&gt;



</tw-passagedata><tw-passagedata pid="42" name="3. 벽" tags="" position="200,725" size="100,100">&quot;그 왜, 어렸을 때 살았던 곳에 다시 가 보면 모든 게 그 시절에 비해 작아진 것처럼 느낀다고들 하지 않나.&quot;
&lt;br/&gt;

아라카는 답지 않게 감성적인 말을 한다.
&lt;br/&gt;

&quot;지금이 딱 그렇다네. 나도 한창 성장기인 모양이구먼. 이 길이 처음 봤을 때보다 점점 좁아지는 것 같지 않나.&quot;
&lt;br/&gt;

그 말대로, 어찌 된 일인지 양쪽 벽이 서서히 거리를 좁혀 오고 있다. 물론 당신이나 아라카의 몸 크기는 지극히 그대로이다. 이런 복도식 구조에서 흔히 있을 법한 벽 함정임이 틀림없다. 벽의 속도와 남은 거리로 가늠해 보자면, 지금까지와 같은 빠르기로 저벅저벅 걷는다면 당신도 아라카도 곧 이 벽의 벽화가 되고 말 것이라는 점은 분명해 보인다.

&lt;br/&gt;
&lt;br/&gt;

◆ {link to: &#39;25&#39;, label: &#39;달리자고 말한다.&#39;}

&lt;br/&gt;

◇ {link to: &#39;47&#39;, label: &#39;곧장 아라카를 붙잡고 달린다.&#39;}

&lt;br/&gt;</tw-passagedata><tw-passagedata pid="43" name="25" tags="" position="850,200" size="100,100">◆ 달리자고 말한다.

&lt;br/&gt;

당신은 달리는 게 좋겠다고 말한다. 아라카는 그 말에 동의하듯 고개를 끄덕여 보이는가 싶더니, 그 자리에서 총알처럼 발사된다. 일말의 망설임도 없이, 말 한마디 없이, 당신을 돌아보지도 않고, 더구나 상당히 몸에 익은 자세로 줄행랑을 치는 것이다. 당신도 서둘러 길 반대편을 향해 달리는 수밖에 없다.

-----

&lt;br/&gt;

&lt;center&gt; {link to: &#39;3. 악마&#39;, label: &#39;계속하기&#39;}&lt;center&gt;

&lt;br/&gt;


</tw-passagedata><tw-passagedata pid="44" name="47" tags="" position="950,300" size="100,100">◇ 곧장 아라카를 붙잡고 달린다.

&lt;br/&gt;

당신은 깊게 생각할 것도 없이 아라카의 뒷덜미·머리채·소맷자락·손·발 그 어디든 잡히는 부위를 붙잡고 달리기 시작한다. 겉보기에 비해서는 실속이 없는 몸인지 생각보다 가볍게 느껴진다. 아라카는 쉽게 이끌려 올 뿐만 아니라 거의 당신의 손에 제 몸을 맡겨두고 있어, 마치 벗어 놓은 옷가지가 바람에 나부끼듯 흔들린다. 이따금 바닥에 어딘가가 부딪히는 느낌도 들지만 그런 것을 신경 쓸 겨를 따위는 없다. 
&lt;br/&gt;

&lt;span style=&quot;color:red&quot;&gt; [아라카 HP -1]&lt;/span&gt;

-----

&lt;br/&gt;

&lt;center&gt; {link to: &#39;3. 악마&#39;, label: &#39;계속하기&#39;}&lt;center&gt;

&lt;br/&gt;


</tw-passagedata><tw-passagedata pid="45" name="3. 악마" tags="" position="200,750" size="100,100">당신과 아라카가 길 끝에 다다르자, 쿵 소리가 사방을 울린다. 뒤를 돌아보자, 길은 사라지고 온전히 맞닿은 거대한 벽이 있다. 아라카가 눈을 게슴츠레하게 뜨면서 벽 사이를 본다.
&lt;br/&gt;

&quot;우리 모두 무사히 지나왔으니 된 거 아니겠나! 아, 혹시 우리 일행이 총 세 명이었던 것은 아니겠지?&quot;
&lt;br/&gt;

-----

&lt;br/&gt;

&lt;center&gt; {link to: &#39;3. 낙서&#39;, label: &#39;계속하기&#39;}&lt;center&gt;

&lt;br/&gt;


</tw-passagedata><tw-passagedata pid="46" name="3. 낙서" tags="" position="200,775" size="100,100">앞으로 이어지는 길이 있다. 다시 주위를 경계하며 조금씩 앞으로 나아간다. 여전히 마물 따위가 돌아다니는 낌새는 보이지 않는다. 모퉁이를 돌던 당신은 벽에 자연스럽게 났다기엔 너무도 인위적이게 생긴, 흡사 낙서 같은 흠집을 발견한다.

&lt;br/&gt;
&lt;br/&gt;

☞ {reveal link: &#39;낙서를 자세히 관찰한다.&#39;, passage: &#39;61&#39;} 

&lt;br/&gt;

☞ {reveal link: &#39;아라카에게 낙서에 관해 묻는다.&#39;, passage: &#39;38&#39;}

&lt;br/&gt;

☞ {reveal link: &#39;아라카에게 본인이 그린 거 아니냐고 묻는다.&#39;, passage: &#39;29&#39;}

-----

&lt;br/&gt;

&lt;center&gt; {link to: &#39;3. 걷기&#39;, label: &#39;계속하기&#39;}&lt;center&gt;

&lt;br/&gt;

</tw-passagedata><tw-passagedata pid="47" name="61" tags="" position="650,400" size="100,100">낙서를 자세히 관찰한다.
&lt;br/&gt;
누가 작은 돌로 벽 표면을 긁어서 그려 놓은 것 같다. 울퉁불퉁한 직선으로 이루어진, 무언가를 나타낸 도형인 것 같긴 한데, 무엇인지 감이 잘 안 온다. 높이는, 옆에 서 있는 아라카가 팔을 앞으로 들어 올린다면 딱 저 정도에 해당하겠다.</tw-passagedata><tw-passagedata pid="48" name="38" tags="" position="1000,250" size="100,100">아라카에게 낙서에 관해 묻는다.
&lt;br/&gt;
&quot;딱 봐도 보물 상자를 나타낸 것 아니겠나. 근처 어딘가에 보물 상자가 있다는 뜻일 거라네!&quot; 아라카의 말을 듣고 보니 상상력과 포용력을 잘 발휘하면 그런 것 같기도 하고, 아닌 것 같기도 하다.</tw-passagedata><tw-passagedata pid="49" name="29" tags="" position="1050,200" size="100,100">아라카에게 본인이 그린 거 아니냐고 묻는다. 
&lt;br/&gt;
&quot;나는 여기까지 처음 왔다네! 게다가 이렇게 극사실주의적인 그림은 그리지도 못한다네.&quot; 아라카는 바닥 모서리에 굴러다니는 작은 돌을 주워 바로 옆에다 그 그림을 따라서 그린다. 극사실적인지는 몰라도 기존 것과 놀랍도록 흡사하게 잘 따라 그렸다. 똑같은 그림이 나란히 두 개가 되었다. &quot;음, 막상 해 보니 어떻게든 되는 것 같기도 하구먼. 자네도 해 보겠나?&quot; 아라카가 돌을 당신에게 내민다.</tw-passagedata><tw-passagedata pid="50" name="3. 걷기" tags="" position="200,800" size="100,100">당신과 아라카는 영문을 알 수 없는 낙서를 지나쳐 길을 따라 들어간다. 이따금 똑같은 흠집이 비슷한 높이에 나 있다. 어떤 때에는 똑같은 그림이 두 개인 것도 있고, 세 개인 것도 있다. 당신이 생각하기를 좋아하는 사람이라면 이것들이 다 무슨 뜻일지 유추해 보면서 걸을 수도 있다.
&lt;br/&gt;

어쨌거나 그 뒤로 아무런 특이 상황과 조우하는 일 없이 비슷비슷한 길과 좁은 방 여러 개를 지난다. 그러다 마침내 넓은 방 하나가 나타난다. 
&lt;br/&gt;

-----

&lt;br/&gt;

&lt;center&gt; {link to: &#39;3. 방&#39;, label: &#39;계속하기&#39;}&lt;center&gt;

&lt;br/&gt;


</tw-passagedata><tw-passagedata pid="51" name="3. 방" tags="" position="200,825" size="100,100">아무것도 없는 방인데도, 묘하게 심상치 않은 분위기가 감돈다. 반대편 벽에 길이 뚫려 있다.
&lt;br/&gt;

&quot;뭐가 있을 것처럼 생겼는데, 없구먼? 누가 벌써 다 털어갔나?&quot;
&lt;br/&gt;

아라카가 먼저 한 발 내딛는데, 발밑에서 가볍게 지잉 하고 울리는 소리가 난다. 아라카가 디딘 지점이 빛을 내고 있다.
&lt;br/&gt;

&quot;오호, 바닥 무늬에서 빛이 나다니?&quot;
&lt;br/&gt;

정확하게는, 아라카 발밑의 사각형 한 칸이 빛을 낸다. 과연 이 방의 바닥 전체에는 격자무늬가 새겨져 있다. 당신이 다음 행동을 취하려는 순간, 갑자기 아라카가 중심을 잃는다. 발밑의 돌이 쑥 빠져버린 것이다. 아라카는 민첩하게 몸을 뒤로 날린다

&lt;br/&gt;
&lt;br/&gt;

☞ {reveal link: &#39;아라카를 붙잡아준다.&#39;, passage: &#39;17&#39;} 


-----

&lt;br/&gt;

&lt;center&gt; {link to: &#39;3. 바닥&#39;, label: &#39;계속하기&#39;}&lt;center&gt;

&lt;br/&gt;

</tw-passagedata><tw-passagedata pid="52" name="17" tags="" position="950,150" size="100,100">아라카를 붙잡아준다.
&lt;br/&gt;
&quot;어이쿠, 무서웠다네!&quot; 당신에게 매달린 아라카의 표정이며 어조는 그다지 놀랐거나 무서워하는 사람으로는 보이지 않는 평소 그대로이다.</tw-passagedata><tw-passagedata pid="53" name="3. 바닥" tags="" position="200,850" size="100,100">다행히 아라카는 당신이 서 있는 쪽으로 무사히 돌아왔다. 돌 한 칸이 사라져버린 자리를 어두컴컴한 심연이 대신하고 있다. 자연스레 이 방의 바닥 전체가 이런 구조인 게 아닐까 하는 생각이 든다. 어쨌거나 현재로서 나아갈 수 있는 길은 하나 뿐이기에, 어떻게든 이 방을 건너가는 수밖에 없어 보인다. 
&lt;br/&gt;

당신은 아라카와 같은 칸을 밟으며 나아갈 수도 있지만, 원한다면 아라카와 각각 다른 칸에서 출발할 수도 있다. 관점에 따라서는 둘 다 떨어질 바엔 중 하나라도 살아서 나가는 것이 낫다고 생각할 수 있을 것이다.
&lt;br/&gt;
&lt;br/&gt;

◆ {link to: &#39;30&#39;, label: &#39;한 칸씩 조심스레 디뎌 보며 나아가자고 한다.&#39;}

&lt;br/&gt;

◇ {link to: &#39;9&#39;, label: &#39;바닥이 빠지기 전에 빠르게 달려서 지나가자고 한다.&#39;}

&lt;br/&gt;</tw-passagedata><tw-passagedata pid="54" name="30" tags="" position="600,250" size="100,100">◆ 한 칸씩 조심스레 디뎌 보며 나아가자고 한다. 

&lt;br/&gt;

&quot;오호, 그거 빅 브릿지도 두들겨 보며 건너자는 작전 아닌가!&quot;
&lt;br/&gt;

당신은 돌을 하나씩 건드려 보며 빠지지 않는 칸을 골라 전진한다. 그런데 중간쯤 건너왔을까, 인접한 모든 칸이 하나둘씩 바닥으로 빠져버렸다. 돌들이 서로를 지탱할 수 없는 구조가 되자 당신이 서 있는 칸마저 아래로 기울어진다.
&lt;br/&gt;

&quot;흠, 어쩔 수 없지. 한 칸 정도는 뛰어서 건너가 볼까?&quot; 
&lt;br/&gt;

아라카는 그 말을 남기고 전방에 있던 바닥 한 칸과 함께 심연 속으로 사라진다. 
&lt;br/&gt;

&lt;span style=&quot;color:red&quot;&gt; [아라카 HP -1] &lt;/span&gt;

-----

&lt;br/&gt;

&lt;center&gt; {link to: &#39;3. 착지&#39;, label: &#39;계속하기&#39;}&lt;center&gt;

&lt;br/&gt;
</tw-passagedata><tw-passagedata pid="55" name="9" tags="" position="1050,50" size="100,100">◇ 바닥이 빠지기 전에 빠르게 달려서 지나가자고 한다. 

&lt;br/&gt;

&quot;오호, 발이 빠지기 전에 다음 발을 딛는다는 거 아닌가! 여기서 성공한다면, 다음엔 물 위를 뛰는 것도 도전해 볼 만하겠네.&quot; 
&lt;br/&gt;
 
당신과 아라카는 돌이 완전히 빠지기 전에 다음 칸으로 전진하는 것을 반복한다. 그런데 점점, 돌이 빠지기까지 걸리는 시간이 짧아지는 것 같다. 방 끝에 거의 다다랐다고 생각했을 무렵, 당신과 아라카는 빠지는 바닥에 완전히 따라잡히고 만다.
&lt;br/&gt;

&lt;span style=&quot;color:red&quot;&gt;[아라카 HP -1] &lt;/span&gt;

-----

&lt;br/&gt;

&lt;center&gt; {link to: &#39;3. 착지&#39;, label: &#39;계속하기&#39;}&lt;center&gt;

&lt;br/&gt;


</tw-passagedata><tw-passagedata pid="56" name="3. 착지" tags="" position="200,875" size="100,100">그렇게 끝을 알 수 없는 어둠 속으로 곤두박질치나 싶었는데, 생각보다 금방 바닥이 가까워진다. 당신이 이럴 때를 대비해 익혀 둔 낙법에 의해서든, 원래부터 바닥이랑 거리가 먼 삶을 보내던 덕분이든, 그런 건 없고 그저 운 좋게 적절한 자세로 떨어진 탓이든 당신은 무사히 단단하고 평평한 바닥에 도달했다. 설사 몸이 바닥에 부딪혔더라도 그렇게 높은 곳이 아닌 덕분인지 아픔이 금방 가신다. 
&lt;br/&gt;

&quot;오, 여긴 어디지? 우리는 처음 방으로 되돌아온 건가?&quot;
&lt;br/&gt;

멀지 않은 곳에서 다시 아라카의 목소리가 들려 온다. 그의 상태도 당신과 마찬가지로 별다른 상처는 없어 보인다.
&lt;br/&gt;

-----

&lt;br/&gt;

&lt;center&gt; {link to: &#39;3. 어둠&#39;, label: &#39;계속하기&#39;}&lt;center&gt;

&lt;br/&gt;

</tw-passagedata><tw-passagedata pid="57" name="3. 어둠" tags="" position="200,900" size="100,100">당신은 주위를 탐색한다. 횃불 하나 없는 곳이다. 벽이나 바닥을 비롯한 전체적인 구조는 지금까지와 별반 차이가 없다. 여태 아래로 내려오기만 했으니 이곳이 상식적인 장소라면 아라카의 말대로 처음 장소로 돌아왔을 리는 없다. 무엇보다도, 지금까지는 들을 수 없었던 소리가 들린다. 끊임없이 쏟아지고 있는 물소리 같은 것이.
&lt;br/&gt;

당신과 아라카는 그 소리가 들리는 곳을 향해, 일단은 어둠 속을 나아가 본다. 

&lt;br/&gt;

☞ {reveal link: &#39;무언가 재미있는 이야기라도 해 보라고 한다.&#39;, passage: &#39;55&#39;}

-----

&lt;br/&gt;

&lt;center&gt; {link to: &#39;3. 폭포&#39;, label: &#39;계속하기&#39;}&lt;center&gt;

&lt;br/&gt;

</tw-passagedata><tw-passagedata pid="58" name="55" tags="" position="850,350" size="100,100">무언가 재미있는 이야기라도 해 보라고 한다.
 &lt;br/&gt;
아라카는 자신이 겪었던 낭패담을 풀어놓는다. 당신이 이전에 들어 본 듯도 한 이야기거나, 그것과 거의 똑같은 레퍼토리의 다른 이야기다. 즉, 어디서 본인이 뭘 실수하는 바람에 뭔가를 크게 잃거나 사람 또는 마물에게 쫓겨 다녔다는 내용이다. 어찌나 천편일률적인지 당신이 응용력이 좋은 사람이라면 당신도 곧잘 에피소드 하나를 지어낼 수 있을 것 같다.</tw-passagedata><tw-passagedata pid="59" name="3. 폭포" tags="" position="200,925" size="100,100">모퉁이 몇 개를 돌자, 물소리의 근원이 모습을 드러낸다. 높은 곳의 천장이 뚫려 있고, 그곳으로 환한 달빛이 새어들고 있다. 달빛은 위쪽 벽에서 흘러나와 속절없이 떨어지고 있는 물줄기를 은빛으로 반짝이게 한다. 바닥에는 그 작은 폭포가 만들어 놓은 맑은 웅덩이가 있다. 한편 벽 한구석에는 다른 쪽으로 뚫려 있는 길이 있다.
&lt;br/&gt;

&quot;오, 경치가 제법 근사한 곳 아닌가. 나들이 온 기분도 들고 좋구먼.&quot;
&lt;br/&gt;

아라카는 망설이는 기색 하나 없이 물웅덩이로 다가간다. 

&lt;br/&gt;

☞ {reveal link: &#39;천장의 구멍을 살핀다&#39;, passage: &#39;10&#39;}

&lt;br/&gt;

☞ {reveal link: &#39;물을 자세히 살핀다.&#39;, passage: &#39;23&#39;}

-----

&lt;br/&gt;

&lt;center&gt; {link to: &#39;3. 물&#39;, label: &#39;계속하기&#39;}&lt;center&gt;

&lt;br/&gt;
</tw-passagedata><tw-passagedata pid="60" name="10" tags="" position="600,150" size="100,100">천장의 구멍을 살핀다.
&lt;br/&gt;
둥근 달 하나가 환하게 빛나고 있는 맑은 밤하늘에, 바깥의 맑고 시원한 공기가 통하고 있다. 그렇다고 해서 과감하게 기어서 올라가는 것을 시도해 보기에는 참 높고도 미끄러울 것 같은 벽이다.
</tw-passagedata><tw-passagedata pid="61" name="23" tags="" position="750,200" size="100,100">물을 자세히 살핀다.
&lt;br/&gt;
달빛을 받아 반짝인다. 무색무취. 공기 중으로 흩뿌리는 물방울이 제법 차갑다.</tw-passagedata><tw-passagedata pid="62" name="3. 물" tags="" position="200,950" size="100,100">아라카는 웅덩이에 한 손을 담가 보더니 자연스레 물을 떠 마시려는 자세를 취한다. 그가 이곳에 얼마나 있었던 것인지는 몰라도, 이런 장소에서 마실 수 있는 물은 상당히 희귀할 것이다. 어쩌면 당신도 갈증을 느끼던 참인지도 모른다.

&lt;br/&gt;

☞ {reveal link: &#39;물을 먼저 마셔본다.&#39;, passage: &#39;58&#39;}

&lt;br/&gt;

☞ {reveal link: &#39;물을 담아간다.&#39;, passage: &#39;36&#39;}

-----

&lt;br/&gt;
&lt;br/&gt;

◆ {link to: &#39;14&#39;, label: &#39;아라카가 물을 마시게 한다.&#39;}

&lt;br/&gt;

◇ {link to: &#39;28&#39;, label: &#39;아라카가 물을 마시지 않게 한다.&#39;}

&lt;br/&gt;</tw-passagedata><tw-passagedata pid="63" name="58" tags="" position="1000,350" size="100,100">물을 먼저 마셔본다.
&lt;br/&gt;
당신은 물을 직접 마셔본다. 혀끝에 닿았을 때는 특별한 느낌이 없지만 삼키는 순간 찌릿하면서 타오르는 감각이 속을 저민다. 하지만 몇 초 뒤면 그 감각은 가뿐히 가신다. 옆에서 당신을 지켜 본 아라카가 묻는다. “그렇게나 맛있는 건가?”
</tw-passagedata><tw-passagedata pid="64" name="36" tags="" position="900,250" size="100,100">물을 담아간다.
&lt;br/&gt;
당신의 주머니에 액체를 보관할 수 있는 소지품이 들어 있다면 물을 담아가는 것을 시도할 수 있다. 하지만 물을 담아 올리자마자, 몇 초 내에 물은 빠르게 증발하듯 사라져버린다. 이거 정말 물이 맞긴 한 걸까?</tw-passagedata><tw-passagedata pid="65" name="14" tags="" position="800,150" size="100,100">◆ 아라카가 물을 마시게 한다. 

&lt;br/&gt;

당신은 아라카가 물을 마시도록 내버려 둔다. 아라카가 물을 꼴깍꼴깍 삼키는 소리가 쓸데없이 크고 선명하게 들린다. 
&lt;br/&gt;

&quot;크으, 이거 시원하구먼!&quot;

&lt;span style=&quot;color:green&quot;&gt; [아라카 HP +1]&lt;/span&gt;

&lt;br/&gt;

-----

&lt;br/&gt;

&lt;center&gt; {link to: &#39;3. 횃불&#39;, label: &#39;계속하기&#39;}&lt;center&gt;

&lt;br/&gt;
</tw-passagedata><tw-passagedata pid="66" name="28" tags="" position="1000,200" size="100,100">◇ 아라카가 물을 마시지 않게 한다.

&lt;br/&gt;

당신은 아라카에게 물을 마시지 않는 것이 좋겠다고 말하거나, 혹은 직접 몸으로 말릴 수도 있다. 
&lt;br/&gt;
 
아라카는 물에서 순순히 손을 떼며 일어선다. 
&lt;br/&gt;
 
&quot;흠, 안 그래도 별로 맛이 없어 보이긴 했다네! 이런 거 말고 돈 되는 거나 찾으러 가세나.&quot;

&lt;br/&gt;

-----

&lt;br/&gt;

&lt;center&gt; {link to: &#39;3. 횃불&#39;, label: &#39;계속하기&#39;}&lt;center&gt;

&lt;br/&gt;
</tw-passagedata><tw-passagedata pid="67" name="3. 횃불" tags="" position="200,975" size="100,100">더 나아갈 수 있는 길이 딱 하나 있다. 뚫려 있는 벽 너머로 횃불이 밝혀진 통로가 보인다. 들어서려면 바닥에 흩어진 잔해를 잘 해치고 나아가야 한다. 
&lt;br/&gt;

그렇게 폭포를 뒤로 한 채 통로로 들어오자 이번에는 사뭇 이질적인 광경이 나타난다.

&lt;br/&gt;
&lt;br/&gt;


-----

&lt;br/&gt;

&lt;center&gt; {link to: &#39;4. 결전&#39;, label: &#39;계속하기&#39;}&lt;center&gt;

&lt;br/&gt;</tw-passagedata><tw-passagedata pid="68" name="4. 결전" tags="" position="400,425" size="100,100"># 4. 결전

&lt;br/&gt;

굉장히 넓고 천장이 높은 공간이다. 당신은 땅에서 일정한 높이로 솟아오른 돌기둥 같은 구조물들을 지나쳐 계속해서 안으로 들어선다. 맨 안쪽에서 무언가가 빛을 발하고 있다. 
&lt;br/&gt;

&quot;오, 드디어 돈 좀 되게 생긴 게 있구먼?&quot;
&lt;br/&gt;

큼직한 광물 하나가 받침대 위에 우뚝 서 있다.
&lt;br/&gt;

&quot;이런 걸 크리스탈이라고 부르던가?&quot;
&lt;br/&gt;

가까이 있는 것만으로도 어딘가 범상치 않은 영험한 기운이 느껴지는, 스스로 청백색 빛을 띠며 근처를 훤하게도 밝히는, 위아래가 뾰족하게 깎여 있는 마름모꼴 보석. 영락없는 크리스탈이다. 
&lt;br/&gt;

&quot;가만있자. 이거 어디서 본 듯도 한데. 그렇지. 최근에 누가 이걸 그림으로 그리지 않았나. 그 왜, 벽에서 봤던 것 같은데.&quot;
&lt;br/&gt;

아라카가 크리스탈을 살피며 그 주위를 한 바퀴 돈다.
&lt;br/&gt;

-----

&lt;br/&gt;

&lt;center&gt; {link to: &#39;4. 깜빡&#39;, label: &#39;계속하기&#39;}&lt;center&gt;

&lt;br/&gt;


</tw-passagedata><tw-passagedata pid="69" name="4. 깜빡" tags="" position="400,450" size="100,100">&quot;아! 그렇지! 깜빡 잊고 있었지 뭔가!&quot;
&lt;br/&gt;

아라카는 갑자기 우뚝 멈춰 서서 당신을 향해 말한다.
&lt;br/&gt;

&quot;이게, 그러니까, 그거였다네. 내가 여기서 이 크리스탈을 지키기로 되어 있었거든. 그런데 돌아다니면서 이것저것 구경하다 보면 한 번씩 그 사실을 까먹게 되길래, 까먹지 않으려고 벽에 표시를 해 둔 거였지. 또 잊어버리고 있었구먼! 그래도 이렇게 떠올릴 방법을 마련해 두다니, 나도 꽤 발전하지 않았나?&quot;
&lt;br/&gt;

그러더니, 그 자리에서 주먹을 들어 보이며 전투태세를 취한다.
&lt;br/&gt;

&quot;그래서 말인데, 이 방에 들어온 침입자는 모조리 물리쳐야 한다네.&quot;

&lt;br/&gt;
&lt;br/&gt;

☞ {reveal link: &#39; 자신은 침입자가 아니라고 말한다.&#39;, passage: &#39;52&#39;} 

&lt;br/&gt;

☞ {reveal link: &#39;크리스탈을 왜 지킨다는 것인지 묻는다.&#39;, passage: &#39;27&#39;}

&lt;br/&gt;

☞ {reveal link: &#39;누가 시킨 거냐고 묻는다.&#39;, passage: &#39;16&#39;}

&lt;br/&gt;

☞ {reveal link: &#39;어떤 크리스탈이냐고 묻는다.&#39;, passage: &#39;45&#39;}

&lt;br/&gt;

☞ {reveal link: &#39;크리스탈에 관심이 없다고 말한다.&#39;, passage: &#39;34&#39;}

-----

&lt;br/&gt;

&lt;center&gt; {link to: &#39;4. 격투&#39;, label: &#39;계속하기&#39;}&lt;center&gt;

&lt;br/&gt;


</tw-passagedata><tw-passagedata pid="70" name="52" tags="" position="700,350" size="100,100">자신은 침입자가 아니라고 말한다.
&lt;br/&gt;
아라카의 뜻밖의 선언에 당신은 꽤 억울하거나 황당할지도 모른다. 애초에 이곳으로 온 것도 자의가 아니었고, 그 때문에 이곳에 이런 뭐에 쓰는지도 모를 크리스탈이 있는지조차 알 길이 없었으며, 무엇보다 아라카와 함께, 이 공간에서 탈출할 길을 찾는 과정에서 들어선 참이기 때문이다. &quot;그런가? 미안하게 됐구먼. 하지만 이미 이 방에 발을 디딘 이상 예외는 없다네.“</tw-passagedata><tw-passagedata pid="71" name="27" tags="" position="950,200" size="100,100">크리스탈을 왜 지킨다는 것인지 묻는다.
&lt;br/&gt;
&quot;그게 말일세, 나도 자네와 한가로운 피크닉을 즐기다 보니 잊고 있었네만, 여기가 바로 내 직장이었지 뭔가! 내가 경비 일을 좀 해 봤다고 했더니, 어떤 작자가 나를 고용해 줬지. 나는 바로 이 크리스탈을 지키기 위해 이 안에 들어와 있었던 거였다네! 흥미롭지 않은가!&quot;</tw-passagedata><tw-passagedata pid="72" name="16" tags="" position="900,150" size="100,100">누가 시킨 거냐고 묻는다.
&lt;br/&gt;
&quot;그야 물론.&quot; 아라카는 자신만만하게 답한다. &quot;잊어버렸다네. 그게 중요하겠나? 중요한 건 내가 받게 될 보수라네. 벌써 입구에 내 동상도 지어지고 있지 않으려나?&quot;</tw-passagedata><tw-passagedata pid="73" name="45" tags="" position="850,300" size="100,100">어떤 크리스탈이냐고 묻는다. 
&lt;br/&gt;
&quot;그야 물론.&quot; 아라카는 의기양양하게 답한다. &quot;모른다네. 누가 돈 받고 지켜야 할 정도면 굉장히 중요한 거 아니겠나! 언젠가 때가 되면 알게 되겠지.&quot;</tw-passagedata><tw-passagedata pid="74" name="34" tags="" position="800,250" size="100,100">크리스탈에 관심이 없다고 말한다.
&lt;br/&gt;
&quot;그런가?&quot; 아라카는 믿을 수 없다는 듯 크리스탈을 흘끗 돌아봤다가 말한다. &quot;하긴, 사람마다 취향이 다양하니 그럴 수는 있겠지. 하지만, 이 크리스탈을 본 사람이 여기서 살아서 나가게 두기도 찜찜하다네. 자네가 밖에 나가서 소문이라도 내면 어떡하나. 나는 모가지일 걸세.&quot;</tw-passagedata><tw-passagedata pid="75" name="4. 격투" tags="" position="400,475" size="100,100">아라카는 별도의 무구 없이, 맨손으로 격투를 할 모양이다. 크리스탈의 빛을 받은 그의 반쪽 얼굴은 언제나처럼 온화한 미소를 띤 것처럼 보이지만, 그림자에 가려진 반대쪽은 생동감이라고는 보이지 않는 무표정이다.
&lt;br/&gt;

&quot;지금까지의 정을 생각하면 아쉽긴 하네만. 이 보물고에 들어온 것이 운이 나빴다고 생각하게나. 살다 보면 한 번쯤 이런 날도 있는 법일세.&quot;
&lt;br/&gt;

그렇게 말하고서 아라카는 제자리에서 힘을 모으는 자세를 취한다. 

&lt;br/&gt;

☞ {reveal link: &#39;아라카를 선제공격한다.&#39;, passage: &#39;11&#39;}

-----

&lt;br/&gt;

&lt;center&gt; {link to: &#39;4. 돌진&#39;, label: &#39;계속하기&#39;}&lt;center&gt;

&lt;br/&gt;


</tw-passagedata><tw-passagedata pid="76" name="11" tags="" position="650,150" size="100,100">아라카를 선제공격한다.
&lt;br/&gt;
당신은 아라카가 공격해 올 것을 직감하고 그 전에 과감하게 선수를 치기로 한다. 당신이 공격 수단을 꺼내 들자, 아라카는 즉시 회피하려 들지만 예상하지 못한 탓인지 당신의 공격이 살짝 스치듯 그를 타격한다. 
&lt;br/&gt;
&lt;span style=&quot;color:red&quot;&gt; [아라카 HP-1] &lt;/span&gt;
</tw-passagedata><tw-passagedata pid="77" name="4. 돌진" tags="" position="400,500" size="100,100">아라카는 직후 땅을 박차고 신속하게 돌진하더니 일격을 시도한다. 당신은 그의 움직임을 알아차리고 공격을 받아치거나, 어느 쪽으로든 피할 수도 있을 것 같다.

&lt;br/&gt;
&lt;br/&gt;

◆ {link to: &#39;62&#39;, label: &#39;정면에서 맞서서 아라카의 공격을 받아낸다.&#39;}

&lt;br/&gt;

◇ {link to: &#39;43&#39;, label: &#39;아라카의 주먹을 피한다.&#39;}

&lt;br/&gt;</tw-passagedata><tw-passagedata pid="78" name="62" tags="" position="700,400" size="100,100">◆ 정면에서 맞서서 아라카의 공격을 받아낸다. 

&lt;br/&gt;

당신은 당신이 다루는 무구, 혹은 능력으로 그 일격을 받아내고자 한다. 아라카의 주먹이 당신과 맞붙는 순간, 보이지 않는 힘의 파장이 사방으로 튄다. 그 여파는 옆에 있는 돌기둥에 금이 가게 만든다. 부서져 내리는 기둥 사이에서 무언가가 반짝인다. 
&lt;br/&gt;

아라카는 다시 당신을 공격하는 대신 그 기둥을 향해 발차기를 날린다. 그리고는 공중으로 흩어지는 잔해 사이에서 무언가를 붙잡는다. 그의 손에 들린 것은 마수를 다룰 수 있을 것도 같은 한 자루의 채찍이다.
&lt;br/&gt;

-----

&lt;br/&gt;

&lt;center&gt; {link to: &#39;4. 무기&#39;, label: &#39;계속하기&#39;}&lt;center&gt;

&lt;br/&gt;
</tw-passagedata><tw-passagedata pid="79" name="43" tags="" position="750,300" size="100,100">◇ 아라카의 주먹을 피한다.

&lt;br/&gt;

 아라카가 내지른 주먹이 허공을 가른다. 그리고는 당신 뒤에 있던 돌기둥을 그대로 가격한다. 돌기둥은 그 자리에서 박살이 난다. 무너져내린 기둥 잔해 사이에 무언가가 반짝인다. 아라카는 금세 중심을 잡고서 다시 자세를 취하며, 빠른 몸놀림으로 그것을 집어든다. 그의 손에 들린 것은 어쩐지 성스러운 분위기를 풍기는 한 자루의 창이다. 
 &lt;br/&gt;
 
&lt;span style=&quot;color:red&quot;&gt; [아라카 HP -1]&lt;/span&gt;

&lt;br/&gt;

-----

&lt;br/&gt;

&lt;center&gt; {link to: &#39;4. 무기&#39;, label: &#39;계속하기&#39;}&lt;center&gt;

&lt;br/&gt;
</tw-passagedata><tw-passagedata pid="80" name="4. 무기" tags="" position="400,525" size="100,100">당신이 &#39;느닷없이 새 무기를 뽑다니 치사하다?&#39;라고 생각하든, &#39;그래 봤자 너는 몽크잖아.&#39; 라고 생각하든 아라카는 새롭게 얻은 무기를 손에 가볍게 쥔 채 당신을 바라본다. 그리고서는 자세를 고치는데, 그 품새가 영 엉성하고 어색하기만 하다. 
&lt;br/&gt;

&quot;내가 전에 이걸 써 본 적이 있던가? 뭐, 딱히 큰 상관은 없네만.&quot;
 &lt;br/&gt;
 
아라카는 공중에 무기를 어정쩡하게 한 번 휘둘러 보고는 곧장 당신을 향해 전진하며 공격 태세를 갖춘다. 여전히 저 무기를 오늘 처음 잡은 사람으로밖에 보이지 않는데, 어째서인지 그 발걸음에는 망설이는 기색이 조금도 묻어나지 않는다.
&lt;br/&gt;
&lt;br/&gt;

◆ {link to: &#39;13&#39;, label: &#39;아라카를 전력으로 상대한다.&#39;}

&lt;br/&gt;

◇ {link to: &#39;46&#39;, label: &#39;아라카를 적당히 상대한다.&#39;}

&lt;br/&gt;</tw-passagedata><tw-passagedata pid="81" name="13" tags="" position="750,150" size="100,100">◆ 아라카를 전력으로 상대한다. 

&lt;br/&gt;

 당신은 강한 적을 상대할 때와 마찬가지로, 가진 능력을 충분히 발휘하며 아라카에 맞선다. 아라카는 무기를 마구잡이로 휘둘러 당신을 노리면서도 당신의 공격을 어떻게든 피하려 든다.
 &lt;br/&gt;
 
 그 과정에서 당신의 공격이 아라카의 머리를 스치자, 아라카의 뒤통수를 덮고 있던 모자가 훌렁 벗겨진다. 그 안에 덮여 있던 긴 머리카락이 드러나며 공중으로 흩날린다. 
 
 -----
 
 &lt;br/&gt;

&lt;center&gt; {link to: &#39;4. 주춤&#39;, label: &#39;계속하기&#39;}&lt;center&gt;

&lt;br/&gt;
</tw-passagedata><tw-passagedata pid="82" name="46" tags="" position="900,300" size="100,100">◇ 아라카를 적당히 상대한다.

&lt;br/&gt;

 당신은 힘을 아끼거나 상대를 봐 주듯이, 전력을 다하지 않고 아라카에 맞선다. 아라카는 무기를 마구잡이로 휘둘러 당신을 노리면서도 현란한 움직임으로 당신의 공격을 아슬아슬하게 피한다. 
 &lt;br/&gt;
 
그 과정에서 아라카의 뒤통수를 덮고 있던 모자 아래로, 덮여 있던 긴 머리카락이 몇 가닥씩 흘러내린다. 

 -----
 
 &lt;br/&gt;

&lt;center&gt; {link to: &#39;4. 주춤&#39;, label: &#39;계속하기&#39;}&lt;center&gt;

&lt;br/&gt;
</tw-passagedata><tw-passagedata pid="83" name="4. 주춤" tags="" position="400,550" size="100,100">아라카는 일순 중심이 흐트러졌는지 주춤하더니 한발 뒤로 물러나 거리를 벌린다.

&lt;br/&gt;
&lt;br/&gt;

☞ {reveal link: &#39;싸우지 말자고 말로 설득을 시도한다.&#39;, passage: &#39;50&#39;}

&lt;br/&gt;

☞ {reveal link: &#39;돈을 줄 테니 그만두라고 한다.&#39;, passage: &#39;8&#39;}

&lt;br/&gt;

-----

&lt;br/&gt;

&lt;center&gt; {link to: &#39;4. 능란&#39;, label: &#39;계속하기&#39;}&lt;center&gt;

&lt;br/&gt;
</tw-passagedata><tw-passagedata pid="84" name="50" tags="" position="600,350" size="100,100">싸우지 말자고 말로 설득을 시도한다.
&lt;br/&gt;
당신은 말이 되는 이유를 들거나, 아라카의 논리를 지적하거나, 당신의 심정을 솔직하게 드러내거나, 어찌 됐든 대화로 이 상황을 끝내려고 해 본다. 아라카는 당신의 말을 끝까지 듣는다. &quot;그거 말 되는구먼. 알겠네. 우리 모두를 위해 빨리 끝내도록 하세.&quot; 당신의 말을 어떻게 이해한 건지 아라카는 무기를 당신을 향해 겨눈다. </tw-passagedata><tw-passagedata pid="85" name="8" tags="" position="1000,50" size="100,100">돈을 줄 테니 그만두라고 한다. 
&lt;br/&gt;
&quot;그건 생각해볼 만한 문제구먼.&quot; 아라카는 그 자리에 멈춰 서서 잠깐 말이 없다. &quot;가만있게나, 원래 얼마를 받기로 했는지 기억이 안 나서 말일세.&quot; 당신이 생각하기에 적당한 금액을 제시한다면, 아라카는 무기를 다시 꼬나쥔다. &quot;오, 안됐네만 한 번에 여러 가지를 동시에 생각할 수가 없다네. 일단 자네를 쓰러뜨려 놓고 계산해 봐야겠구먼.&quot;
</tw-passagedata><tw-passagedata pid="86" name="4. 능란" tags="" position="400,575" size="100,100">크리스탈의 빛을 반사한 그의 무기가 시퍼렇게 빛난다. 아라카는 크리스탈을 등진 채, 곧장 당신을 향해 돌진해 온다. 어쩐지 조금 전에 비해 더 빨라진 움직임으로, 당신을 몰아붙인다. 기분 탓일지도 모르지만, 당신의 공격을 피하거나 받아넘기는 것이 더 능란해진 것 같기도 하다.
&lt;br/&gt;

다시 몇 합을 주고받는 동안 당신의 머릿속에는, 이 상황을 간편하게 끝낼 방법 한 가지가 떠오른다.
&lt;br/&gt;
&lt;br/&gt;

☞ {link to: &#39;42&#39;, label: &#39;아라카를 전투 불능으로 만든다.&#39;}

-----

&lt;br/&gt;
&lt;br/&gt;

◆ {link to: &#39;7&#39;, label: &#39;크리스탈을 노린다.&#39;}

&lt;br/&gt;

◇ {link to: &#39;54&#39;, label: &#39;새로운 정보를 말해서 아라카가 자신의 임무를 망각하도록 유도한다.&#39;}

&lt;br/&gt;
</tw-passagedata><tw-passagedata pid="87" name="42" tags="" position="700,300" size="100,100">아라카를 전투 불능으로 만든다.

&lt;br/&gt;

당신은 전투 실력으로 아라카를 완전히 압도한다. 당신은 조금의 빈틈도 주지 않고 그의 허를 찔러, 모든 공격을 유효타로 만든다. 아라카가 쥐고 있던 새 무기가 덜그렁 소리를 내며 나동그라진다. 당신은 치명상을 입히는 데에 성공한다. 누가 보더라도 당장은 일어나지 못할 몰골을 하고서 아라카는 바닥으로 쓰러진다. 정확히는, 천장을 보고 대 자로 뻗는다.
&lt;br/&gt;

&quot;아이고, 아파라.&quot;
&lt;br/&gt;

그 말과 함께 아라카가 양 손바닥으로 머리께의 바닥을 짚고는 허리를 꺾어 튕기더니, 그대로 두 다리로 바닥을 구르며 가뿐하게 일어난다. 아라카는 바닥에 떨어진 무기에는 눈길도 주지 않고 말한다.
&lt;br/&gt;

&quot;2페이즈라네.&quot;
&lt;br/&gt;

아라카는 맨주먹을 들어 보이며 공중에 발을 한 번 휘두른다. 그 상처를 입었는데도 조금도 지치지 않은 기색이다. 저런 상태라면 어디를 어떻게 공격해야 무력화시킬 수 있는 것인지 감이 오지 않는다. 
&lt;br/&gt;

&lt;span style=&quot;color:red&quot;&gt; [아라카 HP -5] &lt;/span

&lt;br/&gt;

-----

&lt;br/&gt;

&lt;center&gt; {link to: &#39;4. 능란&#39;, label: &#39;계속하기&#39;}&lt;center&gt;

&lt;br/&gt;

</tw-passagedata><tw-passagedata pid="88" name="7" tags="" position="950,50" size="100,100">◆ 크리스탈을 노린다. 

&lt;br/&gt;

당신은 그의 어깨너머에서 유유히 빛나고 있는 크리스탈의 존재를 의식한다. 만약 저것이 사회적으로 중요한 역할을 하는 크리스탈이라면 이렇게나 사람의 발길이 닿지 않는 곳에 파묻어 놓고 몰래 지키게 할 리가 없을 것이다. 혹은 애초에 어찌 되든 당신과는 아무래도 상관없는 크리스탈이라는 생각을 했을지도 모른다. 당신은 아라카의 공격을 받아치면서, 조금씩 크리스탈 쪽으로 공격을 유도한다. 
&lt;br/&gt;

아라카는 경비원이라는 호칭이 무색하지 않을 만큼, 크리스탈로 향하는 공격만큼은 철벽 수비한다. 그 과정에서 당신의 공격에 상처를 입기도 하지만 아라카는 고통을 느끼지 않는 사람처럼 끄떡도 하지 않는다. 어느 시점부터는 말도 완전히 없어졌다.
&lt;br/&gt;

당신은 아라카의 주의를 돌리기로 한다. 방향을 급히 바꾸어 가까이 있는 기둥 하나를 공격하자, 아라카의 시선이 부서지는 기둥 사이에서 빛나는 또 다른 무기로 향한다. 당신은 그 틈을 놓치지 않고 크리스탈로 향한다. 당신의 다음 공격이 크리스탈을 부술 거라는 것을 알아차린 즉시, 아라카는 움직임을 멈춘다. 
&lt;br/&gt;

&lt;span style=&quot;color:red&quot;&gt; [아라카 HP -2] &lt;/span

&lt;br/&gt;

-----

&lt;br/&gt;

&lt;center&gt; {link to: &#39;5. 결말&#39;, label: &#39;계속하기&#39;}&lt;center&gt;

&lt;br/&gt;
</tw-passagedata><tw-passagedata pid="89" name="54" tags="" position="800,350" size="100,100">◇ 새로운 정보를 말해서 아라카가 자신의 임무를 망각하도록 유도한다. 

&lt;br/&gt;

당신은 아라카의 평소 행각을 돌아본다. 툭하면 뭘 잊어버렸다느니, 기억이 안 난다느니. 방금까지도 자신이 왜 이 장소에 와 있었는지조차 모른다고 했다. 처음 만났던 방을 나설 때 자신은 이 앞으로 나가 본 적이 없다고 말했던 것은 거짓이 되는 셈이다. 
&lt;br/&gt;

그 모든 게 사실이라면, 당신은 아라카가 다시 자신의 임무를 잊게 만들 수도 있지 않을까 생각한다. 아라카가 흥미를 보일 법한 새로운 정보라고 한다면? 당신은 그와 맞붙으며 넌지시 화두를 흘린다. 당신이 알고 있는, 돈이 될 법한 보물이 묻혀 있다는 신비한 장소에 대한 전설, 또는 당신의 세계에서 유명한 옛 영웅이 쓰던 무기, 또는 당신이 쓰는 전투 기술의 노하우.
&lt;br/&gt;

당신이 무엇을 말하건 아라카는 저 세 가지에 해당하는 내용에 관심을 보인다. 경합을 나누는 주기가 점점 길어지더니, 이야기가 끝날 즈음 아라카는 싸움은커녕 방안을 그저 뚜벅뚜벅 거닐며 당신의 말을 경청하는 모양새가 되어 있다.

&lt;br/&gt;

-----

&lt;br/&gt;

&lt;center&gt; {link to: &#39;5. 결말&#39;, label: &#39;계속하기&#39;}&lt;center&gt;

&lt;br/&gt;
</tw-passagedata><tw-passagedata pid="90" name="5. 결말" tags="" position="400,700" size="100,100">끝!</tw-passagedata></tw-storydata></html>